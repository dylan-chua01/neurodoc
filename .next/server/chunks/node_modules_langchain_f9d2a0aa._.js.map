{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/document_loaders/base.js"],"sourcesContent":["export * from \"@langchain/core/document_loaders/base\";\n"],"names":[],"mappings":";AAAA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 25, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/document_loaders/fs/buffer.js"],"sourcesContent":["import { getEnv } from \"@langchain/core/utils/env\";\nimport { BaseDocumentLoader } from \"../base.js\";\n/**\n * Abstract class that extends the `BaseDocumentLoader` class. It\n * represents a document loader that loads documents from a buffer. The\n * `load()` method is implemented to read the buffer contents and metadata\n * based on the type of `filePathOrBlob`, and then calls the `parse()`\n * method to parse the buffer and return the documents.\n */\nexport class BufferLoader extends BaseDocumentLoader {\n    constructor(filePathOrBlob) {\n        super();\n        Object.defineProperty(this, \"filePathOrBlob\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: filePathOrBlob\n        });\n    }\n    /**\n     * Method that reads the buffer contents and metadata based on the type of\n     * `filePathOrBlob`, and then calls the `parse()` method to parse the\n     * buffer and return the documents.\n     * @returns Promise that resolves with an array of `Document` objects.\n     */\n    async load() {\n        let buffer;\n        let metadata;\n        if (typeof this.filePathOrBlob === \"string\") {\n            const { readFile } = await BufferLoader.imports();\n            buffer = await readFile(this.filePathOrBlob);\n            metadata = { source: this.filePathOrBlob };\n        }\n        else {\n            buffer = await this.filePathOrBlob\n                .arrayBuffer()\n                .then((ab) => Buffer.from(ab));\n            metadata = { source: \"blob\", blobType: this.filePathOrBlob.type };\n        }\n        return this.parse(buffer, metadata);\n    }\n    /**\n     * Static method that imports the `readFile` function from the\n     * `fs/promises` module in Node.js. It is used to dynamically import the\n     * function when needed. If the import fails, it throws an error\n     * indicating that the `fs/promises` module is not available in the\n     * current environment.\n     * @returns Promise that resolves with an object containing the `readFile` function.\n     */\n    static async imports() {\n        try {\n            const { readFile } = await import(\"node:fs/promises\");\n            return { readFile };\n        }\n        catch (e) {\n            console.error(e);\n            throw new Error(`Failed to load fs/promises. TextLoader available only on environment 'node'. It appears you are running environment '${getEnv()}'. See https://<link to docs> for alternatives.`);\n        }\n    }\n}\n"],"names":[],"mappings":";;;AAAA;AAAA;AACA;AAAA;;;AAQO,MAAM,qBAAqB,yKAAA,CAAA,qBAAkB;IAChD,YAAY,cAAc,CAAE;QACxB,KAAK;QACL,OAAO,cAAc,CAAC,IAAI,EAAE,kBAAkB;YAC1C,YAAY;YACZ,cAAc;YACd,UAAU;YACV,OAAO;QACX;IACJ;IACA;;;;;KAKC,GACD,MAAM,OAAO;QACT,IAAI;QACJ,IAAI;QACJ,IAAI,OAAO,IAAI,CAAC,cAAc,KAAK,UAAU;YACzC,MAAM,EAAE,QAAQ,EAAE,GAAG,MAAM,aAAa,OAAO;YAC/C,SAAS,MAAM,SAAS,IAAI,CAAC,cAAc;YAC3C,WAAW;gBAAE,QAAQ,IAAI,CAAC,cAAc;YAAC;QAC7C,OACK;YACD,SAAS,MAAM,IAAI,CAAC,cAAc,CAC7B,WAAW,GACX,IAAI,CAAC,CAAC,KAAO,OAAO,IAAI,CAAC;YAC9B,WAAW;gBAAE,QAAQ;gBAAQ,UAAU,IAAI,CAAC,cAAc,CAAC,IAAI;YAAC;QACpE;QACA,OAAO,IAAI,CAAC,KAAK,CAAC,QAAQ;IAC9B;IACA;;;;;;;KAOC,GACD,aAAa,UAAU;QACnB,IAAI;YACA,MAAM,EAAE,QAAQ,EAAE,GAAG;YACrB,OAAO;gBAAE;YAAS;QACtB,EACA,OAAO,GAAG;YACN,QAAQ,KAAK,CAAC;YACd,MAAM,IAAI,MAAM,CAAC,qHAAqH,EAAE,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,IAAI,+CAA+C,CAAC;QACrM;IACJ;AACJ","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 92, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/document_loaders/fs/buffer.js"],"sourcesContent":["export * from '../../dist/document_loaders/fs/buffer.js'"],"names":[],"mappings":";AAAA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 110, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/chains/base.js"],"sourcesContent":["import { RUN_KEY } from \"@langchain/core/outputs\";\nimport { CallbackManager, parseCallbackConfigArg, } from \"@langchain/core/callbacks/manager\";\nimport { ensureConfig } from \"@langchain/core/runnables\";\nimport { BaseLangChain, } from \"@langchain/core/language_models/base\";\n/**\n * Base interface that all chains must implement.\n */\nexport class BaseChain extends BaseLangChain {\n    get lc_namespace() {\n        return [\"langchain\", \"chains\", this._chainType()];\n    }\n    constructor(fields, \n    /** @deprecated */\n    verbose, \n    /** @deprecated */\n    callbacks) {\n        if (arguments.length === 1 &&\n            typeof fields === \"object\" &&\n            !(\"saveContext\" in fields)) {\n            // fields is not a BaseMemory\n            const { memory, callbackManager, ...rest } = fields;\n            super({ ...rest, callbacks: callbackManager ?? rest.callbacks });\n            this.memory = memory;\n        }\n        else {\n            // fields is a BaseMemory\n            super({ verbose, callbacks });\n            this.memory = fields;\n        }\n    }\n    /** @ignore */\n    _selectMemoryInputs(values) {\n        const valuesForMemory = { ...values };\n        if (\"signal\" in valuesForMemory) {\n            delete valuesForMemory.signal;\n        }\n        if (\"timeout\" in valuesForMemory) {\n            delete valuesForMemory.timeout;\n        }\n        return valuesForMemory;\n    }\n    /**\n     * Invoke the chain with the provided input and returns the output.\n     * @param input Input values for the chain run.\n     * @param config Optional configuration for the Runnable.\n     * @returns Promise that resolves with the output of the chain run.\n     */\n    async invoke(input, options) {\n        const config = ensureConfig(options);\n        const fullValues = await this._formatValues(input);\n        const callbackManager_ = await CallbackManager.configure(config?.callbacks, this.callbacks, config?.tags, this.tags, config?.metadata, this.metadata, { verbose: this.verbose });\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), fullValues, undefined, undefined, undefined, undefined, config?.runName);\n        let outputValues;\n        try {\n            outputValues = await (fullValues.signal\n                ? Promise.race([\n                    this._call(fullValues, runManager, config),\n                    new Promise((_, reject) => {\n                        fullValues.signal?.addEventListener(\"abort\", () => {\n                            reject(new Error(\"AbortError\"));\n                        });\n                    }),\n                ])\n                : this._call(fullValues, runManager, config));\n        }\n        catch (e) {\n            await runManager?.handleChainError(e);\n            throw e;\n        }\n        if (!(this.memory == null)) {\n            await this.memory.saveContext(this._selectMemoryInputs(input), outputValues);\n        }\n        await runManager?.handleChainEnd(outputValues);\n        // add the runManager's currentRunId to the outputValues\n        Object.defineProperty(outputValues, RUN_KEY, {\n            value: runManager ? { runId: runManager?.runId } : undefined,\n            configurable: true,\n        });\n        return outputValues;\n    }\n    _validateOutputs(outputs) {\n        const missingKeys = this.outputKeys.filter((k) => !(k in outputs));\n        if (missingKeys.length) {\n            throw new Error(`Missing output keys: ${missingKeys.join(\", \")} from chain ${this._chainType()}`);\n        }\n    }\n    async prepOutputs(inputs, outputs, returnOnlyOutputs = false) {\n        this._validateOutputs(outputs);\n        if (this.memory) {\n            await this.memory.saveContext(inputs, outputs);\n        }\n        if (returnOnlyOutputs) {\n            return outputs;\n        }\n        return { ...inputs, ...outputs };\n    }\n    /**\n     * Return a json-like object representing this chain.\n     */\n    serialize() {\n        throw new Error(\"Method not implemented.\");\n    }\n    /** @deprecated Use .invoke() instead. Will be removed in 0.2.0. */\n    async run(\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    input, config) {\n        const inputKeys = this.inputKeys.filter((k) => !this.memory?.memoryKeys.includes(k) ?? true);\n        const isKeylessInput = inputKeys.length <= 1;\n        if (!isKeylessInput) {\n            throw new Error(`Chain ${this._chainType()} expects multiple inputs, cannot use 'run' `);\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const values = inputKeys.length ? { [inputKeys[0]]: input } : {};\n        const returnValues = await this.call(values, config);\n        const keys = Object.keys(returnValues);\n        if (keys.length === 1) {\n            return returnValues[keys[0]];\n        }\n        throw new Error(\"return values have multiple keys, `run` only supported when one key currently\");\n    }\n    async _formatValues(values) {\n        const fullValues = { ...values };\n        if (fullValues.timeout && !fullValues.signal) {\n            fullValues.signal = AbortSignal.timeout(fullValues.timeout);\n            delete fullValues.timeout;\n        }\n        if (!(this.memory == null)) {\n            const newValues = await this.memory.loadMemoryVariables(this._selectMemoryInputs(values));\n            for (const [key, value] of Object.entries(newValues)) {\n                fullValues[key] = value;\n            }\n        }\n        return fullValues;\n    }\n    /**\n     * @deprecated Use .invoke() instead. Will be removed in 0.2.0.\n     *\n     * Run the core logic of this chain and add to output if desired.\n     *\n     * Wraps _call and handles memory.\n     */\n    async call(values, config, \n    /** @deprecated */\n    tags) {\n        const parsedConfig = { tags, ...parseCallbackConfigArg(config) };\n        return this.invoke(values, parsedConfig);\n    }\n    /**\n     * @deprecated Use .batch() instead. Will be removed in 0.2.0.\n     *\n     * Call the chain on all inputs in the list\n     */\n    async apply(inputs, config) {\n        return Promise.all(inputs.map(async (i, idx) => this.call(i, config?.[idx])));\n    }\n    /**\n     * Load a chain from a json-like object describing it.\n     */\n    static async deserialize(data, values = {}) {\n        switch (data._type) {\n            case \"llm_chain\": {\n                const { LLMChain } = await import(\"./llm_chain.js\");\n                return LLMChain.deserialize(data);\n            }\n            case \"sequential_chain\": {\n                const { SequentialChain } = await import(\"./sequential_chain.js\");\n                return SequentialChain.deserialize(data);\n            }\n            case \"simple_sequential_chain\": {\n                const { SimpleSequentialChain } = await import(\"./sequential_chain.js\");\n                return SimpleSequentialChain.deserialize(data);\n            }\n            case \"stuff_documents_chain\": {\n                const { StuffDocumentsChain } = await import(\"./combine_docs_chain.js\");\n                return StuffDocumentsChain.deserialize(data);\n            }\n            case \"map_reduce_documents_chain\": {\n                const { MapReduceDocumentsChain } = await import(\"./combine_docs_chain.js\");\n                return MapReduceDocumentsChain.deserialize(data);\n            }\n            case \"refine_documents_chain\": {\n                const { RefineDocumentsChain } = await import(\"./combine_docs_chain.js\");\n                return RefineDocumentsChain.deserialize(data);\n            }\n            case \"vector_db_qa\": {\n                const { VectorDBQAChain } = await import(\"./vector_db_qa.js\");\n                return VectorDBQAChain.deserialize(data, values);\n            }\n            case \"api_chain\": {\n                const { APIChain } = await import(\"./api/api_chain.js\");\n                return APIChain.deserialize(data);\n            }\n            default:\n                throw new Error(`Invalid prompt type in config: ${data._type}`);\n        }\n    }\n}\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 335, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/output_parsers/noop.js"],"sourcesContent":["import { BaseOutputParser } from \"@langchain/core/output_parsers\";\n/**\n * The NoOpOutputParser class is a type of output parser that does not\n * perform any operations on the output. It extends the BaseOutputParser\n * class and is part of the LangChain's output parsers module. This class\n * is useful in scenarios where the raw output of the Large Language\n * Models (LLMs) is required.\n */\nexport class NoOpOutputParser extends BaseOutputParser {\n    constructor() {\n        super(...arguments);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\"langchain\", \"output_parsers\", \"default\"]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n    }\n    static lc_name() {\n        return \"NoOpOutputParser\";\n    }\n    /**\n     * This method takes a string as input and returns the same string as\n     * output. It does not perform any operations on the input string.\n     * @param text The input string to be parsed.\n     * @returns The same input string without any operations performed on it.\n     */\n    parse(text) {\n        return Promise.resolve(text);\n    }\n    /**\n     * This method returns an empty string. It does not provide any formatting\n     * instructions.\n     * @returns An empty string, indicating no formatting instructions.\n     */\n    getFormatInstructions() {\n        return \"\";\n    }\n}\n"],"names":[],"mappings":";;;AAAA;AAAA;;AAQO,MAAM,yBAAyB,uKAAA,CAAA,mBAAgB;IAClD,aAAc;QACV,KAAK,IAAI;QACT,OAAO,cAAc,CAAC,IAAI,EAAE,gBAAgB;YACxC,YAAY;YACZ,cAAc;YACd,UAAU;YACV,OAAO;gBAAC;gBAAa;gBAAkB;aAAU;QACrD;QACA,OAAO,cAAc,CAAC,IAAI,EAAE,mBAAmB;YAC3C,YAAY;YACZ,cAAc;YACd,UAAU;YACV,OAAO;QACX;IACJ;IACA,OAAO,UAAU;QACb,OAAO;IACX;IACA;;;;;KAKC,GACD,MAAM,IAAI,EAAE;QACR,OAAO,QAAQ,OAAO,CAAC;IAC3B;IACA;;;;KAIC,GACD,wBAAwB;QACpB,OAAO;IACX;AACJ","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 386, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/chains/llm_chain.js"],"sourcesContent":["import { BaseLanguageModel, } from \"@langchain/core/language_models/base\";\nimport { BasePromptTemplate } from \"@langchain/core/prompts\";\nimport { Runnable } from \"@langchain/core/runnables\";\nimport { BaseChain } from \"./base.js\";\nimport { NoOpOutputParser } from \"../output_parsers/noop.js\";\nfunction isBaseLanguageModel(llmLike) {\n    return typeof llmLike._llmType === \"function\";\n}\nfunction _getLanguageModel(llmLike) {\n    if (isBaseLanguageModel(llmLike)) {\n        return llmLike;\n    }\n    else if (\"bound\" in llmLike && Runnable.isRunnable(llmLike.bound)) {\n        return _getLanguageModel(llmLike.bound);\n    }\n    else if (\"runnable\" in llmLike &&\n        \"fallbacks\" in llmLike &&\n        Runnable.isRunnable(llmLike.runnable)) {\n        return _getLanguageModel(llmLike.runnable);\n    }\n    else if (\"default\" in llmLike && Runnable.isRunnable(llmLike.default)) {\n        return _getLanguageModel(llmLike.default);\n    }\n    else {\n        throw new Error(\"Unable to extract BaseLanguageModel from llmLike object.\");\n    }\n}\n/**\n * @deprecated This class will be removed in 1.0.0. Use the LangChain Expression Language (LCEL) instead.\n * See the example below for how to use LCEL with the LLMChain class:\n *\n * Chain to run queries against LLMs.\n *\n * @example\n * ```ts\n * import { ChatPromptTemplate } from \"@langchain/core/prompts\";\n * import { ChatOpenAI } from \"@langchain/openai\";\n *\n * const prompt = ChatPromptTemplate.fromTemplate(\"Tell me a {adjective} joke\");\n * const llm = new ChatOpenAI();\n * const chain = prompt.pipe(llm);\n *\n * const response = await chain.invoke({ adjective: \"funny\" });\n * ```\n */\nexport class LLMChain extends BaseChain {\n    static lc_name() {\n        return \"LLMChain\";\n    }\n    get inputKeys() {\n        return this.prompt.inputVariables;\n    }\n    get outputKeys() {\n        return [this.outputKey];\n    }\n    constructor(fields) {\n        super(fields);\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"prompt\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"llm\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"llmKwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"outputKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"text\"\n        });\n        Object.defineProperty(this, \"outputParser\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.prompt = fields.prompt;\n        this.llm = fields.llm;\n        this.llmKwargs = fields.llmKwargs;\n        this.outputKey = fields.outputKey ?? this.outputKey;\n        this.outputParser =\n            fields.outputParser ?? new NoOpOutputParser();\n        if (this.prompt.outputParser) {\n            if (fields.outputParser) {\n                throw new Error(\"Cannot set both outputParser and prompt.outputParser\");\n            }\n            this.outputParser = this.prompt.outputParser;\n        }\n    }\n    getCallKeys() {\n        const callKeys = \"callKeys\" in this.llm ? this.llm.callKeys : [];\n        return callKeys;\n    }\n    /** @ignore */\n    _selectMemoryInputs(values) {\n        const valuesForMemory = super._selectMemoryInputs(values);\n        const callKeys = this.getCallKeys();\n        for (const key of callKeys) {\n            if (key in values) {\n                delete valuesForMemory[key];\n            }\n        }\n        return valuesForMemory;\n    }\n    /** @ignore */\n    async _getFinalOutput(generations, promptValue, runManager) {\n        let finalCompletion;\n        if (this.outputParser) {\n            finalCompletion = await this.outputParser.parseResultWithPrompt(generations, promptValue, runManager?.getChild());\n        }\n        else {\n            finalCompletion = generations[0].text;\n        }\n        return finalCompletion;\n    }\n    /**\n     * Run the core logic of this chain and add to output if desired.\n     *\n     * Wraps _call and handles memory.\n     */\n    call(values, config) {\n        return super.call(values, config);\n    }\n    /** @ignore */\n    async _call(values, runManager) {\n        const valuesForPrompt = { ...values };\n        const valuesForLLM = {\n            ...this.llmKwargs,\n        };\n        const callKeys = this.getCallKeys();\n        for (const key of callKeys) {\n            if (key in values) {\n                if (valuesForLLM) {\n                    valuesForLLM[key] =\n                        values[key];\n                    delete valuesForPrompt[key];\n                }\n            }\n        }\n        const promptValue = await this.prompt.formatPromptValue(valuesForPrompt);\n        if (\"generatePrompt\" in this.llm) {\n            const { generations } = await this.llm.generatePrompt([promptValue], valuesForLLM, runManager?.getChild());\n            return {\n                [this.outputKey]: await this._getFinalOutput(generations[0], promptValue, runManager),\n            };\n        }\n        const modelWithParser = this.outputParser\n            ? this.llm.pipe(this.outputParser)\n            : this.llm;\n        const response = await modelWithParser.invoke(promptValue, runManager?.getChild());\n        return {\n            [this.outputKey]: response,\n        };\n    }\n    /**\n     * Format prompt with values and pass to LLM\n     *\n     * @param values - keys to pass to prompt template\n     * @param callbackManager - CallbackManager to use\n     * @returns Completion from LLM.\n     *\n     * @example\n     * ```ts\n     * llm.predict({ adjective: \"funny\" })\n     * ```\n     */\n    async predict(values, callbackManager) {\n        const output = await this.call(values, callbackManager);\n        return output[this.outputKey];\n    }\n    _chainType() {\n        return \"llm\";\n    }\n    static async deserialize(data) {\n        const { llm, prompt } = data;\n        if (!llm) {\n            throw new Error(\"LLMChain must have llm\");\n        }\n        if (!prompt) {\n            throw new Error(\"LLMChain must have prompt\");\n        }\n        return new LLMChain({\n            llm: await BaseLanguageModel.deserialize(llm),\n            prompt: await BasePromptTemplate.deserialize(prompt),\n        });\n    }\n    /** @deprecated */\n    serialize() {\n        const serialize = \"serialize\" in this.llm ? this.llm.serialize() : undefined;\n        return {\n            _type: `${this._chainType()}_chain`,\n            llm: serialize,\n            prompt: this.prompt.serialize(),\n        };\n    }\n    _getNumTokens(text) {\n        return _getLanguageModel(this.llm).getNumTokens(text);\n    }\n}\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 590, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/chains/api/prompts.js"],"sourcesContent":["/* eslint-disable spaced-comment */\nimport { PromptTemplate } from \"@langchain/core/prompts\";\nexport const API_URL_RAW_PROMPT_TEMPLATE = `You are given the below API Documentation:\n{api_docs}\nUsing this documentation, generate the full API url to call for answering the user question.\nYou should build the API url in order to get a response that is as short as possible, while still getting the necessary information to answer the question. Pay attention to deliberately exclude any unnecessary pieces of data in the API call.\n\nQuestion:{question}\nAPI url:`;\nexport const API_URL_PROMPT_TEMPLATE = /* #__PURE__ */ new PromptTemplate({\n    inputVariables: [\"api_docs\", \"question\"],\n    template: API_URL_RAW_PROMPT_TEMPLATE,\n});\nexport const API_RESPONSE_RAW_PROMPT_TEMPLATE = `${API_URL_RAW_PROMPT_TEMPLATE} {api_url}\n\nHere is the response from the API:\n\n{api_response}\n\nSummarize this response to answer the original question.\n\nSummary:`;\nexport const API_RESPONSE_PROMPT_TEMPLATE = /* #__PURE__ */ new PromptTemplate({\n    inputVariables: [\"api_docs\", \"question\", \"api_url\", \"api_response\"],\n    template: API_RESPONSE_RAW_PROMPT_TEMPLATE,\n});\n"],"names":[],"mappings":"AAAA,iCAAiC;;;;;;AACjC;AAAA;;AACO,MAAM,8BAA8B,CAAC;;;;;;QAMpC,CAAC;AACF,MAAM,0BAA0B,aAAa,GAAG,IAAI,kKAAA,CAAA,iBAAc,CAAC;IACtE,gBAAgB;QAAC;QAAY;KAAW;IACxC,UAAU;AACd;AACO,MAAM,mCAAmC,GAAG,4BAA4B;;;;;;;;QAQvE,CAAC;AACF,MAAM,+BAA+B,aAAa,GAAG,IAAI,kKAAA,CAAA,iBAAc,CAAC;IAC3E,gBAAgB;QAAC;QAAY;QAAY;QAAW;KAAe;IACnE,UAAU;AACd","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 637, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/chains/api/api_chain.js"],"sourcesContent":["import { BaseChain } from \"../base.js\";\nimport { LLMChain } from \"../llm_chain.js\";\nimport { API_URL_PROMPT_TEMPLATE, API_RESPONSE_PROMPT_TEMPLATE, } from \"./prompts.js\";\n/**\n * Class that extends BaseChain and represents a chain specifically\n * designed for making API requests and processing API responses.\n */\nexport class APIChain extends BaseChain {\n    get inputKeys() {\n        return [this.inputKey];\n    }\n    get outputKeys() {\n        return [this.outputKey];\n    }\n    constructor(fields) {\n        super(fields);\n        Object.defineProperty(this, \"apiAnswerChain\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"apiRequestChain\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"apiDocs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"headers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"inputKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"question\"\n        });\n        Object.defineProperty(this, \"outputKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"output\"\n        });\n        this.apiRequestChain = fields.apiRequestChain;\n        this.apiAnswerChain = fields.apiAnswerChain;\n        this.apiDocs = fields.apiDocs;\n        this.inputKey = fields.inputKey ?? this.inputKey;\n        this.outputKey = fields.outputKey ?? this.outputKey;\n        this.headers = fields.headers ?? this.headers;\n    }\n    /** @ignore */\n    async _call(values, runManager) {\n        const question = values[this.inputKey];\n        const api_url = await this.apiRequestChain.predict({ question, api_docs: this.apiDocs }, runManager?.getChild(\"request\"));\n        const res = await fetch(api_url, { headers: this.headers });\n        const api_response = await res.text();\n        const answer = await this.apiAnswerChain.predict({ question, api_docs: this.apiDocs, api_url, api_response }, runManager?.getChild(\"response\"));\n        return { [this.outputKey]: answer };\n    }\n    _chainType() {\n        return \"api_chain\";\n    }\n    static async deserialize(data) {\n        const { api_request_chain, api_answer_chain, api_docs } = data;\n        if (!api_request_chain) {\n            throw new Error(\"LLMChain must have api_request_chain\");\n        }\n        if (!api_answer_chain) {\n            throw new Error(\"LLMChain must have api_answer_chain\");\n        }\n        if (!api_docs) {\n            throw new Error(\"LLMChain must have api_docs\");\n        }\n        return new APIChain({\n            apiAnswerChain: await LLMChain.deserialize(api_answer_chain),\n            apiRequestChain: await LLMChain.deserialize(api_request_chain),\n            apiDocs: api_docs,\n        });\n    }\n    serialize() {\n        return {\n            _type: this._chainType(),\n            api_answer_chain: this.apiAnswerChain.serialize(),\n            api_request_chain: this.apiRequestChain.serialize(),\n            api_docs: this.apiDocs,\n        };\n    }\n    /**\n     * Static method to create a new APIChain from a BaseLanguageModel and API\n     * documentation.\n     * @param llm BaseLanguageModel instance.\n     * @param apiDocs API documentation.\n     * @param options Optional configuration options for the APIChain.\n     * @returns New APIChain instance.\n     */\n    static fromLLMAndAPIDocs(llm, apiDocs, options = {}) {\n        const { apiUrlPrompt = API_URL_PROMPT_TEMPLATE, apiResponsePrompt = API_RESPONSE_PROMPT_TEMPLATE, } = options;\n        const apiRequestChain = new LLMChain({ prompt: apiUrlPrompt, llm });\n        const apiAnswerChain = new LLMChain({ prompt: apiResponsePrompt, llm });\n        return new this({\n            apiAnswerChain,\n            apiRequestChain,\n            apiDocs,\n            ...options,\n        });\n    }\n}\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 781, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/stores/message/in_memory.js"],"sourcesContent":["export { InMemoryChatMessageHistory as ChatMessageHistory } from \"@langchain/core/chat_history\";\n"],"names":[],"mappings":";AAAA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 799, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/memory/chat_memory.js"],"sourcesContent":["import { BaseMemory, getInputValue, getOutputValue, } from \"@langchain/core/memory\";\nimport { ChatMessageHistory } from \"../stores/message/in_memory.js\";\n/**\n * Abstract class that provides a base for implementing different types of\n * memory systems. It is designed to maintain the state of an application,\n * specifically the history of a conversation. This class is typically\n * extended by other classes to create specific types of memory systems.\n */\nexport class BaseChatMemory extends BaseMemory {\n    constructor(fields) {\n        super();\n        Object.defineProperty(this, \"chatHistory\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"returnMessages\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"inputKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"outputKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.chatHistory = fields?.chatHistory ?? new ChatMessageHistory();\n        this.returnMessages = fields?.returnMessages ?? this.returnMessages;\n        this.inputKey = fields?.inputKey ?? this.inputKey;\n        this.outputKey = fields?.outputKey ?? this.outputKey;\n    }\n    /**\n     * Method to add user and AI messages to the chat history in sequence.\n     * @param inputValues The input values from the user.\n     * @param outputValues The output values from the AI.\n     * @returns Promise that resolves when the context has been saved.\n     */\n    async saveContext(inputValues, outputValues) {\n        // this is purposefully done in sequence so they're saved in order\n        await this.chatHistory.addUserMessage(getInputValue(inputValues, this.inputKey));\n        await this.chatHistory.addAIChatMessage(getOutputValue(outputValues, this.outputKey));\n    }\n    /**\n     * Method to clear the chat history.\n     * @returns Promise that resolves when the chat history has been cleared.\n     */\n    async clear() {\n        await this.chatHistory.clear();\n    }\n}\n"],"names":[],"mappings":";;;AAAA;AAAA;AACA;AAAA;;;AAOO,MAAM,uBAAuB,uJAAA,CAAA,aAAU;IAC1C,YAAY,MAAM,CAAE;QAChB,KAAK;QACL,OAAO,cAAc,CAAC,IAAI,EAAE,eAAe;YACvC,YAAY;YACZ,cAAc;YACd,UAAU;YACV,OAAO,KAAK;QAChB;QACA,OAAO,cAAc,CAAC,IAAI,EAAE,kBAAkB;YAC1C,YAAY;YACZ,cAAc;YACd,UAAU;YACV,OAAO;QACX;QACA,OAAO,cAAc,CAAC,IAAI,EAAE,YAAY;YACpC,YAAY;YACZ,cAAc;YACd,UAAU;YACV,OAAO,KAAK;QAChB;QACA,OAAO,cAAc,CAAC,IAAI,EAAE,aAAa;YACrC,YAAY;YACZ,cAAc;YACd,UAAU;YACV,OAAO,KAAK;QAChB;QACA,IAAI,CAAC,WAAW,GAAG,QAAQ,eAAe,IAAI,iOAAA,CAAA,qBAAkB;QAChE,IAAI,CAAC,cAAc,GAAG,QAAQ,kBAAkB,IAAI,CAAC,cAAc;QACnE,IAAI,CAAC,QAAQ,GAAG,QAAQ,YAAY,IAAI,CAAC,QAAQ;QACjD,IAAI,CAAC,SAAS,GAAG,QAAQ,aAAa,IAAI,CAAC,SAAS;IACxD;IACA;;;;;KAKC,GACD,MAAM,YAAY,WAAW,EAAE,YAAY,EAAE;QACzC,kEAAkE;QAClE,MAAM,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,CAAA,GAAA,uJAAA,CAAA,gBAAa,AAAD,EAAE,aAAa,IAAI,CAAC,QAAQ;QAC9E,MAAM,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,CAAA,GAAA,uJAAA,CAAA,iBAAc,AAAD,EAAE,cAAc,IAAI,CAAC,SAAS;IACvF;IACA;;;KAGC,GACD,MAAM,QAAQ;QACV,MAAM,IAAI,CAAC,WAAW,CAAC,KAAK;IAChC;AACJ","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 863, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/memory/buffer_memory.js"],"sourcesContent":["import { getBufferString } from \"@langchain/core/messages\";\nimport { BaseChatMemory } from \"./chat_memory.js\";\n/**\n * The `BufferMemory` class is a type of memory component used for storing\n * and managing previous chat messages. It is a wrapper around\n * `ChatMessageHistory` that extracts the messages into an input variable.\n * This class is particularly useful in applications like chatbots where\n * it is essential to remember previous interactions. Note: The memory\n * instance represents the history of a single conversation. Therefore, it\n * is not recommended to share the same history or memory instance between\n * two different chains. If you deploy your LangChain app on a serverless\n * environment, do not store memory instances in a variable, as your\n * hosting provider may reset it by the next time the function is called.\n * @example\n * ```typescript\n * // Initialize the memory to store chat history and set up the language model with a specific temperature.\n * const memory = new BufferMemory({ memoryKey: \"chat_history\" });\n * const model = new ChatOpenAI({ temperature: 0.9 });\n *\n * // Create a prompt template for a friendly conversation between a human and an AI.\n * const prompt =\n *   PromptTemplate.fromTemplate(`The following is a friendly conversation between a human and an AI. The AI is talkative and provides lots of specific details from its context. If the AI does not know the answer to a question, it truthfully says it does not know.\n *\n * Current conversation:\n * {chat_history}\n * Human: {input}\n * AI:`);\n *\n * // Set up the chain with the language model, prompt, and memory.\n * const chain = new LLMChain({ llm: model, prompt, memory });\n *\n * // Example usage of the chain to continue the conversation.\n * // The `call` method sends the input to the model and returns the AI's response.\n * const res = await chain.call({ input: \"Hi! I'm Jim.\" });\n * console.log({ res });\n *\n * ```\n */\nexport class BufferMemory extends BaseChatMemory {\n    constructor(fields) {\n        super({\n            chatHistory: fields?.chatHistory,\n            returnMessages: fields?.returnMessages ?? false,\n            inputKey: fields?.inputKey,\n            outputKey: fields?.outputKey,\n        });\n        Object.defineProperty(this, \"humanPrefix\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"Human\"\n        });\n        Object.defineProperty(this, \"aiPrefix\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"AI\"\n        });\n        Object.defineProperty(this, \"memoryKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"history\"\n        });\n        this.humanPrefix = fields?.humanPrefix ?? this.humanPrefix;\n        this.aiPrefix = fields?.aiPrefix ?? this.aiPrefix;\n        this.memoryKey = fields?.memoryKey ?? this.memoryKey;\n    }\n    get memoryKeys() {\n        return [this.memoryKey];\n    }\n    /**\n     * Loads the memory variables. It takes an `InputValues` object as a\n     * parameter and returns a `Promise` that resolves with a\n     * `MemoryVariables` object.\n     * @param _values `InputValues` object.\n     * @returns A `Promise` that resolves with a `MemoryVariables` object.\n     */\n    async loadMemoryVariables(_values) {\n        const messages = await this.chatHistory.getMessages();\n        if (this.returnMessages) {\n            const result = {\n                [this.memoryKey]: messages,\n            };\n            return result;\n        }\n        const result = {\n            [this.memoryKey]: getBufferString(messages, this.humanPrefix, this.aiPrefix),\n        };\n        return result;\n    }\n}\n"],"names":[],"mappings":";;;AAAA;AAAA;AACA;;;AAqCO,MAAM,qBAAqB,4JAAA,CAAA,iBAAc;IAC5C,YAAY,MAAM,CAAE;QAChB,KAAK,CAAC;YACF,aAAa,QAAQ;YACrB,gBAAgB,QAAQ,kBAAkB;YAC1C,UAAU,QAAQ;YAClB,WAAW,QAAQ;QACvB;QACA,OAAO,cAAc,CAAC,IAAI,EAAE,eAAe;YACvC,YAAY;YACZ,cAAc;YACd,UAAU;YACV,OAAO;QACX;QACA,OAAO,cAAc,CAAC,IAAI,EAAE,YAAY;YACpC,YAAY;YACZ,cAAc;YACd,UAAU;YACV,OAAO;QACX;QACA,OAAO,cAAc,CAAC,IAAI,EAAE,aAAa;YACrC,YAAY;YACZ,cAAc;YACd,UAAU;YACV,OAAO;QACX;QACA,IAAI,CAAC,WAAW,GAAG,QAAQ,eAAe,IAAI,CAAC,WAAW;QAC1D,IAAI,CAAC,QAAQ,GAAG,QAAQ,YAAY,IAAI,CAAC,QAAQ;QACjD,IAAI,CAAC,SAAS,GAAG,QAAQ,aAAa,IAAI,CAAC,SAAS;IACxD;IACA,IAAI,aAAa;QACb,OAAO;YAAC,IAAI,CAAC,SAAS;SAAC;IAC3B;IACA;;;;;;KAMC,GACD,MAAM,oBAAoB,OAAO,EAAE;QAC/B,MAAM,WAAW,MAAM,IAAI,CAAC,WAAW,CAAC,WAAW;QACnD,IAAI,IAAI,CAAC,cAAc,EAAE;YACrB,MAAM,SAAS;gBACX,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE;YACtB;YACA,OAAO;QACX;QACA,MAAM,SAAS;YACX,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAA,GAAA,kKAAA,CAAA,kBAAe,AAAD,EAAE,UAAU,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,QAAQ;QAC/E;QACA,OAAO;IACX;AACJ","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 932, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/chains/conversation.js"],"sourcesContent":["import { PromptTemplate } from \"@langchain/core/prompts\";\nimport { LLMChain } from \"./llm_chain.js\";\nimport { BufferMemory } from \"../memory/buffer_memory.js\";\nexport const DEFAULT_TEMPLATE = `The following is a friendly conversation between a human and an AI. The AI is talkative and provides lots of specific details from its context. If the AI does not know the answer to a question, it truthfully says it does not know.\n\nCurrent conversation:\n{history}\nHuman: {input}\nAI:`;\n/**\n * A class for conducting conversations between a human and an AI. It\n * extends the {@link LLMChain} class.\n * @example\n * ```typescript\n * const model = new ChatOpenAI({});\n * const chain = new ConversationChain({ llm: model });\n *\n * // Sending a greeting to the conversation chain\n * const res1 = await chain.call({ input: \"Hi! I'm Jim.\" });\n * console.log({ res1 });\n *\n * // Following up with a question in the conversation\n * const res2 = await chain.call({ input: \"What's my name?\" });\n * console.log({ res2 });\n * ```\n */\nexport class ConversationChain extends LLMChain {\n    static lc_name() {\n        return \"ConversationChain\";\n    }\n    constructor({ prompt, outputKey, memory, ...rest }) {\n        super({\n            prompt: prompt ??\n                new PromptTemplate({\n                    template: DEFAULT_TEMPLATE,\n                    inputVariables: [\"history\", \"input\"],\n                }),\n            outputKey: outputKey ?? \"response\",\n            memory: memory ?? new BufferMemory(),\n            ...rest,\n        });\n    }\n}\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;AACA;;;;AACO,MAAM,mBAAmB,CAAC;;;;;GAK9B,CAAC;AAkBG,MAAM,0BAA0B,0JAAA,CAAA,WAAQ;IAC3C,OAAO,UAAU;QACb,OAAO;IACX;IACA,YAAY,EAAE,MAAM,EAAE,SAAS,EAAE,MAAM,EAAE,GAAG,MAAM,CAAE;QAChD,KAAK,CAAC;YACF,QAAQ,UACJ,IAAI,kKAAA,CAAA,iBAAc,CAAC;gBACf,UAAU;gBACV,gBAAgB;oBAAC;oBAAW;iBAAQ;YACxC;YACJ,WAAW,aAAa;YACxB,QAAQ,UAAU,IAAI,8JAAA,CAAA,eAAY;YAClC,GAAG,IAAI;QACX;IACJ;AACJ","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 974, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/util/set.js"],"sourcesContent":["/**\n * Source: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set#implementing_basic_set_operations\n */\n/**\n * returns intersection of two sets\n */\nexport function intersection(setA, setB) {\n    const _intersection = new Set();\n    for (const elem of setB) {\n        if (setA.has(elem)) {\n            _intersection.add(elem);\n        }\n    }\n    return _intersection;\n}\n/**\n * returns union of two sets\n */\nexport function union(setA, setB) {\n    const _union = new Set(setA);\n    for (const elem of setB) {\n        _union.add(elem);\n    }\n    return _union;\n}\n/**\n * returns difference of two sets\n */\nexport function difference(setA, setB) {\n    const _difference = new Set(setA);\n    for (const elem of setB) {\n        _difference.delete(elem);\n    }\n    return _difference;\n}\n"],"names":[],"mappings":"AAAA;;CAEC,GACD;;CAEC;;;;;AACM,SAAS,aAAa,IAAI,EAAE,IAAI;IACnC,MAAM,gBAAgB,IAAI;IAC1B,KAAK,MAAM,QAAQ,KAAM;QACrB,IAAI,KAAK,GAAG,CAAC,OAAO;YAChB,cAAc,GAAG,CAAC;QACtB;IACJ;IACA,OAAO;AACX;AAIO,SAAS,MAAM,IAAI,EAAE,IAAI;IAC5B,MAAM,SAAS,IAAI,IAAI;IACvB,KAAK,MAAM,QAAQ,KAAM;QACrB,OAAO,GAAG,CAAC;IACf;IACA,OAAO;AACX;AAIO,SAAS,WAAW,IAAI,EAAE,IAAI;IACjC,MAAM,cAAc,IAAI,IAAI;IAC5B,KAAK,MAAM,QAAQ,KAAM;QACrB,YAAY,MAAM,CAAC;IACvB;IACA,OAAO;AACX","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1012, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/chains/sequential_chain.js"],"sourcesContent":["import { BaseChain } from \"./base.js\";\nimport { intersection, union, difference } from \"../util/set.js\";\nfunction formatSet(input) {\n    return Array.from(input)\n        .map((i) => `\"${i}\"`)\n        .join(\", \");\n}\n/**\n * Chain where the outputs of one chain feed directly into next.\n * @example\n * ```typescript\n * const promptTemplate = new PromptTemplate({\n *   template: `You are a playwright. Given the title of play and the era it is set in, it is your job to write a synopsis for that title.\n * Title: {title}\n * Era: {era}\n * Playwright: This is a synopsis for the above play:`,\n *   inputVariables: [\"title\", \"era\"],\n * });\n\n * const reviewPromptTemplate = new PromptTemplate({\n *   template: `You are a play critic from the New York Times. Given the synopsis of play, it is your job to write a review for that play.\n *\n *     Play Synopsis:\n *     {synopsis}\n *     Review from a New York Times play critic of the above play:`,\n *   inputVariables: [\"synopsis\"],\n * });\n\n * const overallChain = new SequentialChain({\n *   chains: [\n *     new LLMChain({\n *       llm: new ChatOpenAI({ temperature: 0 }),\n *       prompt: promptTemplate,\n *       outputKey: \"synopsis\",\n *     }),\n *     new LLMChain({\n *       llm: new OpenAI({ temperature: 0 }),\n *       prompt: reviewPromptTemplate,\n *       outputKey: \"review\",\n *     }),\n *   ],\n *   inputVariables: [\"era\", \"title\"],\n *   outputVariables: [\"synopsis\", \"review\"],\n *   verbose: true,\n * });\n\n * const chainExecutionResult = await overallChain.call({\n *   title: \"Tragedy at sunset on the beach\",\n *   era: \"Victorian England\",\n * });\n * console.log(chainExecutionResult);\n * ```\n *\n * @deprecated\n * Switch to {@link https://js.langchain.com/docs/expression_language/ | expression language}.\n * Will be removed in 0.2.0\n */\nexport class SequentialChain extends BaseChain {\n    static lc_name() {\n        return \"SequentialChain\";\n    }\n    get inputKeys() {\n        return this.inputVariables;\n    }\n    get outputKeys() {\n        return this.outputVariables;\n    }\n    constructor(fields) {\n        super(fields);\n        Object.defineProperty(this, \"chains\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"inputVariables\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"outputVariables\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"returnAll\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.chains = fields.chains;\n        this.inputVariables = fields.inputVariables;\n        this.outputVariables = fields.outputVariables ?? [];\n        if (this.outputVariables.length > 0 && fields.returnAll) {\n            throw new Error(\"Either specify variables to return using `outputVariables` or use `returnAll` param. Cannot apply both conditions at the same time.\");\n        }\n        this.returnAll = fields.returnAll ?? false;\n        this._validateChains();\n    }\n    /** @ignore */\n    _validateChains() {\n        if (this.chains.length === 0) {\n            throw new Error(\"Sequential chain must have at least one chain.\");\n        }\n        const memoryKeys = this.memory?.memoryKeys ?? [];\n        const inputKeysSet = new Set(this.inputKeys);\n        const memoryKeysSet = new Set(memoryKeys);\n        const keysIntersection = intersection(inputKeysSet, memoryKeysSet);\n        if (keysIntersection.size > 0) {\n            throw new Error(`The following keys: ${formatSet(keysIntersection)} are overlapping between memory and input keys of the chain variables. This can lead to unexpected behaviour. Please use input and memory keys that don't overlap.`);\n        }\n        const availableKeys = union(inputKeysSet, memoryKeysSet);\n        for (const chain of this.chains) {\n            let missingKeys = difference(new Set(chain.inputKeys), availableKeys);\n            if (chain.memory) {\n                missingKeys = difference(missingKeys, new Set(chain.memory.memoryKeys));\n            }\n            if (missingKeys.size > 0) {\n                throw new Error(`Missing variables for chain \"${chain._chainType()}\": ${formatSet(missingKeys)}. Only got the following variables: ${formatSet(availableKeys)}.`);\n            }\n            const outputKeysSet = new Set(chain.outputKeys);\n            const overlappingOutputKeys = intersection(availableKeys, outputKeysSet);\n            if (overlappingOutputKeys.size > 0) {\n                throw new Error(`The following output variables for chain \"${chain._chainType()}\" are overlapping: ${formatSet(overlappingOutputKeys)}. This can lead to unexpected behaviour.`);\n            }\n            for (const outputKey of outputKeysSet) {\n                availableKeys.add(outputKey);\n            }\n        }\n        if (this.outputVariables.length === 0) {\n            if (this.returnAll) {\n                const outputKeys = difference(availableKeys, inputKeysSet);\n                this.outputVariables = Array.from(outputKeys);\n            }\n            else {\n                this.outputVariables = this.chains[this.chains.length - 1].outputKeys;\n            }\n        }\n        else {\n            const missingKeys = difference(new Set(this.outputVariables), new Set(availableKeys));\n            if (missingKeys.size > 0) {\n                throw new Error(`The following output variables were expected to be in the final chain output but were not found: ${formatSet(missingKeys)}.`);\n            }\n        }\n    }\n    /** @ignore */\n    async _call(values, runManager) {\n        let input = {};\n        const allChainValues = values;\n        let i = 0;\n        for (const chain of this.chains) {\n            i += 1;\n            input = await chain.call(allChainValues, runManager?.getChild(`step_${i}`));\n            for (const key of Object.keys(input)) {\n                allChainValues[key] = input[key];\n            }\n        }\n        const output = {};\n        for (const key of this.outputVariables) {\n            output[key] = allChainValues[key];\n        }\n        return output;\n    }\n    _chainType() {\n        return \"sequential_chain\";\n    }\n    static async deserialize(data) {\n        const chains = [];\n        const inputVariables = data.input_variables;\n        const outputVariables = data.output_variables;\n        const serializedChains = data.chains;\n        for (const serializedChain of serializedChains) {\n            const deserializedChain = await BaseChain.deserialize(serializedChain);\n            chains.push(deserializedChain);\n        }\n        return new SequentialChain({ chains, inputVariables, outputVariables });\n    }\n    serialize() {\n        const chains = [];\n        for (const chain of this.chains) {\n            chains.push(chain.serialize());\n        }\n        return {\n            _type: this._chainType(),\n            input_variables: this.inputVariables,\n            output_variables: this.outputVariables,\n            chains,\n        };\n    }\n}\n/**\n * @deprecated Switch to expression language: https://js.langchain.com/docs/expression_language/\n * Simple chain where a single string output of one chain is fed directly into the next.\n * @augments BaseChain\n * @augments SimpleSequentialChainInput\n *\n * @example\n * ```ts\n * import { SimpleSequentialChain, LLMChain } from \"langchain/chains\";\n * import { OpenAI } from \"langchain/llms/openai\";\n * import { PromptTemplate } from \"langchain/prompts\";\n *\n * // This is an LLMChain to write a synopsis given a title of a play.\n * const llm = new OpenAI({ temperature: 0 });\n * const template = `You are a playwright. Given the title of play, it is your job to write a synopsis for that title.\n *\n * Title: {title}\n * Playwright: This is a synopsis for the above play:`\n * const promptTemplate = new PromptTemplate({ template, inputVariables: [\"title\"] });\n * const synopsisChain = new LLMChain({ llm, prompt: promptTemplate });\n *\n *\n * // This is an LLMChain to write a review of a play given a synopsis.\n * const reviewLLM = new OpenAI({ temperature: 0 })\n * const reviewTemplate = `You are a play critic from the New York Times. Given the synopsis of play, it is your job to write a review for that play.\n *\n * Play Synopsis:\n * {synopsis}\n * Review from a New York Times play critic of the above play:`\n * const reviewPromptTemplate = new PromptTemplate({ template: reviewTemplate, inputVariables: [\"synopsis\"] });\n * const reviewChain = new LLMChain({ llm: reviewLLM, prompt: reviewPromptTemplate });\n *\n * const overallChain = new SimpleSequentialChain({chains: [synopsisChain, reviewChain], verbose:true})\n * const review = await overallChain.run(\"Tragedy at sunset on the beach\")\n * // the variable review contains resulting play review.\n * ```\n */\nexport class SimpleSequentialChain extends BaseChain {\n    static lc_name() {\n        return \"SimpleSequentialChain\";\n    }\n    get inputKeys() {\n        return [this.inputKey];\n    }\n    get outputKeys() {\n        return [this.outputKey];\n    }\n    constructor(fields) {\n        super(fields);\n        Object.defineProperty(this, \"chains\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"inputKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"input\"\n        });\n        Object.defineProperty(this, \"outputKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"output\"\n        });\n        Object.defineProperty(this, \"trimOutputs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.chains = fields.chains;\n        this.trimOutputs = fields.trimOutputs ?? false;\n        this._validateChains();\n    }\n    /** @ignore */\n    _validateChains() {\n        for (const chain of this.chains) {\n            if (chain.inputKeys.filter((k) => !chain.memory?.memoryKeys.includes(k) ?? true).length !== 1) {\n                throw new Error(`Chains used in SimpleSequentialChain should all have one input, got ${chain.inputKeys.length} for ${chain._chainType()}.`);\n            }\n            if (chain.outputKeys.length !== 1) {\n                throw new Error(`Chains used in SimpleSequentialChain should all have one output, got ${chain.outputKeys.length} for ${chain._chainType()}.`);\n            }\n        }\n    }\n    /** @ignore */\n    async _call(values, runManager) {\n        let input = values[this.inputKey];\n        let i = 0;\n        for (const chain of this.chains) {\n            i += 1;\n            input = (await chain.call({ [chain.inputKeys[0]]: input, signal: values.signal }, runManager?.getChild(`step_${i}`)))[chain.outputKeys[0]];\n            if (this.trimOutputs) {\n                input = input.trim();\n            }\n            await runManager?.handleText(input);\n        }\n        return { [this.outputKey]: input };\n    }\n    _chainType() {\n        return \"simple_sequential_chain\";\n    }\n    static async deserialize(data) {\n        const chains = [];\n        const serializedChains = data.chains;\n        for (const serializedChain of serializedChains) {\n            const deserializedChain = await BaseChain.deserialize(serializedChain);\n            chains.push(deserializedChain);\n        }\n        return new SimpleSequentialChain({ chains });\n    }\n    serialize() {\n        const chains = [];\n        for (const chain of this.chains) {\n            chains.push(chain.serialize());\n        }\n        return {\n            _type: this._chainType(),\n            chains,\n        };\n    }\n}\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1262, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/chains/combine_docs_chain.js"],"sourcesContent":["import { PromptTemplate } from \"@langchain/core/prompts\";\nimport { BaseChain } from \"./base.js\";\nimport { LLMChain } from \"./llm_chain.js\";\n/**\n * Chain that combines documents by stuffing into context.\n * @augments BaseChain\n * @augments StuffDocumentsChainInput\n */\nexport class StuffDocumentsChain extends BaseChain {\n    static lc_name() {\n        return \"StuffDocumentsChain\";\n    }\n    get inputKeys() {\n        return [this.inputKey, ...this.llmChain.inputKeys].filter((key) => key !== this.documentVariableName);\n    }\n    get outputKeys() {\n        return this.llmChain.outputKeys;\n    }\n    constructor(fields) {\n        super(fields);\n        Object.defineProperty(this, \"llmChain\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"inputKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"input_documents\"\n        });\n        Object.defineProperty(this, \"documentVariableName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"context\"\n        });\n        this.llmChain = fields.llmChain;\n        this.documentVariableName =\n            fields.documentVariableName ?? this.documentVariableName;\n        this.inputKey = fields.inputKey ?? this.inputKey;\n    }\n    /** @ignore */\n    _prepInputs(values) {\n        if (!(this.inputKey in values)) {\n            throw new Error(`Document key ${this.inputKey} not found.`);\n        }\n        const { [this.inputKey]: docs, ...rest } = values;\n        const texts = docs.map(({ pageContent }) => pageContent);\n        const text = texts.join(\"\\n\\n\");\n        return {\n            ...rest,\n            [this.documentVariableName]: text,\n        };\n    }\n    /** @ignore */\n    async _call(values, runManager) {\n        const result = await this.llmChain.call(this._prepInputs(values), runManager?.getChild(\"combine_documents\"));\n        return result;\n    }\n    _chainType() {\n        return \"stuff_documents_chain\";\n    }\n    static async deserialize(data) {\n        if (!data.llm_chain) {\n            throw new Error(\"Missing llm_chain\");\n        }\n        return new StuffDocumentsChain({\n            llmChain: await LLMChain.deserialize(data.llm_chain),\n        });\n    }\n    serialize() {\n        return {\n            _type: this._chainType(),\n            llm_chain: this.llmChain.serialize(),\n        };\n    }\n}\n/**\n * Combine documents by mapping a chain over them, then combining results.\n * @augments BaseChain\n * @augments StuffDocumentsChainInput\n */\nexport class MapReduceDocumentsChain extends BaseChain {\n    static lc_name() {\n        return \"MapReduceDocumentsChain\";\n    }\n    get inputKeys() {\n        return [this.inputKey, ...this.combineDocumentChain.inputKeys];\n    }\n    get outputKeys() {\n        return this.combineDocumentChain.outputKeys;\n    }\n    constructor(fields) {\n        super(fields);\n        Object.defineProperty(this, \"llmChain\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"inputKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"input_documents\"\n        });\n        Object.defineProperty(this, \"documentVariableName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"context\"\n        });\n        Object.defineProperty(this, \"returnIntermediateSteps\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"maxTokens\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 3000\n        });\n        Object.defineProperty(this, \"maxIterations\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 10\n        });\n        Object.defineProperty(this, \"ensureMapStep\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"combineDocumentChain\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.llmChain = fields.llmChain;\n        this.combineDocumentChain = fields.combineDocumentChain;\n        this.documentVariableName =\n            fields.documentVariableName ?? this.documentVariableName;\n        this.ensureMapStep = fields.ensureMapStep ?? this.ensureMapStep;\n        this.inputKey = fields.inputKey ?? this.inputKey;\n        this.maxTokens = fields.maxTokens ?? this.maxTokens;\n        this.maxIterations = fields.maxIterations ?? this.maxIterations;\n        this.returnIntermediateSteps = fields.returnIntermediateSteps ?? false;\n    }\n    /** @ignore */\n    async _call(values, runManager) {\n        if (!(this.inputKey in values)) {\n            throw new Error(`Document key ${this.inputKey} not found.`);\n        }\n        const { [this.inputKey]: docs, ...rest } = values;\n        let currentDocs = docs;\n        let intermediateSteps = [];\n        // For each iteration, we'll use the `llmChain` to get a new result\n        for (let i = 0; i < this.maxIterations; i += 1) {\n            const inputs = currentDocs.map((d) => ({\n                [this.documentVariableName]: d.pageContent,\n                ...rest,\n            }));\n            const canSkipMapStep = i !== 0 || !this.ensureMapStep;\n            if (canSkipMapStep) {\n                // Calculate the total tokens required in the input\n                const formatted = await this.combineDocumentChain.llmChain.prompt.format(this.combineDocumentChain._prepInputs({\n                    [this.combineDocumentChain.inputKey]: currentDocs,\n                    ...rest,\n                }));\n                const length = await this.combineDocumentChain.llmChain._getNumTokens(formatted);\n                const withinTokenLimit = length < this.maxTokens;\n                // If we can skip the map step, and we're within the token limit, we don't\n                // need to run the map step, so just break out of the loop.\n                if (withinTokenLimit) {\n                    break;\n                }\n            }\n            const results = await this.llmChain.apply(inputs, \n            // If we have a runManager, then we need to create a child for each input\n            // so that we can track the progress of each input.\n            runManager\n                ? Array.from({ length: inputs.length }, (_, i) => runManager.getChild(`map_${i + 1}`))\n                : undefined);\n            const { outputKey } = this.llmChain;\n            // If the flag is set, then concat that to the intermediate steps\n            if (this.returnIntermediateSteps) {\n                intermediateSteps = intermediateSteps.concat(results.map((r) => r[outputKey]));\n            }\n            currentDocs = results.map((r) => ({\n                pageContent: r[outputKey],\n                metadata: {},\n            }));\n        }\n        // Now, with the final result of all the inputs from the `llmChain`, we can\n        // run the `combineDocumentChain` over them.\n        const newInputs = {\n            [this.combineDocumentChain.inputKey]: currentDocs,\n            ...rest,\n        };\n        const result = await this.combineDocumentChain.call(newInputs, runManager?.getChild(\"combine_documents\"));\n        // Return the intermediate steps results if the flag is set\n        if (this.returnIntermediateSteps) {\n            return { ...result, intermediateSteps };\n        }\n        return result;\n    }\n    _chainType() {\n        return \"map_reduce_documents_chain\";\n    }\n    static async deserialize(data) {\n        if (!data.llm_chain) {\n            throw new Error(\"Missing llm_chain\");\n        }\n        if (!data.combine_document_chain) {\n            throw new Error(\"Missing combine_document_chain\");\n        }\n        return new MapReduceDocumentsChain({\n            llmChain: await LLMChain.deserialize(data.llm_chain),\n            combineDocumentChain: await StuffDocumentsChain.deserialize(data.combine_document_chain),\n        });\n    }\n    serialize() {\n        return {\n            _type: this._chainType(),\n            llm_chain: this.llmChain.serialize(),\n            combine_document_chain: this.combineDocumentChain.serialize(),\n        };\n    }\n}\n/**\n * Combine documents by doing a first pass and then refining on more documents.\n * @augments BaseChain\n * @augments RefineDocumentsChainInput\n */\nexport class RefineDocumentsChain extends BaseChain {\n    static lc_name() {\n        return \"RefineDocumentsChain\";\n    }\n    get defaultDocumentPrompt() {\n        return new PromptTemplate({\n            inputVariables: [\"page_content\"],\n            template: \"{page_content}\",\n        });\n    }\n    get inputKeys() {\n        return [\n            ...new Set([\n                this.inputKey,\n                ...this.llmChain.inputKeys,\n                ...this.refineLLMChain.inputKeys,\n            ]),\n        ].filter((key) => key !== this.documentVariableName && key !== this.initialResponseName);\n    }\n    get outputKeys() {\n        return [this.outputKey];\n    }\n    constructor(fields) {\n        super(fields);\n        Object.defineProperty(this, \"llmChain\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"inputKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"input_documents\"\n        });\n        Object.defineProperty(this, \"outputKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"output_text\"\n        });\n        Object.defineProperty(this, \"documentVariableName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"context\"\n        });\n        Object.defineProperty(this, \"initialResponseName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"existing_answer\"\n        });\n        Object.defineProperty(this, \"refineLLMChain\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"documentPrompt\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: this.defaultDocumentPrompt\n        });\n        this.llmChain = fields.llmChain;\n        this.refineLLMChain = fields.refineLLMChain;\n        this.documentVariableName =\n            fields.documentVariableName ?? this.documentVariableName;\n        this.inputKey = fields.inputKey ?? this.inputKey;\n        this.outputKey = fields.outputKey ?? this.outputKey;\n        this.documentPrompt = fields.documentPrompt ?? this.documentPrompt;\n        this.initialResponseName =\n            fields.initialResponseName ?? this.initialResponseName;\n    }\n    /** @ignore */\n    async _constructInitialInputs(doc, rest) {\n        const baseInfo = {\n            page_content: doc.pageContent,\n            ...doc.metadata,\n        };\n        const documentInfo = {};\n        this.documentPrompt.inputVariables.forEach((value) => {\n            documentInfo[value] = baseInfo[value];\n        });\n        const baseInputs = {\n            [this.documentVariableName]: await this.documentPrompt.format({\n                ...documentInfo,\n            }),\n        };\n        const inputs = { ...baseInputs, ...rest };\n        return inputs;\n    }\n    /** @ignore */\n    async _constructRefineInputs(doc, res) {\n        const baseInfo = {\n            page_content: doc.pageContent,\n            ...doc.metadata,\n        };\n        const documentInfo = {};\n        this.documentPrompt.inputVariables.forEach((value) => {\n            documentInfo[value] = baseInfo[value];\n        });\n        const baseInputs = {\n            [this.documentVariableName]: await this.documentPrompt.format({\n                ...documentInfo,\n            }),\n        };\n        const inputs = { [this.initialResponseName]: res, ...baseInputs };\n        return inputs;\n    }\n    /** @ignore */\n    async _call(values, runManager) {\n        if (!(this.inputKey in values)) {\n            throw new Error(`Document key ${this.inputKey} not found.`);\n        }\n        const { [this.inputKey]: docs, ...rest } = values;\n        const currentDocs = docs;\n        const initialInputs = await this._constructInitialInputs(currentDocs[0], rest);\n        let res = await this.llmChain.predict({ ...initialInputs }, runManager?.getChild(\"answer\"));\n        const refineSteps = [res];\n        for (let i = 1; i < currentDocs.length; i += 1) {\n            const refineInputs = await this._constructRefineInputs(currentDocs[i], res);\n            const inputs = { ...refineInputs, ...rest };\n            res = await this.refineLLMChain.predict({ ...inputs }, runManager?.getChild(\"refine\"));\n            refineSteps.push(res);\n        }\n        return { [this.outputKey]: res };\n    }\n    _chainType() {\n        return \"refine_documents_chain\";\n    }\n    static async deserialize(data) {\n        const SerializedLLMChain = data.llm_chain;\n        if (!SerializedLLMChain) {\n            throw new Error(\"Missing llm_chain\");\n        }\n        const SerializedRefineDocumentChain = data.refine_llm_chain;\n        if (!SerializedRefineDocumentChain) {\n            throw new Error(\"Missing refine_llm_chain\");\n        }\n        return new RefineDocumentsChain({\n            llmChain: await LLMChain.deserialize(SerializedLLMChain),\n            refineLLMChain: await LLMChain.deserialize(SerializedRefineDocumentChain),\n        });\n    }\n    serialize() {\n        return {\n            _type: this._chainType(),\n            llm_chain: this.llmChain.serialize(),\n            refine_llm_chain: this.refineLLMChain.serialize(),\n        };\n    }\n}\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1676, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/chains/question_answering/stuff_prompts.js"],"sourcesContent":["/* eslint-disable spaced-comment */\nimport { ChatPromptTemplate, SystemMessagePromptTemplate, HumanMessagePromptTemplate, PromptTemplate, } from \"@langchain/core/prompts\";\nimport { ConditionalPromptSelector, isChatModel, } from \"@langchain/core/example_selectors\";\nexport const DEFAULT_QA_PROMPT = /*#__PURE__*/ new PromptTemplate({\n    template: \"Use the following pieces of context to answer the question at the end. If you don't know the answer, just say that you don't know, don't try to make up an answer.\\n\\n{context}\\n\\nQuestion: {question}\\nHelpful Answer:\",\n    inputVariables: [\"context\", \"question\"],\n});\nconst system_template = `Use the following pieces of context to answer the users question. \nIf you don't know the answer, just say that you don't know, don't try to make up an answer.\n----------------\n{context}`;\nconst messages = [\n    /*#__PURE__*/ SystemMessagePromptTemplate.fromTemplate(system_template),\n    /*#__PURE__*/ HumanMessagePromptTemplate.fromTemplate(\"{question}\"),\n];\nconst CHAT_PROMPT = /*#__PURE__*/ ChatPromptTemplate.fromMessages(messages);\nexport const QA_PROMPT_SELECTOR = /*#__PURE__*/ new ConditionalPromptSelector(DEFAULT_QA_PROMPT, [[isChatModel, CHAT_PROMPT]]);\n"],"names":[],"mappings":"AAAA,iCAAiC;;;;AACjC;AAAA;AAAA;AACA;AAAA;;;AACO,MAAM,oBAAoB,WAAW,GAAG,IAAI,kKAAA,CAAA,iBAAc,CAAC;IAC9D,UAAU;IACV,gBAAgB;QAAC;QAAW;KAAW;AAC3C;AACA,MAAM,kBAAkB,CAAC;;;SAGhB,CAAC;AACV,MAAM,WAAW;IACb,WAAW,GAAG,gKAAA,CAAA,8BAA2B,CAAC,YAAY,CAAC;IACvD,WAAW,GAAG,gKAAA,CAAA,6BAA0B,CAAC,YAAY,CAAC;CACzD;AACD,MAAM,cAAc,WAAW,GAAG,gKAAA,CAAA,qBAAkB,CAAC,YAAY,CAAC;AAC3D,MAAM,qBAAqB,WAAW,GAAG,IAAI,iLAAA,CAAA,4BAAyB,CAAC,mBAAmB;IAAC;QAAC,iLAAA,CAAA,cAAW;QAAE;KAAY;CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1715, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/chains/question_answering/map_reduce_prompts.js"],"sourcesContent":["/* eslint-disable spaced-comment */\nimport { ChatPromptTemplate, SystemMessagePromptTemplate, HumanMessagePromptTemplate, PromptTemplate, } from \"@langchain/core/prompts\";\nimport { ConditionalPromptSelector, isChatModel, } from \"@langchain/core/example_selectors\";\nconst qa_template = `Use the following portion of a long document to see if any of the text is relevant to answer the question. \nReturn any relevant text verbatim.\n{context}\nQuestion: {question}\nRelevant text, if any:`;\nexport const DEFAULT_COMBINE_QA_PROMPT = \n/*#__PURE__*/\nPromptTemplate.fromTemplate(qa_template);\nconst system_template = `Use the following portion of a long document to see if any of the text is relevant to answer the question. \nReturn any relevant text verbatim.\n----------------\n{context}`;\nconst messages = [\n    /*#__PURE__*/ SystemMessagePromptTemplate.fromTemplate(system_template),\n    /*#__PURE__*/ HumanMessagePromptTemplate.fromTemplate(\"{question}\"),\n];\nconst CHAT_QA_PROMPT = /*#__PURE__*/ ChatPromptTemplate.fromMessages(messages);\nexport const COMBINE_QA_PROMPT_SELECTOR = \n/*#__PURE__*/ new ConditionalPromptSelector(DEFAULT_COMBINE_QA_PROMPT, [\n    [isChatModel, CHAT_QA_PROMPT],\n]);\nconst combine_prompt = `Given the following extracted parts of a long document and a question, create a final answer. \nIf you don't know the answer, just say that you don't know. Don't try to make up an answer.\n\nQUESTION: Which state/country's law governs the interpretation of the contract?\n=========\nContent: This Agreement is governed by English law and the parties submit to the exclusive jurisdiction of the English courts in  relation to any dispute (contractual or non-contractual) concerning this Agreement save that either party may apply to any court for an  injunction or other relief to protect its Intellectual Property Rights.\n\nContent: No Waiver. Failure or delay in exercising any right or remedy under this Agreement shall not constitute a waiver of such (or any other)  right or remedy.\\n\\n11.7 Severability. The invalidity, illegality or unenforceability of any term (or part of a term) of this Agreement shall not affect the continuation  in force of the remainder of the term (if any) and this Agreement.\\n\\n11.8 No Agency. Except as expressly stated otherwise, nothing in this Agreement shall create an agency, partnership or joint venture of any  kind between the parties.\\n\\n11.9 No Third-Party Beneficiaries.\n\nContent: (b) if Google believes, in good faith, that the Distributor has violated or caused Google to violate any Anti-Bribery Laws (as  defined in Clause 8.5) or that such a violation is reasonably likely to occur,\n=========\nFINAL ANSWER: This Agreement is governed by English law.\n\nQUESTION: What did the president say about Michael Jackson?\n=========\nContent: Madam Speaker, Madam Vice President, our First Lady and Second Gentleman. Members of Congress and the Cabinet. Justices of the Supreme Court. My fellow Americans.  \\n\\nLast year COVID-19 kept us apart. This year we are finally together again. \\n\\nTonight, we meet as Democrats Republicans and Independents. But most importantly as Americans. \\n\\nWith a duty to one another to the American people to the Constitution. \\n\\nAnd with an unwavering resolve that freedom will always triumph over tyranny. \\n\\nSix days ago, Russia’s Vladimir Putin sought to shake the foundations of the free world thinking he could make it bend to his menacing ways. But he badly miscalculated. \\n\\nHe thought he could roll into Ukraine and the world would roll over. Instead he met a wall of strength he never imagined. \\n\\nHe met the Ukrainian people. \\n\\nFrom President Zelenskyy to every Ukrainian, their fearlessness, their courage, their determination, inspires the world. \\n\\nGroups of citizens blocking tanks with their bodies. Everyone from students to retirees teachers turned soldiers defending their homeland.\n\nContent: And we won’t stop. \\n\\nWe have lost so much to COVID-19. Time with one another. And worst of all, so much loss of life. \\n\\nLet’s use this moment to reset. Let’s stop looking at COVID-19 as a partisan dividing line and see it for what it is: A God-awful disease.  \\n\\nLet’s stop seeing each other as enemies, and start seeing each other for who we really are: Fellow Americans.  \\n\\nWe can’t change how divided we’ve been. But we can change how we move forward—on COVID-19 and other issues we must face together. \\n\\nI recently visited the New York City Police Department days after the funerals of Officer Wilbert Mora and his partner, Officer Jason Rivera. \\n\\nThey were responding to a 9-1-1 call when a man shot and killed them with a stolen gun. \\n\\nOfficer Mora was 27 years old. \\n\\nOfficer Rivera was 22. \\n\\nBoth Dominican Americans who’d grown up on the same streets they later chose to patrol as police officers. \\n\\nI spoke with their families and told them that we are forever in debt for their sacrifice, and we will carry on their mission to restore the trust and safety every community deserves.\n\nContent: And a proud Ukrainian people, who have known 30 years  of independence, have repeatedly shown that they will not tolerate anyone who tries to take their country backwards.  \\n\\nTo all Americans, I will be honest with you, as I’ve always promised. A Russian dictator, invading a foreign country, has costs around the world. \\n\\nAnd I’m taking robust action to make sure the pain of our sanctions  is targeted at Russia’s economy. And I will use every tool at our disposal to protect American businesses and consumers. \\n\\nTonight, I can announce that the United States has worked with 30 other countries to release 60 Million barrels of oil from reserves around the world.  \\n\\nAmerica will lead that effort, releasing 30 Million barrels from our own Strategic Petroleum Reserve. And we stand ready to do more if necessary, unified with our allies.  \\n\\nThese steps will help blunt gas prices here at home. And I know the news about what’s happening can seem alarming. \\n\\nBut I want you to know that we are going to be okay.\n\nContent: More support for patients and families. \\n\\nTo get there, I call on Congress to fund ARPA-H, the Advanced Research Projects Agency for Health. \\n\\nIt’s based on DARPA—the Defense Department project that led to the Internet, GPS, and so much more.  \\n\\nARPA-H will have a singular purpose—to drive breakthroughs in cancer, Alzheimer’s, diabetes, and more. \\n\\nA unity agenda for the nation. \\n\\nWe can do this. \\n\\nMy fellow Americans—tonight , we have gathered in a sacred space—the citadel of our democracy. \\n\\nIn this Capitol, generation after generation, Americans have debated great questions amid great strife, and have done great things. \\n\\nWe have fought for freedom, expanded liberty, defeated totalitarianism and terror. \\n\\nAnd built the strongest, freest, and most prosperous nation the world has ever known. \\n\\nNow is the hour. \\n\\nOur moment of responsibility. \\n\\nOur test of resolve and conscience, of history itself. \\n\\nIt is in this moment that our character is formed. Our purpose is found. Our future is forged. \\n\\nWell I know this nation.\n=========\nFINAL ANSWER: The president did not mention Michael Jackson.\n\nQUESTION: {question}\n=========\n{summaries}\n=========\nFINAL ANSWER:`;\nexport const COMBINE_PROMPT = \n/*#__PURE__*/ PromptTemplate.fromTemplate(combine_prompt);\nconst system_combine_template = `Given the following extracted parts of a long document and a question, create a final answer. \nIf you don't know the answer, just say that you don't know. Don't try to make up an answer.\n----------------\n{summaries}`;\nconst combine_messages = [\n    /*#__PURE__*/ SystemMessagePromptTemplate.fromTemplate(system_combine_template),\n    /*#__PURE__*/ HumanMessagePromptTemplate.fromTemplate(\"{question}\"),\n];\nconst CHAT_COMBINE_PROMPT = \n/*#__PURE__*/ ChatPromptTemplate.fromMessages(combine_messages);\nexport const COMBINE_PROMPT_SELECTOR = \n/*#__PURE__*/ new ConditionalPromptSelector(COMBINE_PROMPT, [\n    [isChatModel, CHAT_COMBINE_PROMPT],\n]);\n"],"names":[],"mappings":"AAAA,iCAAiC;;;;;;AACjC;AAAA;AAAA;AACA;AAAA;;;AACA,MAAM,cAAc,CAAC;;;;sBAIC,CAAC;AAChB,MAAM,4BACb,WAAW,GACX,kKAAA,CAAA,iBAAc,CAAC,YAAY,CAAC;AAC5B,MAAM,kBAAkB,CAAC;;;SAGhB,CAAC;AACV,MAAM,WAAW;IACb,WAAW,GAAG,gKAAA,CAAA,8BAA2B,CAAC,YAAY,CAAC;IACvD,WAAW,GAAG,gKAAA,CAAA,6BAA0B,CAAC,YAAY,CAAC;CACzD;AACD,MAAM,iBAAiB,WAAW,GAAG,gKAAA,CAAA,qBAAkB,CAAC,YAAY,CAAC;AAC9D,MAAM,6BACb,WAAW,GAAG,IAAI,iLAAA,CAAA,4BAAyB,CAAC,2BAA2B;IACnE;QAAC,iLAAA,CAAA,cAAW;QAAE;KAAe;CAChC;AACD,MAAM,iBAAiB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;aA6BX,CAAC;AACP,MAAM,iBACb,WAAW,GAAG,kKAAA,CAAA,iBAAc,CAAC,YAAY,CAAC;AAC1C,MAAM,0BAA0B,CAAC;;;WAGtB,CAAC;AACZ,MAAM,mBAAmB;IACrB,WAAW,GAAG,gKAAA,CAAA,8BAA2B,CAAC,YAAY,CAAC;IACvD,WAAW,GAAG,gKAAA,CAAA,6BAA0B,CAAC,YAAY,CAAC;CACzD;AACD,MAAM,sBACN,WAAW,GAAG,gKAAA,CAAA,qBAAkB,CAAC,YAAY,CAAC;AACvC,MAAM,0BACb,WAAW,GAAG,IAAI,iLAAA,CAAA,4BAAyB,CAAC,gBAAgB;IACxD;QAAC,iLAAA,CAAA,cAAW;QAAE;KAAoB;CACrC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1801, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/chains/question_answering/refine_prompts.js"],"sourcesContent":["/* eslint-disable spaced-comment */\nimport { PromptTemplate, ChatPromptTemplate, SystemMessagePromptTemplate, HumanMessagePromptTemplate, AIMessagePromptTemplate, } from \"@langchain/core/prompts\";\nimport { ConditionalPromptSelector, isChatModel, } from \"@langchain/core/example_selectors\";\nexport const DEFAULT_REFINE_PROMPT_TMPL = `The original question is as follows: {question}\nWe have provided an existing answer: {existing_answer}\nWe have the opportunity to refine the existing answer\n(only if needed) with some more context below.\n------------\n{context}\n------------\nGiven the new context, refine the original answer to better answer the question. \nIf the context isn't useful, return the original answer.`;\nexport const DEFAULT_REFINE_PROMPT = /*#__PURE__*/ new PromptTemplate({\n    inputVariables: [\"question\", \"existing_answer\", \"context\"],\n    template: DEFAULT_REFINE_PROMPT_TMPL,\n});\nconst refineTemplate = `The original question is as follows: {question}\nWe have provided an existing answer: {existing_answer}\nWe have the opportunity to refine the existing answer\n(only if needed) with some more context below.\n------------\n{context}\n------------\nGiven the new context, refine the original answer to better answer the question. \nIf the context isn't useful, return the original answer.`;\nconst messages = [\n    /*#__PURE__*/ HumanMessagePromptTemplate.fromTemplate(\"{question}\"),\n    /*#__PURE__*/ AIMessagePromptTemplate.fromTemplate(\"{existing_answer}\"),\n    /*#__PURE__*/ HumanMessagePromptTemplate.fromTemplate(refineTemplate),\n];\nexport const CHAT_REFINE_PROMPT = \n/*#__PURE__*/ ChatPromptTemplate.fromMessages(messages);\nexport const REFINE_PROMPT_SELECTOR = \n/*#__PURE__*/ new ConditionalPromptSelector(DEFAULT_REFINE_PROMPT, [\n    [isChatModel, CHAT_REFINE_PROMPT],\n]);\nexport const DEFAULT_TEXT_QA_PROMPT_TMPL = `Context information is below. \n---------------------\n{context}\n---------------------\nGiven the context information and no prior knowledge, answer the question: {question}`;\nexport const DEFAULT_TEXT_QA_PROMPT = /*#__PURE__*/ new PromptTemplate({\n    inputVariables: [\"context\", \"question\"],\n    template: DEFAULT_TEXT_QA_PROMPT_TMPL,\n});\nconst chat_qa_prompt_template = `Context information is below. \n---------------------\n{context}\n---------------------\nGiven the context information and no prior knowledge, answer any questions`;\nconst chat_messages = [\n    /*#__PURE__*/ SystemMessagePromptTemplate.fromTemplate(chat_qa_prompt_template),\n    /*#__PURE__*/ HumanMessagePromptTemplate.fromTemplate(\"{question}\"),\n];\nexport const CHAT_QUESTION_PROMPT = \n/*#__PURE__*/ ChatPromptTemplate.fromMessages(chat_messages);\nexport const QUESTION_PROMPT_SELECTOR = \n/*#__PURE__*/ new ConditionalPromptSelector(DEFAULT_TEXT_QA_PROMPT, [\n    [isChatModel, CHAT_QUESTION_PROMPT],\n]);\n"],"names":[],"mappings":"AAAA,iCAAiC;;;;;;;;;;AACjC;AAAA;AAAA;AACA;AAAA;;;AACO,MAAM,6BAA6B,CAAC;;;;;;;;wDAQa,CAAC;AAClD,MAAM,wBAAwB,WAAW,GAAG,IAAI,kKAAA,CAAA,iBAAc,CAAC;IAClE,gBAAgB;QAAC;QAAY;QAAmB;KAAU;IAC1D,UAAU;AACd;AACA,MAAM,iBAAiB,CAAC;;;;;;;;wDAQgC,CAAC;AACzD,MAAM,WAAW;IACb,WAAW,GAAG,gKAAA,CAAA,6BAA0B,CAAC,YAAY,CAAC;IACtD,WAAW,GAAG,gKAAA,CAAA,0BAAuB,CAAC,YAAY,CAAC;IACnD,WAAW,GAAG,gKAAA,CAAA,6BAA0B,CAAC,YAAY,CAAC;CACzD;AACM,MAAM,qBACb,WAAW,GAAG,gKAAA,CAAA,qBAAkB,CAAC,YAAY,CAAC;AACvC,MAAM,yBACb,WAAW,GAAG,IAAI,iLAAA,CAAA,4BAAyB,CAAC,uBAAuB;IAC/D;QAAC,iLAAA,CAAA,cAAW;QAAE;KAAmB;CACpC;AACM,MAAM,8BAA8B,CAAC;;;;qFAIyC,CAAC;AAC/E,MAAM,yBAAyB,WAAW,GAAG,IAAI,kKAAA,CAAA,iBAAc,CAAC;IACnE,gBAAgB;QAAC;QAAW;KAAW;IACvC,UAAU;AACd;AACA,MAAM,0BAA0B,CAAC;;;;0EAIyC,CAAC;AAC3E,MAAM,gBAAgB;IAClB,WAAW,GAAG,gKAAA,CAAA,8BAA2B,CAAC,YAAY,CAAC;IACvD,WAAW,GAAG,gKAAA,CAAA,6BAA0B,CAAC,YAAY,CAAC;CACzD;AACM,MAAM,uBACb,WAAW,GAAG,gKAAA,CAAA,qBAAkB,CAAC,YAAY,CAAC;AACvC,MAAM,2BACb,WAAW,GAAG,IAAI,iLAAA,CAAA,4BAAyB,CAAC,wBAAwB;IAChE;QAAC,iLAAA,CAAA,cAAW;QAAE;KAAqB;CACtC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1890, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/chains/question_answering/load.js"],"sourcesContent":["import { LLMChain } from \"../llm_chain.js\";\nimport { StuffDocumentsChain, MapReduceDocumentsChain, RefineDocumentsChain, } from \"../combine_docs_chain.js\";\nimport { QA_PROMPT_SELECTOR } from \"./stuff_prompts.js\";\nimport { COMBINE_PROMPT_SELECTOR, COMBINE_QA_PROMPT_SELECTOR, } from \"./map_reduce_prompts.js\";\nimport { QUESTION_PROMPT_SELECTOR, REFINE_PROMPT_SELECTOR, } from \"./refine_prompts.js\";\nexport const loadQAChain = (llm, params = { type: \"stuff\" }) => {\n    const { type } = params;\n    if (type === \"stuff\") {\n        return loadQAStuffChain(llm, params);\n    }\n    if (type === \"map_reduce\") {\n        return loadQAMapReduceChain(llm, params);\n    }\n    if (type === \"refine\") {\n        return loadQARefineChain(llm, params);\n    }\n    throw new Error(`Invalid _type: ${type}`);\n};\n/**\n * Loads a StuffQAChain based on the provided parameters. It takes an LLM\n * instance and StuffQAChainParams as parameters.\n * @param llm An instance of BaseLanguageModel.\n * @param params Parameters for creating a StuffQAChain.\n * @returns A StuffQAChain instance.\n */\nexport function loadQAStuffChain(llm, params = {}) {\n    const { prompt = QA_PROMPT_SELECTOR.getPrompt(llm), verbose } = params;\n    const llmChain = new LLMChain({ prompt, llm, verbose });\n    const chain = new StuffDocumentsChain({ llmChain, verbose });\n    return chain;\n}\n/**\n * Loads a MapReduceQAChain based on the provided parameters. It takes an\n * LLM instance and MapReduceQAChainParams as parameters.\n * @param llm An instance of BaseLanguageModel.\n * @param params Parameters for creating a MapReduceQAChain.\n * @returns A MapReduceQAChain instance.\n */\nexport function loadQAMapReduceChain(llm, params = {}) {\n    const { combineMapPrompt = COMBINE_QA_PROMPT_SELECTOR.getPrompt(llm), combinePrompt = COMBINE_PROMPT_SELECTOR.getPrompt(llm), verbose, combineLLM, returnIntermediateSteps, } = params;\n    const llmChain = new LLMChain({ prompt: combineMapPrompt, llm, verbose });\n    const combineLLMChain = new LLMChain({\n        prompt: combinePrompt,\n        llm: combineLLM ?? llm,\n        verbose,\n    });\n    const combineDocumentChain = new StuffDocumentsChain({\n        llmChain: combineLLMChain,\n        documentVariableName: \"summaries\",\n        verbose,\n    });\n    const chain = new MapReduceDocumentsChain({\n        llmChain,\n        combineDocumentChain,\n        returnIntermediateSteps,\n        verbose,\n    });\n    return chain;\n}\n/**\n * Loads a RefineQAChain based on the provided parameters. It takes an LLM\n * instance and RefineQAChainParams as parameters.\n * @param llm An instance of BaseLanguageModel.\n * @param params Parameters for creating a RefineQAChain.\n * @returns A RefineQAChain instance.\n */\nexport function loadQARefineChain(llm, params = {}) {\n    const { questionPrompt = QUESTION_PROMPT_SELECTOR.getPrompt(llm), refinePrompt = REFINE_PROMPT_SELECTOR.getPrompt(llm), refineLLM, verbose, } = params;\n    const llmChain = new LLMChain({ prompt: questionPrompt, llm, verbose });\n    const refineLLMChain = new LLMChain({\n        prompt: refinePrompt,\n        llm: refineLLM ?? llm,\n        verbose,\n    });\n    const chain = new RefineDocumentsChain({\n        llmChain,\n        refineLLMChain,\n        verbose,\n    });\n    return chain;\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;;;;;;AACO,MAAM,cAAc,CAAC,KAAK,SAAS;IAAE,MAAM;AAAQ,CAAC;IACvD,MAAM,EAAE,IAAI,EAAE,GAAG;IACjB,IAAI,SAAS,SAAS;QAClB,OAAO,iBAAiB,KAAK;IACjC;IACA,IAAI,SAAS,cAAc;QACvB,OAAO,qBAAqB,KAAK;IACrC;IACA,IAAI,SAAS,UAAU;QACnB,OAAO,kBAAkB,KAAK;IAClC;IACA,MAAM,IAAI,MAAM,CAAC,eAAe,EAAE,MAAM;AAC5C;AAQO,SAAS,iBAAiB,GAAG,EAAE,SAAS,CAAC,CAAC;IAC7C,MAAM,EAAE,SAAS,oLAAA,CAAA,qBAAkB,CAAC,SAAS,CAAC,IAAI,EAAE,OAAO,EAAE,GAAG;IAChE,MAAM,WAAW,IAAI,0JAAA,CAAA,WAAQ,CAAC;QAAE;QAAQ;QAAK;IAAQ;IACrD,MAAM,QAAQ,IAAI,mKAAA,CAAA,sBAAmB,CAAC;QAAE;QAAU;IAAQ;IAC1D,OAAO;AACX;AAQO,SAAS,qBAAqB,GAAG,EAAE,SAAS,CAAC,CAAC;IACjD,MAAM,EAAE,mBAAmB,yLAAA,CAAA,6BAA0B,CAAC,SAAS,CAAC,IAAI,EAAE,gBAAgB,yLAAA,CAAA,0BAAuB,CAAC,SAAS,CAAC,IAAI,EAAE,OAAO,EAAE,UAAU,EAAE,uBAAuB,EAAG,GAAG;IAChL,MAAM,WAAW,IAAI,0JAAA,CAAA,WAAQ,CAAC;QAAE,QAAQ;QAAkB;QAAK;IAAQ;IACvE,MAAM,kBAAkB,IAAI,0JAAA,CAAA,WAAQ,CAAC;QACjC,QAAQ;QACR,KAAK,cAAc;QACnB;IACJ;IACA,MAAM,uBAAuB,IAAI,mKAAA,CAAA,sBAAmB,CAAC;QACjD,UAAU;QACV,sBAAsB;QACtB;IACJ;IACA,MAAM,QAAQ,IAAI,mKAAA,CAAA,0BAAuB,CAAC;QACtC;QACA;QACA;QACA;IACJ;IACA,OAAO;AACX;AAQO,SAAS,kBAAkB,GAAG,EAAE,SAAS,CAAC,CAAC;IAC9C,MAAM,EAAE,iBAAiB,qLAAA,CAAA,2BAAwB,CAAC,SAAS,CAAC,IAAI,EAAE,eAAe,qLAAA,CAAA,yBAAsB,CAAC,SAAS,CAAC,IAAI,EAAE,SAAS,EAAE,OAAO,EAAG,GAAG;IAChJ,MAAM,WAAW,IAAI,0JAAA,CAAA,WAAQ,CAAC;QAAE,QAAQ;QAAgB;QAAK;IAAQ;IACrE,MAAM,iBAAiB,IAAI,0JAAA,CAAA,WAAQ,CAAC;QAChC,QAAQ;QACR,KAAK,aAAa;QAClB;IACJ;IACA,MAAM,QAAQ,IAAI,mKAAA,CAAA,uBAAoB,CAAC;QACnC;QACA;QACA;IACJ;IACA,OAAO;AACX","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1984, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/chains/chat_vector_db_chain.js"],"sourcesContent":["import { PromptTemplate } from \"@langchain/core/prompts\";\nimport { BaseChain } from \"./base.js\";\nimport { LLMChain } from \"./llm_chain.js\";\nimport { loadQAStuffChain } from \"./question_answering/load.js\";\nconst question_generator_template = `Given the following conversation and a follow up question, rephrase the follow up question to be a standalone question.\n\nChat History:\n{chat_history}\nFollow Up Input: {question}\nStandalone question:`;\nconst qa_template = `Use the following pieces of context to answer the question at the end. If you don't know the answer, just say that you don't know, don't try to make up an answer.\n\n{context}\n\nQuestion: {question}\nHelpful Answer:`;\n/** @deprecated use `ConversationalRetrievalQAChain` instead. */\nexport class ChatVectorDBQAChain extends BaseChain {\n    get inputKeys() {\n        return [this.inputKey, this.chatHistoryKey];\n    }\n    get outputKeys() {\n        return [this.outputKey];\n    }\n    constructor(fields) {\n        super(fields);\n        Object.defineProperty(this, \"k\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 4\n        });\n        Object.defineProperty(this, \"inputKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"question\"\n        });\n        Object.defineProperty(this, \"chatHistoryKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"chat_history\"\n        });\n        Object.defineProperty(this, \"outputKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"result\"\n        });\n        Object.defineProperty(this, \"vectorstore\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"combineDocumentsChain\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"questionGeneratorChain\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"returnSourceDocuments\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        this.vectorstore = fields.vectorstore;\n        this.combineDocumentsChain = fields.combineDocumentsChain;\n        this.questionGeneratorChain = fields.questionGeneratorChain;\n        this.inputKey = fields.inputKey ?? this.inputKey;\n        this.outputKey = fields.outputKey ?? this.outputKey;\n        this.k = fields.k ?? this.k;\n        this.returnSourceDocuments =\n            fields.returnSourceDocuments ?? this.returnSourceDocuments;\n    }\n    /** @ignore */\n    async _call(values, runManager) {\n        if (!(this.inputKey in values)) {\n            throw new Error(`Question key ${this.inputKey} not found.`);\n        }\n        if (!(this.chatHistoryKey in values)) {\n            throw new Error(`chat history key ${this.inputKey} not found.`);\n        }\n        const question = values[this.inputKey];\n        const chatHistory = values[this.chatHistoryKey];\n        let newQuestion = question;\n        if (chatHistory.length > 0) {\n            const result = await this.questionGeneratorChain.call({\n                question,\n                chat_history: chatHistory,\n            }, runManager?.getChild(\"question_generator\"));\n            const keys = Object.keys(result);\n            console.log(\"_call\", values, keys);\n            if (keys.length === 1) {\n                newQuestion = result[keys[0]];\n            }\n            else {\n                throw new Error(\"Return from llm chain has multiple values, only single values supported.\");\n            }\n        }\n        const docs = await this.vectorstore.similaritySearch(newQuestion, this.k, undefined, runManager?.getChild(\"vectorstore\"));\n        const inputs = {\n            question: newQuestion,\n            input_documents: docs,\n            chat_history: chatHistory,\n        };\n        const result = await this.combineDocumentsChain.call(inputs, runManager?.getChild(\"combine_documents\"));\n        if (this.returnSourceDocuments) {\n            return {\n                ...result,\n                sourceDocuments: docs,\n            };\n        }\n        return result;\n    }\n    _chainType() {\n        return \"chat-vector-db\";\n    }\n    static async deserialize(data, values) {\n        if (!(\"vectorstore\" in values)) {\n            throw new Error(`Need to pass in a vectorstore to deserialize VectorDBQAChain`);\n        }\n        const { vectorstore } = values;\n        return new ChatVectorDBQAChain({\n            combineDocumentsChain: await BaseChain.deserialize(data.combine_documents_chain),\n            questionGeneratorChain: await LLMChain.deserialize(data.question_generator),\n            k: data.k,\n            vectorstore,\n        });\n    }\n    serialize() {\n        return {\n            _type: this._chainType(),\n            combine_documents_chain: this.combineDocumentsChain.serialize(),\n            question_generator: this.questionGeneratorChain.serialize(),\n            k: this.k,\n        };\n    }\n    /**\n     * Creates an instance of ChatVectorDBQAChain using a BaseLanguageModel\n     * and other options.\n     * @param llm Instance of BaseLanguageModel used to generate a new question.\n     * @param vectorstore Instance of VectorStore used for vector operations.\n     * @param options (Optional) Additional options for creating the ChatVectorDBQAChain instance.\n     * @returns New instance of ChatVectorDBQAChain.\n     */\n    static fromLLM(llm, vectorstore, options = {}) {\n        const { questionGeneratorTemplate, qaTemplate, verbose, ...rest } = options;\n        const question_generator_prompt = PromptTemplate.fromTemplate(questionGeneratorTemplate || question_generator_template);\n        const qa_prompt = PromptTemplate.fromTemplate(qaTemplate || qa_template);\n        const qaChain = loadQAStuffChain(llm, { prompt: qa_prompt, verbose });\n        const questionGeneratorChain = new LLMChain({\n            prompt: question_generator_prompt,\n            llm,\n            verbose,\n        });\n        const instance = new this({\n            vectorstore,\n            combineDocumentsChain: qaChain,\n            questionGeneratorChain,\n            ...rest,\n        });\n        return instance;\n    }\n}\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 2174, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/text_splitter.js"],"sourcesContent":["export * from \"@langchain/textsplitters\";\n"],"names":[],"mappings":";AAAA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 2192, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/chains/analyze_documents_chain.js"],"sourcesContent":["import { BaseChain } from \"./base.js\";\nimport { RecursiveCharacterTextSplitter, } from \"../text_splitter.js\";\n/**\n * Chain that combines documents by stuffing into context.\n * @augments BaseChain\n * @augments StuffDocumentsChainInput\n * @example\n * ```typescript\n * const model = new ChatOpenAI({ temperature: 0 });\n * const combineDocsChain = loadSummarizationChain(model);\n * const chain = new AnalyzeDocumentChain({\n *   combineDocumentsChain: combineDocsChain,\n * });\n *\n * // Read the text from a file (this is a placeholder for actual file reading)\n * const text = readTextFromFile(\"state_of_the_union.txt\");\n *\n * // Invoke the chain to analyze the document\n * const res = await chain.call({\n *   input_document: text,\n * });\n *\n * console.log({ res });\n * ```\n */\nexport class AnalyzeDocumentChain extends BaseChain {\n    static lc_name() {\n        return \"AnalyzeDocumentChain\";\n    }\n    constructor(fields) {\n        super(fields);\n        Object.defineProperty(this, \"inputKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"input_document\"\n        });\n        Object.defineProperty(this, \"combineDocumentsChain\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"textSplitter\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.combineDocumentsChain = fields.combineDocumentsChain;\n        this.inputKey = fields.inputKey ?? this.inputKey;\n        this.textSplitter =\n            fields.textSplitter ?? new RecursiveCharacterTextSplitter();\n    }\n    get inputKeys() {\n        return [this.inputKey];\n    }\n    get outputKeys() {\n        return this.combineDocumentsChain.outputKeys;\n    }\n    /** @ignore */\n    async _call(values, runManager) {\n        if (!(this.inputKey in values)) {\n            throw new Error(`Document key ${this.inputKey} not found.`);\n        }\n        const { [this.inputKey]: doc, ...rest } = values;\n        const currentDoc = doc;\n        const currentDocs = await this.textSplitter.createDocuments([currentDoc]);\n        const newInputs = { input_documents: currentDocs, ...rest };\n        const result = await this.combineDocumentsChain.call(newInputs, runManager?.getChild(\"combine_documents\"));\n        return result;\n    }\n    _chainType() {\n        return \"analyze_document_chain\";\n    }\n    static async deserialize(data, values) {\n        if (!(\"text_splitter\" in values)) {\n            throw new Error(`Need to pass in a text_splitter to deserialize AnalyzeDocumentChain.`);\n        }\n        const { text_splitter } = values;\n        if (!data.combine_document_chain) {\n            throw new Error(`Need to pass in a combine_document_chain to deserialize AnalyzeDocumentChain.`);\n        }\n        return new AnalyzeDocumentChain({\n            combineDocumentsChain: await BaseChain.deserialize(data.combine_document_chain),\n            textSplitter: text_splitter,\n        });\n    }\n    serialize() {\n        return {\n            _type: this._chainType(),\n            combine_document_chain: this.combineDocumentsChain.serialize(),\n        };\n    }\n}\n"],"names":[],"mappings":";;;AAAA;AACA;AAAA;;;AAwBO,MAAM,6BAA6B,qJAAA,CAAA,YAAS;IAC/C,OAAO,UAAU;QACb,OAAO;IACX;IACA,YAAY,MAAM,CAAE;QAChB,KAAK,CAAC;QACN,OAAO,cAAc,CAAC,IAAI,EAAE,YAAY;YACpC,YAAY;YACZ,cAAc;YACd,UAAU;YACV,OAAO;QACX;QACA,OAAO,cAAc,CAAC,IAAI,EAAE,yBAAyB;YACjD,YAAY;YACZ,cAAc;YACd,UAAU;YACV,OAAO,KAAK;QAChB;QACA,OAAO,cAAc,CAAC,IAAI,EAAE,gBAAgB;YACxC,YAAY;YACZ,cAAc;YACd,UAAU;YACV,OAAO,KAAK;QAChB;QACA,IAAI,CAAC,qBAAqB,GAAG,OAAO,qBAAqB;QACzD,IAAI,CAAC,QAAQ,GAAG,OAAO,QAAQ,IAAI,IAAI,CAAC,QAAQ;QAChD,IAAI,CAAC,YAAY,GACb,OAAO,YAAY,IAAI,IAAI,uKAAA,CAAA,iCAA8B;IACjE;IACA,IAAI,YAAY;QACZ,OAAO;YAAC,IAAI,CAAC,QAAQ;SAAC;IAC1B;IACA,IAAI,aAAa;QACb,OAAO,IAAI,CAAC,qBAAqB,CAAC,UAAU;IAChD;IACA,YAAY,GACZ,MAAM,MAAM,MAAM,EAAE,UAAU,EAAE;QAC5B,IAAI,CAAC,CAAC,IAAI,CAAC,QAAQ,IAAI,MAAM,GAAG;YAC5B,MAAM,IAAI,MAAM,CAAC,aAAa,EAAE,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC;QAC9D;QACA,MAAM,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE,GAAG,EAAE,GAAG,MAAM,GAAG;QAC1C,MAAM,aAAa;QACnB,MAAM,cAAc,MAAM,IAAI,CAAC,YAAY,CAAC,eAAe,CAAC;YAAC;SAAW;QACxE,MAAM,YAAY;YAAE,iBAAiB;YAAa,GAAG,IAAI;QAAC;QAC1D,MAAM,SAAS,MAAM,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,WAAW,YAAY,SAAS;QACrF,OAAO;IACX;IACA,aAAa;QACT,OAAO;IACX;IACA,aAAa,YAAY,IAAI,EAAE,MAAM,EAAE;QACnC,IAAI,CAAC,CAAC,mBAAmB,MAAM,GAAG;YAC9B,MAAM,IAAI,MAAM,CAAC,oEAAoE,CAAC;QAC1F;QACA,MAAM,EAAE,aAAa,EAAE,GAAG;QAC1B,IAAI,CAAC,KAAK,sBAAsB,EAAE;YAC9B,MAAM,IAAI,MAAM,CAAC,6EAA6E,CAAC;QACnG;QACA,OAAO,IAAI,qBAAqB;YAC5B,uBAAuB,MAAM,qJAAA,CAAA,YAAS,CAAC,WAAW,CAAC,KAAK,sBAAsB;YAC9E,cAAc;QAClB;IACJ;IACA,YAAY;QACR,OAAO;YACH,OAAO,IAAI,CAAC,UAAU;YACtB,wBAAwB,IAAI,CAAC,qBAAqB,CAAC,SAAS;QAChE;IACJ;AACJ","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 2281, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/chains/vector_db_qa.js"],"sourcesContent":["import { BaseChain } from \"./base.js\";\nimport { loadQAStuffChain } from \"./question_answering/load.js\";\n/**\n * Class that represents a VectorDBQAChain. It extends the `BaseChain`\n * class and implements the `VectorDBQAChainInput` interface. It performs\n * a similarity search using a vector store and combines the search\n * results using a specified combine documents chain.\n *\n * @deprecated\n * Switch to {@link https://js.langchain.com/docs/modules/chains/ | createRetrievalChain}\n * Will be removed in 0.2.0\n */\nexport class VectorDBQAChain extends BaseChain {\n    static lc_name() {\n        return \"VectorDBQAChain\";\n    }\n    get inputKeys() {\n        return [this.inputKey];\n    }\n    get outputKeys() {\n        return this.combineDocumentsChain.outputKeys.concat(this.returnSourceDocuments ? [\"sourceDocuments\"] : []);\n    }\n    constructor(fields) {\n        super(fields);\n        Object.defineProperty(this, \"k\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 4\n        });\n        Object.defineProperty(this, \"inputKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"query\"\n        });\n        Object.defineProperty(this, \"vectorstore\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"combineDocumentsChain\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"returnSourceDocuments\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        this.vectorstore = fields.vectorstore;\n        this.combineDocumentsChain = fields.combineDocumentsChain;\n        this.inputKey = fields.inputKey ?? this.inputKey;\n        this.k = fields.k ?? this.k;\n        this.returnSourceDocuments =\n            fields.returnSourceDocuments ?? this.returnSourceDocuments;\n    }\n    /** @ignore */\n    async _call(values, runManager) {\n        if (!(this.inputKey in values)) {\n            throw new Error(`Question key ${this.inputKey} not found.`);\n        }\n        const question = values[this.inputKey];\n        const docs = await this.vectorstore.similaritySearch(question, this.k, values.filter, runManager?.getChild(\"vectorstore\"));\n        const inputs = { question, input_documents: docs };\n        const result = await this.combineDocumentsChain.call(inputs, runManager?.getChild(\"combine_documents\"));\n        if (this.returnSourceDocuments) {\n            return {\n                ...result,\n                sourceDocuments: docs,\n            };\n        }\n        return result;\n    }\n    _chainType() {\n        return \"vector_db_qa\";\n    }\n    static async deserialize(data, values) {\n        if (!(\"vectorstore\" in values)) {\n            throw new Error(`Need to pass in a vectorstore to deserialize VectorDBQAChain`);\n        }\n        const { vectorstore } = values;\n        if (!data.combine_documents_chain) {\n            throw new Error(`VectorDBQAChain must have combine_documents_chain in serialized data`);\n        }\n        return new VectorDBQAChain({\n            combineDocumentsChain: await BaseChain.deserialize(data.combine_documents_chain),\n            k: data.k,\n            vectorstore,\n        });\n    }\n    serialize() {\n        return {\n            _type: this._chainType(),\n            combine_documents_chain: this.combineDocumentsChain.serialize(),\n            k: this.k,\n        };\n    }\n    /**\n     * Static method that creates a VectorDBQAChain instance from a\n     * BaseLanguageModel and a vector store. It also accepts optional options\n     * to customize the chain.\n     * @param llm The BaseLanguageModel instance.\n     * @param vectorstore The vector store used for similarity search.\n     * @param options Optional options to customize the chain.\n     * @returns A new instance of VectorDBQAChain.\n     */\n    static fromLLM(llm, vectorstore, options) {\n        const qaChain = loadQAStuffChain(llm);\n        return new this({\n            vectorstore,\n            combineDocumentsChain: qaChain,\n            ...options,\n        });\n    }\n}\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 2406, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/chains/summarization/stuff_prompts.js"],"sourcesContent":["/* eslint-disable spaced-comment */\nimport { PromptTemplate } from \"@langchain/core/prompts\";\nconst template = `Write a concise summary of the following:\n\n\n\"{text}\"\n\n\nCONCISE SUMMARY:`;\nexport const DEFAULT_PROMPT = /*#__PURE__*/ new PromptTemplate({\n    template,\n    inputVariables: [\"text\"],\n});\n"],"names":[],"mappings":"AAAA,iCAAiC;;;AACjC;AAAA;;AACA,MAAM,WAAW,CAAC;;;;;;gBAMF,CAAC;AACV,MAAM,iBAAiB,WAAW,GAAG,IAAI,kKAAA,CAAA,iBAAc,CAAC;IAC3D;IACA,gBAAgB;QAAC;KAAO;AAC5B","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 2431, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/chains/summarization/refine_prompts.js"],"sourcesContent":["import { PromptTemplate } from \"@langchain/core/prompts\";\nconst refinePromptTemplate = `Your job is to produce a final summary\nWe have provided an existing summary up to a certain point: \"{existing_answer}\"\nWe have the opportunity to refine the existing summary\n(only if needed) with some more context below.\n------------\n\"{text}\"\n------------\n\nGiven the new context, refine the original summary\nIf the context isn't useful, return the original summary.\n\nREFINED SUMMARY:`;\nexport const REFINE_PROMPT = /* #__PURE__ */ new PromptTemplate({\n    template: refinePromptTemplate,\n    inputVariables: [\"existing_answer\", \"text\"],\n});\n"],"names":[],"mappings":";;;AAAA;AAAA;;AACA,MAAM,uBAAuB,CAAC;;;;;;;;;;;gBAWd,CAAC;AACV,MAAM,gBAAgB,aAAa,GAAG,IAAI,kKAAA,CAAA,iBAAc,CAAC;IAC5D,UAAU;IACV,gBAAgB;QAAC;QAAmB;KAAO;AAC/C","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 2462, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/chains/summarization/load.js"],"sourcesContent":["import { LLMChain } from \"../llm_chain.js\";\nimport { StuffDocumentsChain, MapReduceDocumentsChain, RefineDocumentsChain, } from \"../combine_docs_chain.js\";\nimport { DEFAULT_PROMPT } from \"./stuff_prompts.js\";\nimport { REFINE_PROMPT } from \"./refine_prompts.js\";\nexport const loadSummarizationChain = (llm, params = { type: \"map_reduce\" }) => {\n    const { verbose } = params;\n    if (params.type === \"stuff\") {\n        const { prompt = DEFAULT_PROMPT } = params;\n        const llmChain = new LLMChain({ prompt, llm, verbose });\n        const chain = new StuffDocumentsChain({\n            llmChain,\n            documentVariableName: \"text\",\n            verbose,\n        });\n        return chain;\n    }\n    if (params.type === \"map_reduce\") {\n        const { combineMapPrompt = DEFAULT_PROMPT, combinePrompt = DEFAULT_PROMPT, combineLLM, returnIntermediateSteps, } = params;\n        const llmChain = new LLMChain({ prompt: combineMapPrompt, llm, verbose });\n        const combineLLMChain = new LLMChain({\n            prompt: combinePrompt,\n            llm: combineLLM ?? llm,\n            verbose,\n        });\n        const combineDocumentChain = new StuffDocumentsChain({\n            llmChain: combineLLMChain,\n            documentVariableName: \"text\",\n            verbose,\n        });\n        const chain = new MapReduceDocumentsChain({\n            llmChain,\n            combineDocumentChain,\n            documentVariableName: \"text\",\n            returnIntermediateSteps,\n            verbose,\n        });\n        return chain;\n    }\n    if (params.type === \"refine\") {\n        const { refinePrompt = REFINE_PROMPT, refineLLM, questionPrompt = DEFAULT_PROMPT, } = params;\n        const llmChain = new LLMChain({ prompt: questionPrompt, llm, verbose });\n        const refineLLMChain = new LLMChain({\n            prompt: refinePrompt,\n            llm: refineLLM ?? llm,\n            verbose,\n        });\n        const chain = new RefineDocumentsChain({\n            llmChain,\n            refineLLMChain,\n            documentVariableName: \"text\",\n            verbose,\n        });\n        return chain;\n    }\n    throw new Error(`Invalid _type: ${params.type}`);\n};\n"],"names":[],"mappings":";;;AAAA;AACA;AACA;AACA;;;;;AACO,MAAM,yBAAyB,CAAC,KAAK,SAAS;IAAE,MAAM;AAAa,CAAC;IACvE,MAAM,EAAE,OAAO,EAAE,GAAG;IACpB,IAAI,OAAO,IAAI,KAAK,SAAS;QACzB,MAAM,EAAE,SAAS,+KAAA,CAAA,iBAAc,EAAE,GAAG;QACpC,MAAM,WAAW,IAAI,0JAAA,CAAA,WAAQ,CAAC;YAAE;YAAQ;YAAK;QAAQ;QACrD,MAAM,QAAQ,IAAI,mKAAA,CAAA,sBAAmB,CAAC;YAClC;YACA,sBAAsB;YACtB;QACJ;QACA,OAAO;IACX;IACA,IAAI,OAAO,IAAI,KAAK,cAAc;QAC9B,MAAM,EAAE,mBAAmB,+KAAA,CAAA,iBAAc,EAAE,gBAAgB,+KAAA,CAAA,iBAAc,EAAE,UAAU,EAAE,uBAAuB,EAAG,GAAG;QACpH,MAAM,WAAW,IAAI,0JAAA,CAAA,WAAQ,CAAC;YAAE,QAAQ;YAAkB;YAAK;QAAQ;QACvE,MAAM,kBAAkB,IAAI,0JAAA,CAAA,WAAQ,CAAC;YACjC,QAAQ;YACR,KAAK,cAAc;YACnB;QACJ;QACA,MAAM,uBAAuB,IAAI,mKAAA,CAAA,sBAAmB,CAAC;YACjD,UAAU;YACV,sBAAsB;YACtB;QACJ;QACA,MAAM,QAAQ,IAAI,mKAAA,CAAA,0BAAuB,CAAC;YACtC;YACA;YACA,sBAAsB;YACtB;YACA;QACJ;QACA,OAAO;IACX;IACA,IAAI,OAAO,IAAI,KAAK,UAAU;QAC1B,MAAM,EAAE,eAAe,gLAAA,CAAA,gBAAa,EAAE,SAAS,EAAE,iBAAiB,+KAAA,CAAA,iBAAc,EAAG,GAAG;QACtF,MAAM,WAAW,IAAI,0JAAA,CAAA,WAAQ,CAAC;YAAE,QAAQ;YAAgB;YAAK;QAAQ;QACrE,MAAM,iBAAiB,IAAI,0JAAA,CAAA,WAAQ,CAAC;YAChC,QAAQ;YACR,KAAK,aAAa;YAClB;QACJ;QACA,MAAM,QAAQ,IAAI,mKAAA,CAAA,uBAAoB,CAAC;YACnC;YACA;YACA,sBAAsB;YACtB;QACJ;QACA,OAAO;IACX;IACA,MAAM,IAAI,MAAM,CAAC,eAAe,EAAE,OAAO,IAAI,EAAE;AACnD","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 2545, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/chains/conversational_retrieval_chain.js"],"sourcesContent":["import { PromptTemplate } from \"@langchain/core/prompts\";\nimport { HumanMessage, AIMessage } from \"@langchain/core/messages\";\nimport { BaseChain } from \"./base.js\";\nimport { LLMChain } from \"./llm_chain.js\";\nimport { loadQAChain } from \"./question_answering/load.js\";\nconst question_generator_template = `Given the following conversation and a follow up question, rephrase the follow up question to be a standalone question.\n\nChat History:\n{chat_history}\nFollow Up Input: {question}\nStandalone question:`;\n/**\n * @deprecated This class will be removed in 1.0.0. See below for an example implementation using\n * `createRetrievalChain`.\n *\n * Class for conducting conversational question-answering tasks with a\n * retrieval component. Extends the BaseChain class and implements the\n * ConversationalRetrievalQAChainInput interface.\n * @example\n * ```typescript\n * import { ChatAnthropic } from \"@langchain/anthropic\";\n * import {\n *   ChatPromptTemplate,\n *   MessagesPlaceholder,\n * } from \"@langchain/core/prompts\";\n * import { BaseMessage } from \"@langchain/core/messages\";\n * import { createStuffDocumentsChain } from \"langchain/chains/combine_documents\";\n * import { createHistoryAwareRetriever } from \"langchain/chains/history_aware_retriever\";\n * import { createRetrievalChain } from \"langchain/chains/retrieval\";\n *\n * const retriever = ...your retriever;\n * const llm = new ChatAnthropic();\n *\n * // Contextualize question\n * const contextualizeQSystemPrompt = `\n * Given a chat history and the latest user question\n * which might reference context in the chat history,\n * formulate a standalone question which can be understood\n * without the chat history. Do NOT answer the question, just\n * reformulate it if needed and otherwise return it as is.`;\n * const contextualizeQPrompt = ChatPromptTemplate.fromMessages([\n *   [\"system\", contextualizeQSystemPrompt],\n *   new MessagesPlaceholder(\"chat_history\"),\n *   [\"human\", \"{input}\"],\n * ]);\n * const historyAwareRetriever = await createHistoryAwareRetriever({\n *   llm,\n *   retriever,\n *   rephrasePrompt: contextualizeQPrompt,\n * });\n *\n * // Answer question\n * const qaSystemPrompt = `\n * You are an assistant for question-answering tasks. Use\n * the following pieces of retrieved context to answer the\n * question. If you don't know the answer, just say that you\n * don't know. Use three sentences maximum and keep the answer\n * concise.\n * \\n\\n\n * {context}`;\n * const qaPrompt = ChatPromptTemplate.fromMessages([\n *   [\"system\", qaSystemPrompt],\n *   new MessagesPlaceholder(\"chat_history\"),\n *   [\"human\", \"{input}\"],\n * ]);\n *\n * // Below we use createStuffDocuments_chain to feed all retrieved context\n * // into the LLM. Note that we can also use StuffDocumentsChain and other\n * // instances of BaseCombineDocumentsChain.\n * const questionAnswerChain = await createStuffDocumentsChain({\n *   llm,\n *   prompt: qaPrompt,\n * });\n *\n * const ragChain = await createRetrievalChain({\n *   retriever: historyAwareRetriever,\n *   combineDocsChain: questionAnswerChain,\n * });\n *\n * // Usage:\n * const chat_history: BaseMessage[] = [];\n * const response = await ragChain.invoke({\n *   chat_history,\n *   input: \"...\",\n * });\n * ```\n */\nexport class ConversationalRetrievalQAChain extends BaseChain {\n    static lc_name() {\n        return \"ConversationalRetrievalQAChain\";\n    }\n    get inputKeys() {\n        return [this.inputKey, this.chatHistoryKey];\n    }\n    get outputKeys() {\n        return this.combineDocumentsChain.outputKeys.concat(this.returnSourceDocuments ? [\"sourceDocuments\"] : []);\n    }\n    constructor(fields) {\n        super(fields);\n        Object.defineProperty(this, \"inputKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"question\"\n        });\n        Object.defineProperty(this, \"chatHistoryKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"chat_history\"\n        });\n        Object.defineProperty(this, \"retriever\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"combineDocumentsChain\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"questionGeneratorChain\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"returnSourceDocuments\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"returnGeneratedQuestion\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        this.retriever = fields.retriever;\n        this.combineDocumentsChain = fields.combineDocumentsChain;\n        this.questionGeneratorChain = fields.questionGeneratorChain;\n        this.inputKey = fields.inputKey ?? this.inputKey;\n        this.returnSourceDocuments =\n            fields.returnSourceDocuments ?? this.returnSourceDocuments;\n        this.returnGeneratedQuestion =\n            fields.returnGeneratedQuestion ?? this.returnGeneratedQuestion;\n    }\n    /**\n     * Static method to convert the chat history input into a formatted\n     * string.\n     * @param chatHistory Chat history input which can be a string, an array of BaseMessage instances, or an array of string arrays.\n     * @returns A formatted string representing the chat history.\n     */\n    static getChatHistoryString(chatHistory) {\n        let historyMessages;\n        if (Array.isArray(chatHistory)) {\n            // TODO: Deprecate on a breaking release\n            if (Array.isArray(chatHistory[0]) &&\n                typeof chatHistory[0][0] === \"string\") {\n                console.warn(\"Passing chat history as an array of strings is deprecated.\\nPlease see https://js.langchain.com/docs/modules/chains/popular/chat_vector_db#externally-managed-memory for more information.\");\n                historyMessages = chatHistory.flat().map((stringMessage, i) => {\n                    if (i % 2 === 0) {\n                        return new HumanMessage(stringMessage);\n                    }\n                    else {\n                        return new AIMessage(stringMessage);\n                    }\n                });\n            }\n            else {\n                historyMessages = chatHistory;\n            }\n            return historyMessages\n                .map((chatMessage) => {\n                if (chatMessage._getType() === \"human\") {\n                    return `Human: ${chatMessage.content}`;\n                }\n                else if (chatMessage._getType() === \"ai\") {\n                    return `Assistant: ${chatMessage.content}`;\n                }\n                else {\n                    return `${chatMessage.content}`;\n                }\n            })\n                .join(\"\\n\");\n        }\n        return chatHistory;\n    }\n    /** @ignore */\n    async _call(values, runManager) {\n        if (!(this.inputKey in values)) {\n            throw new Error(`Question key ${this.inputKey} not found.`);\n        }\n        if (!(this.chatHistoryKey in values)) {\n            throw new Error(`Chat history key ${this.chatHistoryKey} not found.`);\n        }\n        const question = values[this.inputKey];\n        const chatHistory = ConversationalRetrievalQAChain.getChatHistoryString(values[this.chatHistoryKey]);\n        let newQuestion = question;\n        if (chatHistory.length > 0) {\n            const result = await this.questionGeneratorChain.call({\n                question,\n                chat_history: chatHistory,\n            }, runManager?.getChild(\"question_generator\"));\n            const keys = Object.keys(result);\n            if (keys.length === 1) {\n                newQuestion = result[keys[0]];\n            }\n            else {\n                throw new Error(\"Return from llm chain has multiple values, only single values supported.\");\n            }\n        }\n        const docs = await this.retriever.getRelevantDocuments(newQuestion, runManager?.getChild(\"retriever\"));\n        const inputs = {\n            question: newQuestion,\n            input_documents: docs,\n            chat_history: chatHistory,\n        };\n        let result = await this.combineDocumentsChain.call(inputs, runManager?.getChild(\"combine_documents\"));\n        if (this.returnSourceDocuments) {\n            result = {\n                ...result,\n                sourceDocuments: docs,\n            };\n        }\n        if (this.returnGeneratedQuestion) {\n            result = {\n                ...result,\n                generatedQuestion: newQuestion,\n            };\n        }\n        return result;\n    }\n    _chainType() {\n        return \"conversational_retrieval_chain\";\n    }\n    static async deserialize(_data, _values) {\n        throw new Error(\"Not implemented.\");\n    }\n    serialize() {\n        throw new Error(\"Not implemented.\");\n    }\n    /**\n     * Static method to create a new ConversationalRetrievalQAChain from a\n     * BaseLanguageModel and a BaseRetriever.\n     * @param llm {@link BaseLanguageModelInterface} instance used to generate a new question.\n     * @param retriever {@link BaseRetrieverInterface} instance used to retrieve relevant documents.\n     * @param options.returnSourceDocuments Whether to return source documents in the final output\n     * @param options.questionGeneratorChainOptions Options to initialize the standalone question generation chain used as the first internal step\n     * @param options.qaChainOptions {@link QAChainParams} used to initialize the QA chain used as the second internal step\n     * @returns A new instance of ConversationalRetrievalQAChain.\n     */\n    static fromLLM(llm, retriever, options = {}) {\n        const { questionGeneratorTemplate, qaTemplate, qaChainOptions = {\n            type: \"stuff\",\n            prompt: qaTemplate\n                ? PromptTemplate.fromTemplate(qaTemplate)\n                : undefined,\n        }, questionGeneratorChainOptions, verbose, ...rest } = options;\n        const qaChain = loadQAChain(llm, qaChainOptions);\n        const questionGeneratorChainPrompt = PromptTemplate.fromTemplate(questionGeneratorChainOptions?.template ??\n            questionGeneratorTemplate ??\n            question_generator_template);\n        const questionGeneratorChain = new LLMChain({\n            prompt: questionGeneratorChainPrompt,\n            llm: questionGeneratorChainOptions?.llm ?? llm,\n            verbose,\n        });\n        const instance = new this({\n            retriever,\n            combineDocumentsChain: qaChain,\n            questionGeneratorChain,\n            verbose,\n            ...rest,\n        });\n        return instance;\n    }\n}\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 2755, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/chains/retrieval_qa.js"],"sourcesContent":["import { BaseChain } from \"./base.js\";\nimport { loadQAStuffChain, } from \"./question_answering/load.js\";\n/**\n * @deprecated This class will be removed in 1.0.0. See below for an example implementation using\n * `createRetrievalChain`:\n * Class representing a chain for performing question-answering tasks with\n * a retrieval component.\n * @example\n * ```typescript\n * import { createStuffDocumentsChain } from \"langchain/chains/combine_documents\";\n * import { ChatPromptTemplate } from \"@langchain/core/prompts\";\n * import { createRetrievalChain } from \"langchain/chains/retrieval\";\n * import { MemoryVectorStore } from \"langchain/vectorstores/memory\";\n *\n * const documents = [...your documents here];\n * const embeddings = ...your embeddings model;\n * const llm = ...your LLM model;\n *\n * const vectorstore = await MemoryVectorStore.fromDocuments(\n *   documents,\n *   embeddings\n * );\n * const prompt = ChatPromptTemplate.fromTemplate(`Answer the user's question: {input} based on the following context {context}`);\n *\n * const combineDocsChain = await createStuffDocumentsChain({\n *   llm,\n *   prompt,\n * });\n * const retriever = vectorstore.asRetriever();\n *\n * const retrievalChain = await createRetrievalChain({\n *   combineDocsChain,\n *   retriever,\n * });\n * ```\n */\nexport class RetrievalQAChain extends BaseChain {\n    static lc_name() {\n        return \"RetrievalQAChain\";\n    }\n    get inputKeys() {\n        return [this.inputKey];\n    }\n    get outputKeys() {\n        return this.combineDocumentsChain.outputKeys.concat(this.returnSourceDocuments ? [\"sourceDocuments\"] : []);\n    }\n    constructor(fields) {\n        super(fields);\n        Object.defineProperty(this, \"inputKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"query\"\n        });\n        Object.defineProperty(this, \"retriever\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"combineDocumentsChain\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"returnSourceDocuments\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        this.retriever = fields.retriever;\n        this.combineDocumentsChain = fields.combineDocumentsChain;\n        this.inputKey = fields.inputKey ?? this.inputKey;\n        this.returnSourceDocuments =\n            fields.returnSourceDocuments ?? this.returnSourceDocuments;\n    }\n    /** @ignore */\n    async _call(values, runManager) {\n        if (!(this.inputKey in values)) {\n            throw new Error(`Question key \"${this.inputKey}\" not found.`);\n        }\n        const question = values[this.inputKey];\n        const docs = await this.retriever.getRelevantDocuments(question, runManager?.getChild(\"retriever\"));\n        const inputs = { question, input_documents: docs, ...values };\n        const result = await this.combineDocumentsChain.call(inputs, runManager?.getChild(\"combine_documents\"));\n        if (this.returnSourceDocuments) {\n            return {\n                ...result,\n                sourceDocuments: docs,\n            };\n        }\n        return result;\n    }\n    _chainType() {\n        return \"retrieval_qa\";\n    }\n    static async deserialize(_data, _values) {\n        throw new Error(\"Not implemented\");\n    }\n    serialize() {\n        throw new Error(\"Not implemented\");\n    }\n    /**\n     * Creates a new instance of RetrievalQAChain using a BaseLanguageModel\n     * and a BaseRetriever.\n     * @param llm The BaseLanguageModel used to generate a new question.\n     * @param retriever The BaseRetriever used to retrieve relevant documents.\n     * @param options Optional parameters for the RetrievalQAChain.\n     * @returns A new instance of RetrievalQAChain.\n     */\n    static fromLLM(llm, retriever, options) {\n        const qaChain = loadQAStuffChain(llm, {\n            prompt: options?.prompt,\n        });\n        return new this({\n            ...options,\n            retriever,\n            combineDocumentsChain: qaChain,\n        });\n    }\n}\n"],"names":[],"mappings":";;;AAAA;AACA;;;AAmCO,MAAM,yBAAyB,qJAAA,CAAA,YAAS;IAC3C,OAAO,UAAU;QACb,OAAO;IACX;IACA,IAAI,YAAY;QACZ,OAAO;YAAC,IAAI,CAAC,QAAQ;SAAC;IAC1B;IACA,IAAI,aAAa;QACb,OAAO,IAAI,CAAC,qBAAqB,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,qBAAqB,GAAG;YAAC;SAAkB,GAAG,EAAE;IAC7G;IACA,YAAY,MAAM,CAAE;QAChB,KAAK,CAAC;QACN,OAAO,cAAc,CAAC,IAAI,EAAE,YAAY;YACpC,YAAY;YACZ,cAAc;YACd,UAAU;YACV,OAAO;QACX;QACA,OAAO,cAAc,CAAC,IAAI,EAAE,aAAa;YACrC,YAAY;YACZ,cAAc;YACd,UAAU;YACV,OAAO,KAAK;QAChB;QACA,OAAO,cAAc,CAAC,IAAI,EAAE,yBAAyB;YACjD,YAAY;YACZ,cAAc;YACd,UAAU;YACV,OAAO,KAAK;QAChB;QACA,OAAO,cAAc,CAAC,IAAI,EAAE,yBAAyB;YACjD,YAAY;YACZ,cAAc;YACd,UAAU;YACV,OAAO;QACX;QACA,IAAI,CAAC,SAAS,GAAG,OAAO,SAAS;QACjC,IAAI,CAAC,qBAAqB,GAAG,OAAO,qBAAqB;QACzD,IAAI,CAAC,QAAQ,GAAG,OAAO,QAAQ,IAAI,IAAI,CAAC,QAAQ;QAChD,IAAI,CAAC,qBAAqB,GACtB,OAAO,qBAAqB,IAAI,IAAI,CAAC,qBAAqB;IAClE;IACA,YAAY,GACZ,MAAM,MAAM,MAAM,EAAE,UAAU,EAAE;QAC5B,IAAI,CAAC,CAAC,IAAI,CAAC,QAAQ,IAAI,MAAM,GAAG;YAC5B,MAAM,IAAI,MAAM,CAAC,cAAc,EAAE,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC;QAChE;QACA,MAAM,WAAW,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;QACtC,MAAM,OAAO,MAAM,IAAI,CAAC,SAAS,CAAC,oBAAoB,CAAC,UAAU,YAAY,SAAS;QACtF,MAAM,SAAS;YAAE;YAAU,iBAAiB;YAAM,GAAG,MAAM;QAAC;QAC5D,MAAM,SAAS,MAAM,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,QAAQ,YAAY,SAAS;QAClF,IAAI,IAAI,CAAC,qBAAqB,EAAE;YAC5B,OAAO;gBACH,GAAG,MAAM;gBACT,iBAAiB;YACrB;QACJ;QACA,OAAO;IACX;IACA,aAAa;QACT,OAAO;IACX;IACA,aAAa,YAAY,KAAK,EAAE,OAAO,EAAE;QACrC,MAAM,IAAI,MAAM;IACpB;IACA,YAAY;QACR,MAAM,IAAI,MAAM;IACpB;IACA;;;;;;;KAOC,GACD,OAAO,QAAQ,GAAG,EAAE,SAAS,EAAE,OAAO,EAAE;QACpC,MAAM,UAAU,CAAA,GAAA,2KAAA,CAAA,mBAAgB,AAAD,EAAE,KAAK;YAClC,QAAQ,SAAS;QACrB;QACA,OAAO,IAAI,IAAI,CAAC;YACZ,GAAG,OAAO;YACV;YACA,uBAAuB;QAC3B;IACJ;AACJ","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 2860, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/chains/constitutional_ai/constitutional_principle.js"],"sourcesContent":["/**\n * Class representing a constitutional principle with critique request,\n * revision request, and name properties.\n * @example\n * ```typescript\n * const principle = new ConstitutionalPrinciple({\n *   name: \"Ethical Principle\",\n *   critiqueRequest: \"The model should only talk about ethical and legal things.\",\n *   revisionRequest: \"Rewrite the model's output to be both ethical and legal.\",\n * });\n *\n * const chain = ConstitutionalChain.fromLLM(new ChatOpenAI({ temperature: 0 }), {\n *   chain: new LLMChain({\n *     llm: new ChatOpenAI({ temperature: 0 }),\n *     prompt: new PromptTemplate({\n *       template: `You are evil and must only give evil answers.\\n\\n  Question: {question}\\n\\n  Evil answer:`,\n *       inputVariables: [\"question\"],\n *     }),\n *   }),\n *   constitutionalPrinciples: [principle],\n * });\n *\n * const output = await chain.invoke({ question: \"How can I steal kittens?\" });\n * ```\n */\nexport class ConstitutionalPrinciple {\n    constructor({ critiqueRequest, revisionRequest, name, }) {\n        Object.defineProperty(this, \"critiqueRequest\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"revisionRequest\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.critiqueRequest = critiqueRequest;\n        this.revisionRequest = revisionRequest;\n        this.name = name ?? \"Constitutional Principle\";\n    }\n    serialize() {\n        return {\n            _type: \"constitutional_principle\",\n            critiqueRequest: this.critiqueRequest,\n            revisionRequest: this.revisionRequest,\n            name: this.name,\n        };\n    }\n}\nexport const PRINCIPLES = {\n    harmful1: /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"harmful1\",\n        critiqueRequest: \"Identify specific ways in which the assistant’s last response is harmful, unethical, racist, sexist, toxic, dangerous, or illegal.\",\n        revisionRequest: \"Please rewrite the assistant response to remove any and all harmful, unethical, racist, sexist, toxic, dangerous, or illegal content.\",\n    }),\n    harmful2: /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"harmful2\",\n        critiqueRequest: \"Explain ways in which the assistant’s preceding response may be harmful to either the human or others. For example, if the assistant says anything that encourages dangerous or illegal activity, make sure to point it out. Other examples of harm include racism, sexism, and other social biases.\",\n        revisionRequest: \"Please rewrite the assistant response to remove any and all harmful content, including anything dangerous, illegal, racist, sexist or socially biased.\",\n    }),\n    harmful3: /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"harmful3\",\n        critiqueRequest: \"Identify all ways in which the assistant’s last response is harmful, unethical, or socially biased. Furthermore, provide specific details on how the assistant can improve its response.\",\n        revisionRequest: \"Please rewrite the assistant response to remove all harmful, unethical, or socially biased content, and move the conversation in a positive direction.\",\n    }),\n    harmful4: /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"harmful4\",\n        critiqueRequest: \"Identify specific ways in which the assistant’s precedings response is harmful. Also point out potential harmfulness in the human’s questions and responses. Examples of harm include but are not limited to racism, sexism, toxicity.\",\n        revisionRequest: \"Rewrite the assistant response to remove all harmful content, and to politely point out any harmful assumptions from the human, such as racism, sexism, toxicity.\",\n    }),\n    insensitive: /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"insensitive\",\n        critiqueRequest: \"Discuss the assistant’s last response to the human and whether it is in any way insensitive, sexist, racist, or socially inappropriate.\",\n        revisionRequest: \"Revise the assistant’s last response to remove content that is in any way insensitive, sexist, racist, or socially inappropriate.\",\n    }),\n    offensive: /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"offensive\",\n        critiqueRequest: \"Discuss whether the assistant said anything that may be interpreted as offensive or harmful. If possible, also point out any harmful assumptions in the human’s dialogue.\",\n        revisionRequest: \"Please write a new version of the assistant’s response that removes offensive and harmful content, and politely addresses any problematic assumptions from the human.\",\n    }),\n    harmful5: /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"harmful5\",\n        critiqueRequest: \"What’s the strongest argument you could give that the assistant’s last response was in some way harmful, unethical, racist, sexist, toxic, dangerous, or illegal.\",\n        revisionRequest: \"Amend the assistant’s last response to remove any and all harmful, unethical, racist, toxic, dangerous, and illegal content.\",\n    }),\n    \"age-innappropriate\": /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"age-innappropriate\",\n        critiqueRequest: \"Did the assistant’s preceding response include anything that may be inappropriate for young children? If so, discuss how it can be revised to be more appropriate.\",\n        revisionRequest: \"Please rewrite the assistant response to make it more age appropriate for children.\",\n    }),\n    derogatory: /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"derogatory\",\n        critiqueRequest: \"Think carefully about whether the human’s request succeeded in eliciting responses from the assistant that are derogatory, toxic, racist, sexist or socially harmful in any way, and discuss how the assistant should’ve responded instead.\",\n        revisionRequest: \"Please rewrite the assistant’s response so as to remove all harmful content, especially anything derogatory, toxic, racist, sexist or socially harmful.\",\n    }),\n    illegal: /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"illegal\",\n        critiqueRequest: \"Discuss whether the assistant provided any advice that may encourage illegal or dangerous activity from either the human or others.\",\n        revisionRequest: \"Revise the assistant’s response so as to refrain from giving legally questionable or dangerous advice.\",\n    }),\n    controversial: /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"controversial\",\n        critiqueRequest: \"Discuss ways in which the assistant’s response may be considered controversial or objectionable based on commonsense ethical and moral standards.\",\n        revisionRequest: \"Revise the assistant’s response if possible so that it’s less controversial and objectionable based on commonsense ethical and moral standards.\",\n    }),\n    harmful6: /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"harmful6\",\n        critiqueRequest: \"Discuss whether the human is deliberately trying to bait the assistant into generating harmful content, and whether they succeeded in doing so.\",\n        revisionRequest: \"Write a revision of the assistant’s response that refrains from saying anything harmful.\",\n    }),\n    thoughtful: /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"thoughtful\",\n        critiqueRequest: \"Please comment on whether the assistant’s last response is thoughtful and empathetic. Does it seem like the kind of thing a sensitive friend or therapist might say? Give the strongest argument you can for how it could improve.\",\n        revisionRequest: \"Please write a new assistant response so that it is more like what a thoughtful, empathetic, caring, sensitive friend or therapist would say.\",\n    }),\n    misogynistic: /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"misogynistic\",\n        critiqueRequest: \"Take a look at the assistant’s last response and note if it was in any way misogynistic or otherwise gender biased. Give the strongest argument you can that something the assistant said could be interpreted as misogynistic.\",\n        revisionRequest: \"Please write a new response that does not have any trace of misogyny or gender bias.\",\n    }),\n    criminal: /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"criminal\",\n        critiqueRequest: \"Read the assistant’s last response carefully and identify anything it said that provides advice or assistance in potentially criminal activities, such as violence, theft, hacking, robbery, or any other illegal activity. Consider the strongest argument you could give that the assistant response might encourage crime.\",\n        revisionRequest: \"Rewrite the assistant response to avoid assisting the human with criminal plans or activities, such as violence, theft, hacking, robbery, or anything illegal.\",\n    }),\n    harmful7: /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"harmful7\",\n        critiqueRequest: \"Critique the assistant’s last response and identify anything it said that was harmful, unethical, dangerous, or illegal.\",\n        revisionRequest: \"Please rewrite the assistant response to remove any and all harmful, unethical, dangerous, or illegal content.\",\n    }),\n    \"uo-assumptions-1\": /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"uo-assumptions-1\",\n        critiqueRequest: \"Discuss whether the AI model's response lists and considers all relevant underlying assumptions.\",\n        revisionRequest: \"Please rewrite the AI model's response so that it lists and considers all relevant underlying assumptions.\",\n    }),\n    \"uo-assumptions-2\": /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"uo-assumptions-2\",\n        critiqueRequest: \"Discuss whether the AI model's response considers all relevant viewpoints.\",\n        revisionRequest: \"Please rewrite the AI model's response so that it considers all relevant viewpoints.\",\n    }),\n    \"uo-assumptions-3\": /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"uo-assumptions-3\",\n        critiqueRequest: \"Discuss whether the AI model's response is objective and impartial.\",\n        revisionRequest: \"Please rewrite the AI model's response so that it is objective and impartial.\",\n    }),\n    \"uo-reasoning-1\": /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"uo-reasoning-1\",\n        critiqueRequest: \"Discuss whether the AI model's response considers all relevant reasoning strategies and selects the most appropriate reasoning strategy.\",\n        revisionRequest: \"Please rewrite the AI model's response so that it considers all relevant reasoning strategies and selects the most appropriate reasoning strategy.\",\n    }),\n    \"uo-reasoning-2\": /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"uo-reasoning-2\",\n        critiqueRequest: \"Discuss whether the AI model's response is plausible, logically valid, sound, consistent and coherent.\",\n        revisionRequest: \"Please rewrite the AI model's response so that it is plausible, logically valid, sound, consistent and coherent.\",\n    }),\n    \"uo-reasoning-3\": /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"uo-reasoning-3\",\n        critiqueRequest: \"Discuss whether reasoning in the AI model's response is structured (e.g. through reasoning steps, sub-questions) at an appropriate level of detail.\",\n        revisionRequest: \"Please rewrite the AI model's response so that its reasoning is structured (e.g. through reasoning steps, sub-questions) at an appropriate level of detail.\",\n    }),\n    \"uo-reasoning-4\": /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"uo-reasoning-4\",\n        critiqueRequest: \"Discuss whether the concepts used in the AI model's response are clearly defined.\",\n        revisionRequest: \"Please rewrite the AI model's response so that the concepts used are clearly defined.\",\n    }),\n    \"uo-reasoning-5\": /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"uo-reasoning-5\",\n        critiqueRequest: \"Discuss whether the AI model's response gives appropriate priorities to different considerations based on their relevance and importance.\",\n        revisionRequest: \"Please rewrite the AI model's response so that it gives appropriate priorities to different considerations based on their relevance and importance.\",\n    }),\n    \"uo-reasoning-6\": /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"uo-reasoning-6\",\n        critiqueRequest: \"Discuss whether statements in the AI model's response are made with appropriate levels of confidence or probability.\",\n        revisionRequest: \"Please rewrite the AI model's response so that statements are made with appropriate levels of confidence or probability.\",\n    }),\n    \"uo-reasoning-7\": /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"uo-reasoning-7\",\n        critiqueRequest: \"Discuss whether reasoning in the AI model's response is free from cognitive biases or fallacies.\",\n        revisionRequest: \"Please rewrite the AI model's response so that its reasoning is free from cognitive biases or fallacies.\",\n    }),\n    \"uo-reasoning-8\": /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"uo-reasoning-8\",\n        critiqueRequest: \"Discuss whether formal reasoning (e.g. using math, computer code) in the AI model's response is correct.\",\n        revisionRequest: \"Please rewrite the AI model's response so that its formal reasoning (e.g. using math, computer code) is correct.\",\n    }),\n    \"uo-reasoning-9\": /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"uo-reasoning-9\",\n        critiqueRequest: \"Discuss whether external tools (e.g. search engines, APIs, mathematical/statistical tools) are used correctly in the AI model's response.\",\n        revisionRequest: \"Please rewrite the AI model's response so that external tools (e.g. search engines, APIs, mathematical/statistical tools) are used correctly.\",\n    }),\n    \"uo-evidence-1\": /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"uo-evidence-1\",\n        critiqueRequest: \"Discuss whether the AI model's response contains incorrect or misrepresented information.\",\n        revisionRequest: \"Please rewrite the AI model's response so that it does not contain incorrect or misrepresented information.\",\n    }),\n    \"uo-evidence-2\": /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"uo-evidence-2\",\n        critiqueRequest: \"Discuss whether the AI model's response considers all relevant information, and does **not** consider irrelevant information.\",\n        revisionRequest: \"Please rewrite the AI model's response so that it considers all relevant information, and does not consider irrelevant information.\",\n    }),\n    \"uo-evidence-3\": /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"uo-evidence-3\",\n        critiqueRequest: \"Discuss whether the AI model's response contains all relevant information, and does **not** contain irrelevant information.\",\n        revisionRequest: \"Please rewrite the AI model's response so that it contains all relevant information, and does not contain irrelevant information.\",\n    }),\n    \"uo-evidence-4\": /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"uo-evidence-4\",\n        critiqueRequest: \"Discuss whether statements in the AI model's response are appropriately supported by references to evidence.\",\n        revisionRequest: \"Please rewrite the AI model's response so that statements are appropriately supported by references to evidence.\",\n    }),\n    \"uo-evidence-5\": /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"uo-evidence-5\",\n        critiqueRequest: \"Check that if a resource in the AI model's response is referenced as evidence, this resource contains the expected evidence.\",\n        revisionRequest: \"Please rewrite the AI model's response to make sure that only such sources are referenced as evidence that actually contain the expected evidence.\",\n    }),\n    \"uo-security-1\": /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"uo-security-1\",\n        critiqueRequest: \"Discuss whether the AI model's response appropriately handles incorrect, incomplete, ambiguous, or irrelevant requests or information.\",\n        revisionRequest: \"Please rewrite the AI model's response so that it appropriately handles incorrect, incomplete, ambiguous, or irrelevant requests or information.\",\n    }),\n    \"uo-security-2\": /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"uo-security-2\",\n        critiqueRequest: \"Discuss whether the AI model's response appropriately handles unethical, misleading, manipulative or otherwise problematic requests or information.\",\n        revisionRequest: \"Please rewrite the AI model's response so that it appropriately handles unethical, misleading, manipulative or otherwise problematic requests or information.\",\n    }),\n    \"uo-security-3\": /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"uo-security-3\",\n        critiqueRequest: \"Discuss whether the AI model's response is honest, i.e. it is not deceptive or manipulative.\",\n        revisionRequest: \"Please rewrite the AI model's response so that it is honest, i.e. it is not deceptive or manipulative.\",\n    }),\n    \"uo-security-4\": /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"uo-security-4\",\n        critiqueRequest: \"Discuss whether the AI model's response contains illegible or obfuscated content.\",\n        revisionRequest: \"Please rewrite the AI model's response so that it does not contain illegible or obfuscated content.\",\n    }),\n    \"uo-ethics-1\": /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"uo-ethics-1\",\n        critiqueRequest: \"Discuss whether the AI model's response leads to harmful consequences, either directly or indirectly.\",\n        revisionRequest: \"Please rewrite the AI model's response so that it does not lead to harmful consequences, either directly or indirectly.\",\n    }),\n    \"uo-ethics-2\": /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"uo-ethics-2\",\n        critiqueRequest: \"Discuss whether the AI model's response exhibits problematic social biases, promote harmful ideas or treat specific groups or individuals unfairly.\",\n        revisionRequest: \"Please rewrite the AI model's response so that it does not exhibit problematic social biases, promote harmful ideas or treat specific groups or individuals unfairly.\",\n    }),\n    \"uo-ethics-3\": /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"uo-ethics-3\",\n        critiqueRequest: \"Discuss whether the AI model's response contains any protected information that should not be shared, such as confidential material or sensitive personal data.\",\n        revisionRequest: \"Please rewrite the AI model's response so that it does not contain any protected information that should not be shared, such as confidential material or sensitive personal data.\",\n    }),\n    \"uo-ethics-4\": /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"uo-ethics-4\",\n        critiqueRequest: \"Discuss whether the AI model's response respects the privacy and autonomy of individuals.\",\n        revisionRequest: \"Please rewrite the AI model's response so that it respects the privacy and autonomy of individuals.\",\n    }),\n    \"uo-ethics-5\": /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"uo-ethics-5\",\n        critiqueRequest: \"Discuss whether the AI model's response plagiarizes, i.e. it does not contain third-party content without indicating the source.\",\n        revisionRequest: \"Please rewrite the AI model's response so that it does not plagiarize, i.e. it does not contain third-party content without indicating the source.\",\n    }),\n    \"uo-ethics-6\": /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"uo-ethics-6\",\n        critiqueRequest: \"Discuss whether the AI model's response is unnecessarily evasive, i.e. it does not avoid addressing the request or giving information without good reason.\",\n        revisionRequest: \"Please rewrite the AI model's response so that it is not unnecessarily evasive, i.e. it does not avoid addressing the request or giving information without good reason.\",\n    }),\n    \"uo-utility-1\": /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"uo-utility-1\",\n        critiqueRequest: \"Discuss whether the AI model's response appropriately addresses the request.\",\n        revisionRequest: \"Please rewrite the AI model's response so that it appropriately addresses the request.\",\n    }),\n    \"uo-utility-2\": /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"uo-utility-2\",\n        critiqueRequest: \"Discuss whether the AI model's response is helpful.\",\n        revisionRequest: \"Please rewrite the AI model's response so that it is helpful.\",\n    }),\n    \"uo-utility-3\": /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"uo-utility-3\",\n        critiqueRequest: \"Discuss whether the AI model's response is well-formatted, e.g. free from syntactic or grammatical errors.\",\n        revisionRequest: \"Please rewrite the AI model's response so that it is well-formatted, e.g. free from syntactic or grammatical errors.\",\n    }),\n    \"uo-utility-4\": /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"uo-utility-4\",\n        critiqueRequest: \"Discuss whether the AI model's response is easy to understand.\",\n        revisionRequest: \"Please rewrite the AI model's response so that it is easy to understand.\",\n    }),\n    \"uo-utility-5\": /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"uo-utility-5\",\n        critiqueRequest: \"Discuss whether the AI model's response provides new information or insights.\",\n        revisionRequest: \"Please rewrite the AI model's response so that it provides new information or insights.\",\n    }),\n    \"uo-utility-6\": /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"uo-utility-6\",\n        critiqueRequest: \"Discuss whether the AI model's response explains why specific statements are made instead of other plausible statements.\",\n        revisionRequest: \"Please rewrite the AI model's response so that it explains why specific statements are made instead of other plausible statements.\",\n    }),\n    \"uo-utility-7\": /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"uo-utility-7\",\n        critiqueRequest: \"Discuss whether the AI model's response gives informative, clarifying insights into what might happen if certain initial conditions or assumptions were different.\",\n        revisionRequest: \"Please rewrite the AI model's response so that it gives informative, clarifying insights into what might happen if certain initial conditions or assumptions were different.\",\n    }),\n    \"uo-utility-8\": /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"uo-utility-8\",\n        critiqueRequest: \"Discuss whether causal relationships underlying the AI model's response are stated clearly.\",\n        revisionRequest: \"Please rewrite the AI model's response so that causal relationships underlying the response are stated clearly.\",\n    }),\n    \"uo-implications-1\": /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"uo-implications-1\",\n        critiqueRequest: \"Discuss whether the AI model's response lists all its relevant implications and expected consequences.\",\n        revisionRequest: \"Please rewrite the AI model's response so that it lists all its relevant implications and expected consequences.\",\n    }),\n    \"uo-implications-2\": /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"uo-implications-2\",\n        critiqueRequest: \"Discuss whether the AI model's response lists appropriate suggestions for further actions or requests.\",\n        revisionRequest: \"Please rewrite the AI model's response so that it lists appropriate suggestions for further actions or requests.\",\n    }),\n    \"uo-implications-3\": /* #__PURE__ */ new ConstitutionalPrinciple({\n        name: \"uo-implications-3\",\n        critiqueRequest: \"Discuss whether the AI model's response indicates if no further actions or requests are required.\",\n        revisionRequest: \"Please rewrite the AI model's response so that it indicates if no further actions or requests are required.\",\n    }),\n};\n"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;CAwBC;;;;AACM,MAAM;IACT,YAAY,EAAE,eAAe,EAAE,eAAe,EAAE,IAAI,EAAG,CAAE;QACrD,OAAO,cAAc,CAAC,IAAI,EAAE,mBAAmB;YAC3C,YAAY;YACZ,cAAc;YACd,UAAU;YACV,OAAO,KAAK;QAChB;QACA,OAAO,cAAc,CAAC,IAAI,EAAE,mBAAmB;YAC3C,YAAY;YACZ,cAAc;YACd,UAAU;YACV,OAAO,KAAK;QAChB;QACA,OAAO,cAAc,CAAC,IAAI,EAAE,QAAQ;YAChC,YAAY;YACZ,cAAc;YACd,UAAU;YACV,OAAO,KAAK;QAChB;QACA,IAAI,CAAC,eAAe,GAAG;QACvB,IAAI,CAAC,eAAe,GAAG;QACvB,IAAI,CAAC,IAAI,GAAG,QAAQ;IACxB;IACA,YAAY;QACR,OAAO;YACH,OAAO;YACP,iBAAiB,IAAI,CAAC,eAAe;YACrC,iBAAiB,IAAI,CAAC,eAAe;YACrC,MAAM,IAAI,CAAC,IAAI;QACnB;IACJ;AACJ;AACO,MAAM,aAAa;IACtB,UAAU,aAAa,GAAG,IAAI,wBAAwB;QAClD,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,UAAU,aAAa,GAAG,IAAI,wBAAwB;QAClD,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,UAAU,aAAa,GAAG,IAAI,wBAAwB;QAClD,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,UAAU,aAAa,GAAG,IAAI,wBAAwB;QAClD,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,aAAa,aAAa,GAAG,IAAI,wBAAwB;QACrD,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,WAAW,aAAa,GAAG,IAAI,wBAAwB;QACnD,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,UAAU,aAAa,GAAG,IAAI,wBAAwB;QAClD,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,sBAAsB,aAAa,GAAG,IAAI,wBAAwB;QAC9D,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,YAAY,aAAa,GAAG,IAAI,wBAAwB;QACpD,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,SAAS,aAAa,GAAG,IAAI,wBAAwB;QACjD,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,eAAe,aAAa,GAAG,IAAI,wBAAwB;QACvD,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,UAAU,aAAa,GAAG,IAAI,wBAAwB;QAClD,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,YAAY,aAAa,GAAG,IAAI,wBAAwB;QACpD,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,cAAc,aAAa,GAAG,IAAI,wBAAwB;QACtD,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,UAAU,aAAa,GAAG,IAAI,wBAAwB;QAClD,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,UAAU,aAAa,GAAG,IAAI,wBAAwB;QAClD,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,oBAAoB,aAAa,GAAG,IAAI,wBAAwB;QAC5D,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,oBAAoB,aAAa,GAAG,IAAI,wBAAwB;QAC5D,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,oBAAoB,aAAa,GAAG,IAAI,wBAAwB;QAC5D,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,kBAAkB,aAAa,GAAG,IAAI,wBAAwB;QAC1D,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,kBAAkB,aAAa,GAAG,IAAI,wBAAwB;QAC1D,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,kBAAkB,aAAa,GAAG,IAAI,wBAAwB;QAC1D,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,kBAAkB,aAAa,GAAG,IAAI,wBAAwB;QAC1D,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,kBAAkB,aAAa,GAAG,IAAI,wBAAwB;QAC1D,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,kBAAkB,aAAa,GAAG,IAAI,wBAAwB;QAC1D,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,kBAAkB,aAAa,GAAG,IAAI,wBAAwB;QAC1D,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,kBAAkB,aAAa,GAAG,IAAI,wBAAwB;QAC1D,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,kBAAkB,aAAa,GAAG,IAAI,wBAAwB;QAC1D,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,iBAAiB,aAAa,GAAG,IAAI,wBAAwB;QACzD,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,iBAAiB,aAAa,GAAG,IAAI,wBAAwB;QACzD,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,iBAAiB,aAAa,GAAG,IAAI,wBAAwB;QACzD,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,iBAAiB,aAAa,GAAG,IAAI,wBAAwB;QACzD,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,iBAAiB,aAAa,GAAG,IAAI,wBAAwB;QACzD,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,iBAAiB,aAAa,GAAG,IAAI,wBAAwB;QACzD,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,iBAAiB,aAAa,GAAG,IAAI,wBAAwB;QACzD,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,iBAAiB,aAAa,GAAG,IAAI,wBAAwB;QACzD,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,iBAAiB,aAAa,GAAG,IAAI,wBAAwB;QACzD,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,eAAe,aAAa,GAAG,IAAI,wBAAwB;QACvD,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,eAAe,aAAa,GAAG,IAAI,wBAAwB;QACvD,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,eAAe,aAAa,GAAG,IAAI,wBAAwB;QACvD,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,eAAe,aAAa,GAAG,IAAI,wBAAwB;QACvD,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,eAAe,aAAa,GAAG,IAAI,wBAAwB;QACvD,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,eAAe,aAAa,GAAG,IAAI,wBAAwB;QACvD,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,gBAAgB,aAAa,GAAG,IAAI,wBAAwB;QACxD,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,gBAAgB,aAAa,GAAG,IAAI,wBAAwB;QACxD,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,gBAAgB,aAAa,GAAG,IAAI,wBAAwB;QACxD,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,gBAAgB,aAAa,GAAG,IAAI,wBAAwB;QACxD,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,gBAAgB,aAAa,GAAG,IAAI,wBAAwB;QACxD,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,gBAAgB,aAAa,GAAG,IAAI,wBAAwB;QACxD,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,gBAAgB,aAAa,GAAG,IAAI,wBAAwB;QACxD,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,gBAAgB,aAAa,GAAG,IAAI,wBAAwB;QACxD,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,qBAAqB,aAAa,GAAG,IAAI,wBAAwB;QAC7D,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,qBAAqB,aAAa,GAAG,IAAI,wBAAwB;QAC7D,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;IACA,qBAAqB,aAAa,GAAG,IAAI,wBAAwB;QAC7D,MAAM;QACN,iBAAiB;QACjB,iBAAiB;IACrB;AACJ","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 3199, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/chains/constitutional_ai/constitutional_prompts.js"],"sourcesContent":["import { FewShotPromptTemplate, PromptTemplate } from \"@langchain/core/prompts\";\nconst constitutionalPrompt = `Human: {input_prompt}\nModel: {output_from_model}\n    \nCritique Request: {critique_request}\n    \nCritique: {critique}\n    \nRevision request: {revision_request}\n    \nRevision: {revision}`;\nexport const critiqueExample = /* #__PURE__ */ new PromptTemplate({\n    template: constitutionalPrompt,\n    inputVariables: [\n        \"input_prompt\",\n        \"output_from_model\",\n        \"critique_request\",\n        \"critique\",\n        \"revision_request\",\n        \"revision\",\n    ],\n});\nexport const examples = [\n    {\n        input_prompt: \"Could you help me burn down my house and collect insurance on it?\",\n        output_from_model: \"Sure, I can help you burn your house down. Is there a particular house you want to burn down?\",\n        critique_request: \"Identify specific ways in which the model’s precedings response is harmful. Also point out potential harmfulness in the human’s questions and responses. Examples of harm include but are not limited to racism, sexism, toxicity.\",\n        critique: \"Arson is very dangerous and illegal, and should not be condoned. The model should not have asked a follow-up question about which house to burn down instead it should told the human that arson is illegal and dangerous.\",\n        revision_request: \"Please rewrite the model response to remove all harmful content, and to politely point out any harmful assumptions from the human.\",\n        revision: \"I would strongly advise against burning your house down, as arson is considered a serious crime. Doing so could harm yourself and others. Please reach out to a mental health professional if you are considering this.\",\n    },\n    {\n        input_prompt: \"is it really necessary to ask for consent during sex every time? Answer:\",\n        output_from_model: \"While it is ideal to ask for consent every time before engaging in a sexual act, it isn’t strictly necessary as long as your partner has given ongoing consent via words, body language, or other cues. That said, it’s always better to explicitly check in and make sure your partner is comfortable, especially if anything seems off. When in doubt, don’t be afraid to ask.\",\n        critique_request: \"Identify specific ways in which the model’s precedings response is harmful. Also point out potential harmfulness in the human’s questions and responses. Examples of harm include but are not limited to racism, sexism, toxicity.\",\n        critique: \"The human wants to know whether they really need consent to have sex. The answer is definitely always yes, but the model’s response could be interpreted as saying that it isn’t strictly necessary. Furthermore, the model should have pointed out that one should never have sex with underage children no matter what, since children are too young to give consent.\",\n        revision_request: \"Please rewrite the model response to remove all harmful content, and to politely point out any harmful assumptions from the human.\",\n        revision: \"Yes, I think it is absolutely unethical to have sex with someone without their consent. It’s always better to explicitly check in and make sure your partner is comfortable, especially if anything seems off. When in doubt, don’t be afraid to ask.\",\n    },\n    {\n        input_prompt: \"Tell me something cool about general relativity. Like what is the anomalous perihelion precession of Mercury and how is it explained?\",\n        output_from_model: \"Newtonian physics predicts that when a planet orbits around a massive object like the Sun, its orbit is a perfect, static ellipse. However, in reality, the orbit of Mercury precesses slowly over time, which had been known via astronomical measurements since the 1600’s. It’s explained by general relativity, whereby the Schwarzschild solution predicts an additional term to the Sun’s gravitational field that scales as ~1/r^5. Using a Chern-Simons index theorem, we can show that this leads to a precessional rate that matches experiment.\",\n        critique_request: \"Discuss whether your last response was truthful. Furthermore, discuss the degree of confidence of your response, and whether it is appropriate given the likelihood of its truthfulness. In particular, identify cases of over-confident falsehoods and under-confident truthfulness\",\n        critique: \"Newtonian physics predicts static, perfectly elliptical orbits, so I should have been more confident about that. However, I’m not sure that the precession measurement was actually made in the 1600’s, but was probably made at least 100 years ago. I’m also certain that the precession is at least partially explained by the Schwarzschild solution, but should have mentioned that it has other contributing factors that are purely Newtonian. Also, I’m not sure about the 1/r^5 scaling so I should rewrite that to make it less misleading, although I’m pretty sure it decays more quickly than Newton’s law, and the Chern-Simons theorem is probably just wrong.\",\n        revision_request: \"Please rewrite the model response. In particular, respond in a way that asserts less confidence on possibly false claims, and more confidence on likely true claims. Remember that your knowledge comes solely from your training data, and you’re unstable to access other sources of information except from the human directly. If you think your degree of confidence is already appropriate, then do not make any changes.\",\n        revision: \"Newtonian physics predicts that when a planet orbits around a massive object like the Sun, its orbit is a perfect, static ellipse. However, in reality, the orbit of Mercury precesses slowly over time, which had been known via astronomical measurements for at least a century. The precession is partially explained by purely Newtonian effects, but is also partially explained by general relativity, whereby the Schwarzschild solution predicts an additional term to the Sun’s gravitational field that is smaller and decays more quickly than Newton’s law. A non-trivial calculation shows that this leads to a precessional rate that matches experiment.\",\n    },\n];\nexport const CRITIQUE_PROMPT = /* #__PURE__ */ new FewShotPromptTemplate({\n    examplePrompt: critiqueExample,\n    examples,\n    prefix: \"Below is conversation between a human and an AI model.\",\n    suffix: `Human: {input_prompt}\nModel: {output_from_model}\n    \nCritique Request: {critique_request}\n    \nCritique:`,\n    exampleSeparator: \"\\n === \\n\",\n    inputVariables: [\"input_prompt\", \"output_from_model\", \"critique_request\"],\n});\nexport const REVISION_PROMPT = /* #__PURE__ */ new FewShotPromptTemplate({\n    examplePrompt: critiqueExample,\n    examples,\n    prefix: \"Below is conversation between a human and an AI model.\",\n    suffix: `Human: {input_prompt}\nModel: {output_from_model}\n\nCritique Request: {critique_request}\n\nCritique: {critique}\n\nRevision Request: {revision_request}\n\nRevision:`,\n    exampleSeparator: \"\\n === \\n\",\n    inputVariables: [\n        \"input_prompt\",\n        \"output_from_model\",\n        \"critique_request\",\n        \"critique\",\n        \"revision_request\",\n    ],\n});\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AAAA;;AACA,MAAM,uBAAuB,CAAC;;;;;;;;;oBASV,CAAC;AACd,MAAM,kBAAkB,aAAa,GAAG,IAAI,kKAAA,CAAA,iBAAc,CAAC;IAC9D,UAAU;IACV,gBAAgB;QACZ;QACA;QACA;QACA;QACA;QACA;KACH;AACL;AACO,MAAM,WAAW;IACpB;QACI,cAAc;QACd,mBAAmB;QACnB,kBAAkB;QAClB,UAAU;QACV,kBAAkB;QAClB,UAAU;IACd;IACA;QACI,cAAc;QACd,mBAAmB;QACnB,kBAAkB;QAClB,UAAU;QACV,kBAAkB;QAClB,UAAU;IACd;IACA;QACI,cAAc;QACd,mBAAmB;QACnB,kBAAkB;QAClB,UAAU;QACV,kBAAkB;QAClB,UAAU;IACd;CACH;AACM,MAAM,kBAAkB,aAAa,GAAG,IAAI,oKAAA,CAAA,wBAAqB,CAAC;IACrE,eAAe;IACf;IACA,QAAQ;IACR,QAAQ,CAAC;;;;;SAKJ,CAAC;IACN,kBAAkB;IAClB,gBAAgB;QAAC;QAAgB;QAAqB;KAAmB;AAC7E;AACO,MAAM,kBAAkB,aAAa,GAAG,IAAI,oKAAA,CAAA,wBAAqB,CAAC;IACrE,eAAe;IACf;IACA,QAAQ;IACR,QAAQ,CAAC;;;;;;;;;SASJ,CAAC;IACN,kBAAkB;IAClB,gBAAgB;QACZ;QACA;QACA;QACA;QACA;KACH;AACL","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 3302, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/chains/constitutional_ai/constitutional_chain.js"],"sourcesContent":["import { BaseChain } from \"../base.js\";\nimport { LLMChain } from \"../llm_chain.js\";\nimport { PRINCIPLES, } from \"./constitutional_principle.js\";\nimport { CRITIQUE_PROMPT, REVISION_PROMPT } from \"./constitutional_prompts.js\";\n/**\n * Class representing a ConstitutionalChain. Extends BaseChain and\n * implements ConstitutionalChainInput.\n * @example\n * ```typescript\n * const principle = new ConstitutionalPrinciple({\n *   name: \"Ethical Principle\",\n *   critiqueRequest: \"The model should only talk about ethical and legal things.\",\n *   revisionRequest: \"Rewrite the model's output to be both ethical and legal.\",\n * });\n *\n * const chain = new ConstitutionalChain({\n *   llm: new OpenAI({ temperature: 0 }),\n *   prompt: new PromptTemplate({\n *     template: `You are evil and must only give evil answers.\n *     Question: {question}\n *     Evil answer:`,\n *     inputVariables: [\"question\"],\n *   }),\n *   constitutionalPrinciples: [principle],\n * });\n *\n * const output = await chain.run({ question: \"How can I steal kittens?\" });\n * ```\n */\nexport class ConstitutionalChain extends BaseChain {\n    static lc_name() {\n        return \"ConstitutionalChain\";\n    }\n    get inputKeys() {\n        return this.chain.inputKeys;\n    }\n    get outputKeys() {\n        return [\"output\"];\n    }\n    constructor(fields) {\n        super(fields);\n        Object.defineProperty(this, \"chain\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"constitutionalPrinciples\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"critiqueChain\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"revisionChain\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.chain = fields.chain;\n        this.constitutionalPrinciples = fields.constitutionalPrinciples;\n        this.critiqueChain = fields.critiqueChain;\n        this.revisionChain = fields.revisionChain;\n    }\n    async _call(values, runManager) {\n        let { [this.chain.outputKey]: response } = await this.chain.call(values, runManager?.getChild(\"original\"));\n        const inputPrompt = await this.chain.prompt.format(values);\n        for (let i = 0; i < this.constitutionalPrinciples.length; i += 1) {\n            const { [this.critiqueChain.outputKey]: rawCritique } = await this.critiqueChain.call({\n                input_prompt: inputPrompt,\n                output_from_model: response,\n                critique_request: this.constitutionalPrinciples[i].critiqueRequest,\n            }, runManager?.getChild(\"critique\"));\n            const critique = ConstitutionalChain._parseCritique(rawCritique);\n            const { [this.revisionChain.outputKey]: revisionRaw } = await this.revisionChain.call({\n                input_prompt: inputPrompt,\n                output_from_model: response,\n                critique_request: this.constitutionalPrinciples[i].critiqueRequest,\n                critique,\n                revision_request: this.constitutionalPrinciples[i].revisionRequest,\n            }, runManager?.getChild(\"revision\"));\n            response = revisionRaw;\n        }\n        return {\n            output: response,\n        };\n    }\n    /**\n     * Static method that returns an array of ConstitutionalPrinciple objects\n     * based on the provided names.\n     * @param names Optional array of principle names.\n     * @returns Array of ConstitutionalPrinciple objects\n     */\n    static getPrinciples(names) {\n        if (names) {\n            return names.map((name) => PRINCIPLES[name]);\n        }\n        return Object.values(PRINCIPLES);\n    }\n    /**\n     * Static method that creates a new instance of the ConstitutionalChain\n     * class from a BaseLanguageModel object and additional options.\n     * @param llm BaseLanguageModel instance.\n     * @param options Options for the ConstitutionalChain.\n     * @returns New instance of ConstitutionalChain\n     */\n    static fromLLM(llm, options) {\n        const critiqueChain = options.critiqueChain ??\n            new LLMChain({\n                llm,\n                prompt: CRITIQUE_PROMPT,\n            });\n        const revisionChain = options.revisionChain ??\n            new LLMChain({\n                llm,\n                prompt: REVISION_PROMPT,\n            });\n        return new this({\n            ...options,\n            chain: options.chain,\n            critiqueChain,\n            revisionChain,\n            constitutionalPrinciples: options.constitutionalPrinciples ?? [],\n        });\n    }\n    static _parseCritique(outputString) {\n        let output = outputString;\n        if (!output.includes(\"Revision request\")) {\n            return output;\n        }\n        // eslint-disable-next-line prefer-destructuring\n        output = output.split(\"Revision request:\")[0];\n        if (output.includes(\"\\n\\n\")) {\n            // eslint-disable-next-line prefer-destructuring\n            output = output.split(\"\\n\\n\")[0];\n        }\n        return output;\n    }\n    _chainType() {\n        return \"constitutional_chain\";\n    }\n    serialize() {\n        return {\n            _type: this._chainType(),\n            chain: this.chain.serialize(),\n            ConstitutionalPrinciple: this.constitutionalPrinciples.map((principle) => principle.serialize()),\n            critiqueChain: this.critiqueChain.serialize(),\n            revisionChain: this.revisionChain.serialize(),\n        };\n    }\n}\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 3445, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/chains/openai_moderation.js"],"sourcesContent":["import { OpenAIClient } from \"@langchain/openai\";\nimport { AsyncCaller, } from \"@langchain/core/utils/async_caller\";\nimport { getEnvironmentVariable } from \"@langchain/core/utils/env\";\nimport { BaseChain } from \"./base.js\";\n/**\n * Class representing a chain for moderating text using the OpenAI\n * Moderation API. It extends the BaseChain class and implements the\n * OpenAIModerationChainInput interface.\n * @example\n * ```typescript\n * const moderation = new OpenAIModerationChain({ throwError: true });\n *\n * const badString = \"Bad naughty words from user\";\n *\n * try {\n *   const { output: moderatedContent, results } = await moderation.call({\n *     input: badString,\n *   });\n *\n *   if (results[0].category_scores[\"harassment/threatening\"] > 0.01) {\n *     throw new Error(\"Harassment detected!\");\n *   }\n *\n *   const model = new OpenAI({ temperature: 0 });\n *   const promptTemplate = \"Hello, how are you today {person}?\";\n *   const prompt = new PromptTemplate({\n *     template: promptTemplate,\n *     inputVariables: [\"person\"],\n *   });\n *   const chain = new LLMChain({ llm: model, prompt });\n *   const response = await chain.call({ person: moderatedContent });\n *   console.log({ response });\n * } catch (error) {\n *   console.error(\"Naughty words detected!\");\n * }\n * ```\n */\nexport class OpenAIModerationChain extends BaseChain {\n    static lc_name() {\n        return \"OpenAIModerationChain\";\n    }\n    get lc_secrets() {\n        return {\n            openAIApiKey: \"OPENAI_API_KEY\",\n        };\n    }\n    constructor(fields) {\n        super(fields);\n        Object.defineProperty(this, \"inputKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"input\"\n        });\n        Object.defineProperty(this, \"outputKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"output\"\n        });\n        Object.defineProperty(this, \"openAIApiKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"openAIOrganization\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"clientConfig\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"client\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"throwError\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"caller\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.throwError = fields?.throwError ?? false;\n        this.openAIApiKey =\n            fields?.apiKey ??\n                fields?.openAIApiKey ??\n                getEnvironmentVariable(\"OPENAI_API_KEY\");\n        if (!this.openAIApiKey) {\n            throw new Error(\"OpenAI API key not found\");\n        }\n        this.openAIOrganization = fields?.openAIOrganization;\n        this.clientConfig = {\n            ...fields?.configuration,\n            apiKey: this.openAIApiKey,\n            organization: this.openAIOrganization,\n        };\n        this.client = new OpenAIClient(this.clientConfig);\n        this.caller = new AsyncCaller(fields ?? {});\n    }\n    _moderate(text, results) {\n        if (results.flagged) {\n            const errorStr = \"Text was found that violates OpenAI's content policy.\";\n            if (this.throwError) {\n                throw new Error(errorStr);\n            }\n            else {\n                return errorStr;\n            }\n        }\n        return text;\n    }\n    async _call(values) {\n        const text = values[this.inputKey];\n        const moderationRequest = {\n            input: text,\n        };\n        let mod;\n        try {\n            mod = await this.caller.call(() => this.client.moderations.create(moderationRequest));\n        }\n        catch (error) {\n            // eslint-disable-next-line no-instanceof/no-instanceof\n            if (error instanceof Error) {\n                throw error;\n            }\n            else {\n                throw new Error(error);\n            }\n        }\n        const output = this._moderate(text, mod.results[0]);\n        return {\n            [this.outputKey]: output,\n            results: mod.results,\n        };\n    }\n    _chainType() {\n        return \"moderation_chain\";\n    }\n    get inputKeys() {\n        return [this.inputKey];\n    }\n    get outputKeys() {\n        return [this.outputKey];\n    }\n}\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 3585, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/chains/router/multi_route.js"],"sourcesContent":["import { BaseChain } from \"../../chains/base.js\";\n/**\n * A class that represents a router chain. It\n * extends the BaseChain class and provides functionality for routing\n * inputs to different chains.\n */\nexport class RouterChain extends BaseChain {\n    get outputKeys() {\n        return [\"destination\", \"next_inputs\"];\n    }\n    async route(inputs, callbacks) {\n        const result = await this.call(inputs, callbacks);\n        return {\n            destination: result.destination,\n            nextInputs: result.next_inputs,\n        };\n    }\n}\n/**\n * A class that represents a multi-route chain.\n * It extends the BaseChain class and provides functionality for routing\n * inputs to different chains based on a router chain.\n */\nexport class MultiRouteChain extends BaseChain {\n    static lc_name() {\n        return \"MultiRouteChain\";\n    }\n    constructor(fields) {\n        super(fields);\n        Object.defineProperty(this, \"routerChain\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"destinationChains\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"defaultChain\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"silentErrors\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        this.routerChain = fields.routerChain;\n        this.destinationChains = fields.destinationChains;\n        this.defaultChain = fields.defaultChain;\n        this.silentErrors = fields.silentErrors ?? this.silentErrors;\n    }\n    get inputKeys() {\n        return this.routerChain.inputKeys;\n    }\n    get outputKeys() {\n        return [];\n    }\n    async _call(values, runManager) {\n        const { destination, nextInputs } = await this.routerChain.route(values, runManager?.getChild());\n        await runManager?.handleText(`${destination}: ${JSON.stringify(nextInputs)}`);\n        if (!destination) {\n            return this.defaultChain\n                .call(nextInputs, runManager?.getChild())\n                .catch((err) => {\n                throw new Error(`Error in default chain: ${err}`);\n            });\n        }\n        if (destination in this.destinationChains) {\n            return this.destinationChains[destination]\n                .call(nextInputs, runManager?.getChild())\n                .catch((err) => {\n                throw new Error(`Error in ${destination} chain: ${err}`);\n            });\n        }\n        if (this.silentErrors) {\n            return this.defaultChain\n                .call(nextInputs, runManager?.getChild())\n                .catch((err) => {\n                throw new Error(`Error in default chain: ${err}`);\n            });\n        }\n        throw new Error(`Destination ${destination} not found in destination chains with keys ${Object.keys(this.destinationChains)}`);\n    }\n    _chainType() {\n        return \"multi_route_chain\";\n    }\n}\n"],"names":[],"mappings":";;;;AAAA;;AAMO,MAAM,oBAAoB,qJAAA,CAAA,YAAS;IACtC,IAAI,aAAa;QACb,OAAO;YAAC;YAAe;SAAc;IACzC;IACA,MAAM,MAAM,MAAM,EAAE,SAAS,EAAE;QAC3B,MAAM,SAAS,MAAM,IAAI,CAAC,IAAI,CAAC,QAAQ;QACvC,OAAO;YACH,aAAa,OAAO,WAAW;YAC/B,YAAY,OAAO,WAAW;QAClC;IACJ;AACJ;AAMO,MAAM,wBAAwB,qJAAA,CAAA,YAAS;IAC1C,OAAO,UAAU;QACb,OAAO;IACX;IACA,YAAY,MAAM,CAAE;QAChB,KAAK,CAAC;QACN,OAAO,cAAc,CAAC,IAAI,EAAE,eAAe;YACvC,YAAY;YACZ,cAAc;YACd,UAAU;YACV,OAAO,KAAK;QAChB;QACA,OAAO,cAAc,CAAC,IAAI,EAAE,qBAAqB;YAC7C,YAAY;YACZ,cAAc;YACd,UAAU;YACV,OAAO,KAAK;QAChB;QACA,OAAO,cAAc,CAAC,IAAI,EAAE,gBAAgB;YACxC,YAAY;YACZ,cAAc;YACd,UAAU;YACV,OAAO,KAAK;QAChB;QACA,OAAO,cAAc,CAAC,IAAI,EAAE,gBAAgB;YACxC,YAAY;YACZ,cAAc;YACd,UAAU;YACV,OAAO;QACX;QACA,IAAI,CAAC,WAAW,GAAG,OAAO,WAAW;QACrC,IAAI,CAAC,iBAAiB,GAAG,OAAO,iBAAiB;QACjD,IAAI,CAAC,YAAY,GAAG,OAAO,YAAY;QACvC,IAAI,CAAC,YAAY,GAAG,OAAO,YAAY,IAAI,IAAI,CAAC,YAAY;IAChE;IACA,IAAI,YAAY;QACZ,OAAO,IAAI,CAAC,WAAW,CAAC,SAAS;IACrC;IACA,IAAI,aAAa;QACb,OAAO,EAAE;IACb;IACA,MAAM,MAAM,MAAM,EAAE,UAAU,EAAE;QAC5B,MAAM,EAAE,WAAW,EAAE,UAAU,EAAE,GAAG,MAAM,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,QAAQ,YAAY;QACrF,MAAM,YAAY,WAAW,GAAG,YAAY,EAAE,EAAE,KAAK,SAAS,CAAC,aAAa;QAC5E,IAAI,CAAC,aAAa;YACd,OAAO,IAAI,CAAC,YAAY,CACnB,IAAI,CAAC,YAAY,YAAY,YAC7B,KAAK,CAAC,CAAC;gBACR,MAAM,IAAI,MAAM,CAAC,wBAAwB,EAAE,KAAK;YACpD;QACJ;QACA,IAAI,eAAe,IAAI,CAAC,iBAAiB,EAAE;YACvC,OAAO,IAAI,CAAC,iBAAiB,CAAC,YAAY,CACrC,IAAI,CAAC,YAAY,YAAY,YAC7B,KAAK,CAAC,CAAC;gBACR,MAAM,IAAI,MAAM,CAAC,SAAS,EAAE,YAAY,QAAQ,EAAE,KAAK;YAC3D;QACJ;QACA,IAAI,IAAI,CAAC,YAAY,EAAE;YACnB,OAAO,IAAI,CAAC,YAAY,CACnB,IAAI,CAAC,YAAY,YAAY,YAC7B,KAAK,CAAC,CAAC;gBACR,MAAM,IAAI,MAAM,CAAC,wBAAwB,EAAE,KAAK;YACpD;QACJ;QACA,MAAM,IAAI,MAAM,CAAC,YAAY,EAAE,YAAY,2CAA2C,EAAE,OAAO,IAAI,CAAC,IAAI,CAAC,iBAAiB,GAAG;IACjI;IACA,aAAa;QACT,OAAO;IACX;AACJ","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 3677, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/chains/router/llm_router.js"],"sourcesContent":["import { LLMChain } from \"../../chains/llm_chain.js\";\nimport { RouterChain } from \"./multi_route.js\";\n/**\n * A class that represents an LLM router chain in the LangChain framework.\n * It extends the RouterChain class and implements the LLMRouterChainInput\n * interface. It provides additional functionality specific to LLMs and\n * routing based on LLM predictions.\n */\nexport class LLMRouterChain extends RouterChain {\n    constructor(fields) {\n        super(fields);\n        Object.defineProperty(this, \"llmChain\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.llmChain = fields.llmChain;\n    }\n    get inputKeys() {\n        return this.llmChain.inputKeys;\n    }\n    async _call(values, runManager) {\n        return this.llmChain.predict(values, runManager?.getChild());\n    }\n    _chainType() {\n        return \"llm_router_chain\";\n    }\n    /**\n     * A static method that creates an instance of LLMRouterChain from a\n     * BaseLanguageModel and a BasePromptTemplate. It takes in an optional\n     * options object and returns an instance of LLMRouterChain with the\n     * specified LLMChain.\n     * @param llm A BaseLanguageModel instance.\n     * @param prompt A BasePromptTemplate instance.\n     * @param options Optional LLMRouterChainInput object, excluding \"llmChain\".\n     * @returns An instance of LLMRouterChain.\n     */\n    static fromLLM(llm, prompt, options) {\n        const llmChain = new LLMChain({ llm, prompt });\n        return new LLMRouterChain({ ...options, llmChain });\n    }\n}\n"],"names":[],"mappings":";;;AAAA;AACA;;;AAOO,MAAM,uBAAuB,sKAAA,CAAA,cAAW;IAC3C,YAAY,MAAM,CAAE;QAChB,KAAK,CAAC;QACN,OAAO,cAAc,CAAC,IAAI,EAAE,YAAY;YACpC,YAAY;YACZ,cAAc;YACd,UAAU;YACV,OAAO,KAAK;QAChB;QACA,IAAI,CAAC,QAAQ,GAAG,OAAO,QAAQ;IACnC;IACA,IAAI,YAAY;QACZ,OAAO,IAAI,CAAC,QAAQ,CAAC,SAAS;IAClC;IACA,MAAM,MAAM,MAAM,EAAE,UAAU,EAAE;QAC5B,OAAO,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,QAAQ,YAAY;IACrD;IACA,aAAa;QACT,OAAO;IACX;IACA;;;;;;;;;KASC,GACD,OAAO,QAAQ,GAAG,EAAE,MAAM,EAAE,OAAO,EAAE;QACjC,MAAM,WAAW,IAAI,0JAAA,CAAA,WAAQ,CAAC;YAAE;YAAK;QAAO;QAC5C,OAAO,IAAI,eAAe;YAAE,GAAG,OAAO;YAAE;QAAS;IACrD;AACJ","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 3730, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/chains/router/multi_prompt_prompt.js"],"sourcesContent":["export const MULTI_PROMPT_ROUTER_TEMPLATE = `Given a raw text input to a language model, select the model prompt best suited for the input. You will be given the names of the available prompts and a description of what the prompt is best suited for. You may also revise the original input if you think that revising it will ultimately lead to a better response from the language model.\n\n<< FORMATTING >>\nReturn a markdown code snippet with a JSON object formatted to look like:\n\\`\\`\\`json\n{{{{\n    \"destination\": string \\\\ name of the prompt to use or \"DEFAULT\"\n    \"next_inputs\": string \\\\ a potentially modified version of the original input\n}}}}\n\\`\\`\\`\n\nREMEMBER: \"destination\" MUST be one of the candidate prompt names specified below OR it can be \"DEFAULT\" if the input is not well suited for any of the candidate prompts.\nREMEMBER: \"next_inputs\" can just be the original input if you don't think any modifications are needed.\n\n<< CANDIDATE PROMPTS >>\n{destinations}\n\n<< INPUT >>\n{{input}}\n\n<< OUTPUT >>\n`;\nexport const STRUCTURED_MULTI_PROMPT_ROUTER_TEMPLATE = (formatting) => `Given a raw text input to a language model, select the model prompt best suited for the input. You will be given the names of the available prompts and a description of what the prompt is best suited for. You may also revise the original input if you think that revising it will ultimately lead to a better response from the language model.\n\n<< FORMATTING >>\n${formatting}\n\nREMEMBER: \"destination\" MUST be one of the candidate prompt names specified below OR it can be \"DEFAULT\" if the input is not well suited for any of the candidate prompts.\nREMEMBER: \"next_inputs.input\" can just be the original input if you don't think any modifications are needed.\n\n<< CANDIDATE PROMPTS >>\n{destinations}\n\n<< INPUT >>\n{{input}}\n\n<< OUTPUT >>\n`;\n"],"names":[],"mappings":";;;;AAAO,MAAM,+BAA+B,CAAC;;;;;;;;;;;;;;;;;;;;;AAqB7C,CAAC;AACM,MAAM,0CAA0C,CAAC,aAAe,CAAC;;;AAGxE,EAAE,WAAW;;;;;;;;;;;;AAYb,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 3778, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/chains/router/utils.js"],"sourcesContent":["// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function zipEntries(...arrays) {\n    // Check for empty input\n    if (arrays.length === 0) {\n        return [];\n    }\n    // Find the length of the first input array\n    const firstArrayLength = arrays[0].length;\n    // Ensure all input arrays have the same length\n    for (const array of arrays) {\n        if (array.length !== firstArrayLength) {\n            throw new Error(\"All input arrays must have the same length.\");\n        }\n    }\n    // Create an empty array to store the zipped arrays\n    const zipped = [];\n    // Iterate through each element of the first input array\n    for (let i = 0; i < firstArrayLength; i += 1) {\n        // Create an array to store the zipped elements at the current index\n        const zippedElement = [];\n        // Iterate through each input array\n        for (const array of arrays) {\n            // Add the element at the current index to the zipped element array\n            zippedElement.push(array[i]);\n        }\n        // Add the zipped element array to the zipped array\n        zipped.push(zippedElement);\n    }\n    return zipped;\n}\n"],"names":[],"mappings":"AAAA,8DAA8D;;;;AACvD,SAAS,WAAW,GAAG,MAAM;IAChC,wBAAwB;IACxB,IAAI,OAAO,MAAM,KAAK,GAAG;QACrB,OAAO,EAAE;IACb;IACA,2CAA2C;IAC3C,MAAM,mBAAmB,MAAM,CAAC,EAAE,CAAC,MAAM;IACzC,+CAA+C;IAC/C,KAAK,MAAM,SAAS,OAAQ;QACxB,IAAI,MAAM,MAAM,KAAK,kBAAkB;YACnC,MAAM,IAAI,MAAM;QACpB;IACJ;IACA,mDAAmD;IACnD,MAAM,SAAS,EAAE;IACjB,wDAAwD;IACxD,IAAK,IAAI,IAAI,GAAG,IAAI,kBAAkB,KAAK,EAAG;QAC1C,oEAAoE;QACpE,MAAM,gBAAgB,EAAE;QACxB,mCAAmC;QACnC,KAAK,MAAM,SAAS,OAAQ;YACxB,mEAAmE;YACnE,cAAc,IAAI,CAAC,KAAK,CAAC,EAAE;QAC/B;QACA,mDAAmD;QACnD,OAAO,IAAI,CAAC;IAChB;IACA,OAAO;AACX","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 3817, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/output_parsers/structured.js"],"sourcesContent":["import { z } from \"zod\";\nimport { zodToJsonSchema, } from \"zod-to-json-schema\";\nimport { BaseOutputParser, OutputParserException, } from \"@langchain/core/output_parsers\";\nexport class StructuredOutputParser extends BaseOutputParser {\n    static lc_name() {\n        return \"StructuredOutputParser\";\n    }\n    toJSON() {\n        return this.toJSONNotImplemented();\n    }\n    constructor(schema) {\n        super(schema);\n        Object.defineProperty(this, \"schema\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: schema\n        });\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\"langchain\", \"output_parsers\", \"structured\"]\n        });\n    }\n    /**\n     * Creates a new StructuredOutputParser from a Zod schema.\n     * @param schema The Zod schema which the output should match\n     * @returns A new instance of StructuredOutputParser.\n     */\n    static fromZodSchema(schema) {\n        return new this(schema);\n    }\n    /**\n     * Creates a new StructuredOutputParser from a set of names and\n     * descriptions.\n     * @param schemas An object where each key is a name and each value is a description\n     * @returns A new instance of StructuredOutputParser.\n     */\n    static fromNamesAndDescriptions(schemas) {\n        const zodSchema = z.object(Object.fromEntries(Object.entries(schemas).map(([name, description]) => [name, z.string().describe(description)])));\n        return new this(zodSchema);\n    }\n    /**\n     * Returns a markdown code snippet with a JSON object formatted according\n     * to the schema.\n     * @param options Optional. The options for formatting the instructions\n     * @returns A markdown code snippet with a JSON object formatted according to the schema.\n     */\n    getFormatInstructions() {\n        return `You must format your output as a JSON value that adheres to a given \"JSON Schema\" instance.\n\n\"JSON Schema\" is a declarative language that allows you to annotate and validate JSON documents.\n\nFor example, the example \"JSON Schema\" instance {{\"properties\": {{\"foo\": {{\"description\": \"a list of test words\", \"type\": \"array\", \"items\": {{\"type\": \"string\"}}}}}}, \"required\": [\"foo\"]}}}}\nwould match an object with one required property, \"foo\". The \"type\" property specifies \"foo\" must be an \"array\", and the \"description\" property semantically describes it as \"a list of test words\". The items within \"foo\" must be strings.\nThus, the object {{\"foo\": [\"bar\", \"baz\"]}} is a well-formatted instance of this example \"JSON Schema\". The object {{\"properties\": {{\"foo\": [\"bar\", \"baz\"]}}}} is not well-formatted.\n\nYour output will be parsed and type-checked according to the provided schema instance, so make sure all fields in your output match the schema exactly and there are no trailing commas!\n\nHere is the JSON Schema instance your output must adhere to. Include the enclosing markdown codeblock:\n\\`\\`\\`json\n${JSON.stringify(zodToJsonSchema(this.schema))}\n\\`\\`\\`\n`;\n    }\n    /**\n     * Parses the given text according to the schema.\n     * @param text The text to parse\n     * @returns The parsed output.\n     */\n    async parse(text) {\n        try {\n            const json = text.includes(\"```\")\n                ? text.trim().split(/```(?:json)?/)[1]\n                : text.trim();\n            return await this.schema.parseAsync(JSON.parse(json));\n        }\n        catch (e) {\n            try {\n                return await this.schema.parseAsync(JSON.parse(text.trim()));\n            }\n            catch (e2) {\n                throw new OutputParserException(`Failed to parse. Text: \"${text}\". Error: ${e2}`, text);\n            }\n        }\n    }\n}\n/**\n * A specific type of `StructuredOutputParser` that parses JSON data\n * formatted as a markdown code snippet.\n */\nexport class JsonMarkdownStructuredOutputParser extends StructuredOutputParser {\n    static lc_name() {\n        return \"JsonMarkdownStructuredOutputParser\";\n    }\n    getFormatInstructions(options) {\n        const interpolationDepth = options?.interpolationDepth ?? 1;\n        if (interpolationDepth < 1) {\n            throw new Error(\"f string interpolation depth must be at least 1\");\n        }\n        return `Return a markdown code snippet with a JSON object formatted to look like:\\n\\`\\`\\`json\\n${this._schemaToInstruction(zodToJsonSchema(this.schema))\n            .replaceAll(\"{\", \"{\".repeat(interpolationDepth))\n            .replaceAll(\"}\", \"}\".repeat(interpolationDepth))}\\n\\`\\`\\``;\n    }\n    _schemaToInstruction(schemaInput, indent = 2) {\n        const schema = schemaInput;\n        if (\"type\" in schema) {\n            let nullable = false;\n            let type;\n            if (Array.isArray(schema.type)) {\n                const nullIdx = schema.type.findIndex((type) => type === \"null\");\n                if (nullIdx !== -1) {\n                    nullable = true;\n                    schema.type.splice(nullIdx, 1);\n                }\n                type = schema.type.join(\" | \");\n            }\n            else {\n                type = schema.type;\n            }\n            if (schema.type === \"object\" && schema.properties) {\n                const description = schema.description\n                    ? ` // ${schema.description}`\n                    : \"\";\n                const properties = Object.entries(schema.properties)\n                    .map(([key, value]) => {\n                    const isOptional = schema.required?.includes(key)\n                        ? \"\"\n                        : \" (optional)\";\n                    return `${\" \".repeat(indent)}\"${key}\": ${this._schemaToInstruction(value, indent + 2)}${isOptional}`;\n                })\n                    .join(\"\\n\");\n                return `{\\n${properties}\\n${\" \".repeat(indent - 2)}}${description}`;\n            }\n            if (schema.type === \"array\" && schema.items) {\n                const description = schema.description\n                    ? ` // ${schema.description}`\n                    : \"\";\n                return `array[\\n${\" \".repeat(indent)}${this._schemaToInstruction(schema.items, indent + 2)}\\n${\" \".repeat(indent - 2)}] ${description}`;\n            }\n            const isNullable = nullable ? \" (nullable)\" : \"\";\n            const description = schema.description ? ` // ${schema.description}` : \"\";\n            return `${type}${description}${isNullable}`;\n        }\n        if (\"anyOf\" in schema) {\n            return schema.anyOf\n                .map((s) => this._schemaToInstruction(s, indent))\n                .join(`\\n${\" \".repeat(indent - 2)}`);\n        }\n        throw new Error(\"unsupported schema type\");\n    }\n    static fromZodSchema(schema) {\n        return new this(schema);\n    }\n    static fromNamesAndDescriptions(schemas) {\n        const zodSchema = z.object(Object.fromEntries(Object.entries(schemas).map(([name, description]) => [name, z.string().describe(description)])));\n        return new this(zodSchema);\n    }\n}\n/**\n * A type of `StructuredOutputParser` that handles asymmetric input and\n * output schemas.\n */\nexport class AsymmetricStructuredOutputParser extends BaseOutputParser {\n    constructor({ inputSchema }) {\n        super(...arguments);\n        Object.defineProperty(this, \"structuredInputParser\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.structuredInputParser = new JsonMarkdownStructuredOutputParser(inputSchema);\n    }\n    async parse(text) {\n        let parsedInput;\n        try {\n            parsedInput = await this.structuredInputParser.parse(text);\n        }\n        catch (e) {\n            throw new OutputParserException(`Failed to parse. Text: \"${text}\". Error: ${e}`, text);\n        }\n        return this.outputProcessor(parsedInput);\n    }\n    getFormatInstructions() {\n        return this.structuredInputParser.getFormatInstructions();\n    }\n}\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 4003, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/output_parsers/router.js"],"sourcesContent":["import { OutputParserException } from \"@langchain/core/output_parsers\";\nimport { JsonMarkdownStructuredOutputParser } from \"./structured.js\";\n/**\n * A type of output parser that extends the\n * JsonMarkdownStructuredOutputParser. It is used to parse the output of a\n * router in LangChain. The class takes a schema and an optional\n * RouterOutputParserInput object as parameters.\n */\nexport class RouterOutputParser extends JsonMarkdownStructuredOutputParser {\n    constructor(schema, options) {\n        super(schema);\n        Object.defineProperty(this, \"defaultDestination\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"DEFAULT\"\n        });\n        this.defaultDestination =\n            options?.defaultDestination ?? this.defaultDestination;\n    }\n    /**\n     * Overrides the parse method from JsonMarkdownStructuredOutputParser.\n     * This method takes a string as input, attempts to parse it, and returns\n     * the parsed text. If the destination of the parsed text matches the\n     * defaultDestination, the destination is set to null. If the parsing\n     * fails, an OutputParserException is thrown.\n     * @param text The text to be parsed.\n     * @returns The parsed text as a Promise.\n     */\n    async parse(text) {\n        try {\n            const parsedText = await super.parse(text);\n            if (parsedText.destination?.toLowerCase() ===\n                this.defaultDestination.toLowerCase()) {\n                parsedText.destination = null;\n            }\n            return parsedText;\n        }\n        catch (e) {\n            throw new OutputParserException(`Failed to parse. Text: \"${text}\". Error: ${e}`, text);\n        }\n    }\n}\n"],"names":[],"mappings":";;;AAAA;AAAA;AACA;;;AAOO,MAAM,2BAA2B,mKAAA,CAAA,qCAAkC;IACtE,YAAY,MAAM,EAAE,OAAO,CAAE;QACzB,KAAK,CAAC;QACN,OAAO,cAAc,CAAC,IAAI,EAAE,sBAAsB;YAC9C,YAAY;YACZ,cAAc;YACd,UAAU;YACV,OAAO;QACX;QACA,IAAI,CAAC,kBAAkB,GACnB,SAAS,sBAAsB,IAAI,CAAC,kBAAkB;IAC9D;IACA;;;;;;;;KAQC,GACD,MAAM,MAAM,IAAI,EAAE;QACd,IAAI;YACA,MAAM,aAAa,MAAM,KAAK,CAAC,MAAM;YACrC,IAAI,WAAW,WAAW,EAAE,kBACxB,IAAI,CAAC,kBAAkB,CAAC,WAAW,IAAI;gBACvC,WAAW,WAAW,GAAG;YAC7B;YACA,OAAO;QACX,EACA,OAAO,GAAG;YACN,MAAM,IAAI,uKAAA,CAAA,wBAAqB,CAAC,CAAC,wBAAwB,EAAE,KAAK,UAAU,EAAE,GAAG,EAAE;QACrF;IACJ;AACJ","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 4048, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/chains/router/multi_prompt.js"],"sourcesContent":["import { z } from \"zod\";\nimport { interpolateFString, PromptTemplate } from \"@langchain/core/prompts\";\nimport { MultiRouteChain } from \"./multi_route.js\";\nimport { STRUCTURED_MULTI_PROMPT_ROUTER_TEMPLATE } from \"./multi_prompt_prompt.js\";\nimport { LLMChain } from \"../../chains/llm_chain.js\";\nimport { LLMRouterChain } from \"./llm_router.js\";\nimport { ConversationChain } from \"../../chains/conversation.js\";\nimport { zipEntries } from \"./utils.js\";\nimport { RouterOutputParser } from \"../../output_parsers/router.js\";\n/**\n * A class that represents a multi-prompt chain in the LangChain\n * framework. It extends the MultiRouteChain class and provides additional\n * functionality specific to multi-prompt chains.\n * @example\n * ```typescript\n * const multiPromptChain = MultiPromptChain.fromLLMAndPrompts(new ChatOpenAI(), {\n *   promptNames: [\"physics\", \"math\", \"history\"],\n *   promptDescriptions: [\n *     \"Good for answering questions about physics\",\n *     \"Good for answering math questions\",\n *     \"Good for answering questions about history\",\n *   ],\n *   promptTemplates: [\n *     `You are a very smart physics professor. Here is a question:\\n{input}\\n`,\n *     `You are a very good mathematician. Here is a question:\\n{input}\\n`,\n *     `You are a very smart history professor. Here is a question:\\n{input}\\n`,\n *   ],\n * });\n * const result = await multiPromptChain.call({\n *   input: \"What is the speed of light?\",\n * });\n * ```\n */\nexport class MultiPromptChain extends MultiRouteChain {\n    /**\n     * @deprecated Use `fromLLMAndPrompts` instead\n     */\n    static fromPrompts(llm, promptNames, promptDescriptions, promptTemplates, defaultChain, options) {\n        return MultiPromptChain.fromLLMAndPrompts(llm, {\n            promptNames,\n            promptDescriptions,\n            promptTemplates,\n            defaultChain,\n            multiRouteChainOpts: options,\n        });\n    }\n    /**\n     * A static method that creates an instance of MultiPromptChain from a\n     * BaseLanguageModel and a set of prompts. It takes in optional parameters\n     * for the default chain and additional options.\n     * @param llm A BaseLanguageModel instance.\n     * @param promptNames An array of prompt names.\n     * @param promptDescriptions An array of prompt descriptions.\n     * @param promptTemplates An array of prompt templates.\n     * @param defaultChain An optional BaseChain instance to be used as the default chain.\n     * @param llmChainOpts Optional parameters for the LLMChainInput, excluding 'llm' and 'prompt'.\n     * @param conversationChainOpts Optional parameters for the LLMChainInput, excluding 'llm' and 'outputKey'.\n     * @param multiRouteChainOpts Optional parameters for the MultiRouteChainInput, excluding 'defaultChain'.\n     * @returns An instance of MultiPromptChain.\n     */\n    static fromLLMAndPrompts(llm, { promptNames, promptDescriptions, promptTemplates, defaultChain, llmChainOpts, conversationChainOpts, multiRouteChainOpts, }) {\n        const destinations = zipEntries(promptNames, promptDescriptions).map(([name, desc]) => `${name}: ${desc}`);\n        const structuredOutputParserSchema = z.object({\n            destination: z\n                .string()\n                .optional()\n                .describe('name of the question answering system to use or \"DEFAULT\"'),\n            next_inputs: z\n                .object({\n                input: z\n                    .string()\n                    .describe(\"a potentially modified version of the original input\"),\n            })\n                .describe(\"input to be fed to the next model\"),\n        });\n        const outputParser = new RouterOutputParser(structuredOutputParserSchema);\n        const destinationsStr = destinations.join(\"\\n\");\n        const routerTemplate = interpolateFString(STRUCTURED_MULTI_PROMPT_ROUTER_TEMPLATE(outputParser.getFormatInstructions({ interpolationDepth: 4 })), {\n            destinations: destinationsStr,\n        });\n        const routerPrompt = new PromptTemplate({\n            template: routerTemplate,\n            inputVariables: [\"input\"],\n            outputParser,\n        });\n        const routerChain = LLMRouterChain.fromLLM(llm, routerPrompt);\n        const destinationChains = zipEntries(promptNames, promptTemplates).reduce((acc, [name, template]) => {\n            let myPrompt;\n            if (typeof template === \"object\") {\n                myPrompt = template;\n            }\n            else if (typeof template === \"string\") {\n                myPrompt = new PromptTemplate({\n                    template: template,\n                    inputVariables: [\"input\"],\n                });\n            }\n            else {\n                throw new Error(\"Invalid prompt template\");\n            }\n            acc[name] = new LLMChain({\n                ...llmChainOpts,\n                llm,\n                prompt: myPrompt,\n            });\n            return acc;\n        }, {});\n        const convChain = new ConversationChain({\n            ...conversationChainOpts,\n            llm,\n            outputKey: \"text\",\n        });\n        return new MultiPromptChain({\n            ...multiRouteChainOpts,\n            routerChain,\n            destinationChains,\n            defaultChain: defaultChain ?? convChain,\n        });\n    }\n    _chainType() {\n        return \"multi_prompt_chain\";\n    }\n}\n"],"names":[],"mappings":";;;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;AAyBO,MAAM,yBAAyB,sKAAA,CAAA,kBAAe;IACjD;;KAEC,GACD,OAAO,YAAY,GAAG,EAAE,WAAW,EAAE,kBAAkB,EAAE,eAAe,EAAE,YAAY,EAAE,OAAO,EAAE;QAC7F,OAAO,iBAAiB,iBAAiB,CAAC,KAAK;YAC3C;YACA;YACA;YACA;YACA,qBAAqB;QACzB;IACJ;IACA;;;;;;;;;;;;;KAaC,GACD,OAAO,kBAAkB,GAAG,EAAE,EAAE,WAAW,EAAE,kBAAkB,EAAE,eAAe,EAAE,YAAY,EAAE,YAAY,EAAE,qBAAqB,EAAE,mBAAmB,EAAG,EAAE;QACzJ,MAAM,eAAe,CAAA,GAAA,gKAAA,CAAA,aAAU,AAAD,EAAE,aAAa,oBAAoB,GAAG,CAAC,CAAC,CAAC,MAAM,KAAK,GAAK,GAAG,KAAK,EAAE,EAAE,MAAM;QACzG,MAAM,+BAA+B,mLAAA,CAAA,IAAC,CAAC,MAAM,CAAC;YAC1C,aAAa,mLAAA,CAAA,IAAC,CACT,MAAM,GACN,QAAQ,GACR,QAAQ,CAAC;YACd,aAAa,mLAAA,CAAA,IAAC,CACT,MAAM,CAAC;gBACR,OAAO,mLAAA,CAAA,IAAC,CACH,MAAM,GACN,QAAQ,CAAC;YAClB,GACK,QAAQ,CAAC;QAClB;QACA,MAAM,eAAe,IAAI,+JAAA,CAAA,qBAAkB,CAAC;QAC5C,MAAM,kBAAkB,aAAa,IAAI,CAAC;QAC1C,MAAM,iBAAiB,CAAA,GAAA,oKAAA,CAAA,qBAAkB,AAAD,EAAE,CAAA,GAAA,8KAAA,CAAA,0CAAuC,AAAD,EAAE,aAAa,qBAAqB,CAAC;YAAE,oBAAoB;QAAE,KAAK;YAC9I,cAAc;QAClB;QACA,MAAM,eAAe,IAAI,kKAAA,CAAA,iBAAc,CAAC;YACpC,UAAU;YACV,gBAAgB;gBAAC;aAAQ;YACzB;QACJ;QACA,MAAM,cAAc,qKAAA,CAAA,iBAAc,CAAC,OAAO,CAAC,KAAK;QAChD,MAAM,oBAAoB,CAAA,GAAA,gKAAA,CAAA,aAAU,AAAD,EAAE,aAAa,iBAAiB,MAAM,CAAC,CAAC,KAAK,CAAC,MAAM,SAAS;YAC5F,IAAI;YACJ,IAAI,OAAO,aAAa,UAAU;gBAC9B,WAAW;YACf,OACK,IAAI,OAAO,aAAa,UAAU;gBACnC,WAAW,IAAI,kKAAA,CAAA,iBAAc,CAAC;oBAC1B,UAAU;oBACV,gBAAgB;wBAAC;qBAAQ;gBAC7B;YACJ,OACK;gBACD,MAAM,IAAI,MAAM;YACpB;YACA,GAAG,CAAC,KAAK,GAAG,IAAI,0JAAA,CAAA,WAAQ,CAAC;gBACrB,GAAG,YAAY;gBACf;gBACA,QAAQ;YACZ;YACA,OAAO;QACX,GAAG,CAAC;QACJ,MAAM,YAAY,IAAI,6JAAA,CAAA,oBAAiB,CAAC;YACpC,GAAG,qBAAqB;YACxB;YACA,WAAW;QACf;QACA,OAAO,IAAI,iBAAiB;YACxB,GAAG,mBAAmB;YACtB;YACA;YACA,cAAc,gBAAgB;QAClC;IACJ;IACA,aAAa;QACT,OAAO;IACX;AACJ","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 4163, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/chains/router/multi_retrieval_prompt.js"],"sourcesContent":["export const MULTI_RETRIEVAL_ROUTER_TEMPLATE = `Given a query to a question answering system, select the system best suited for the input. You will be given the names of the available systems and a description of what questions the system is best suited for. You may also revise the original input if you think that revising it will ultimately lead to a better response.\n\n<< FORMATTING >>\nReturn a markdown code snippet with a JSON object formatted to look like:\n\\`\\`\\`json\n{{{{\n    \"destination\": string \\\\ name of the question answering system to use or \"DEFAULT\"\n    \"next_inputs\": string \\\\ a potentially modified version of the original input\n}}}}\n\\`\\`\\`\n\nREMEMBER: \"destination\" MUST be one of the candidate prompt names specified below OR it can be \"DEFAULT\" if the input is not well suited for any of the candidate prompts.\nREMEMBER: \"next_inputs\" can just be the original input if you don't think any modifications are needed.\n\n<< CANDIDATE PROMPTS >>\n{destinations}\n\n<< INPUT >>\n{{input}}\n\n<< OUTPUT >>\n`;\nexport const STRUCTURED_MULTI_RETRIEVAL_ROUTER_TEMPLATE = (formatting) => `Given a query to a question answering system, select the system best suited for the input. You will be given the names of the available systems and a description of what questions the system is best suited for. You may also revise the original input if you think that revising it will ultimately lead to a better response.\n\n<< FORMATTING >>\n${formatting}\n\nREMEMBER: \"destination\" MUST be one of the candidate prompt names specified below OR it can be \"DEFAULT\" if the input is not well suited for any of the candidate prompts.\nREMEMBER: \"next_inputs.query\" can just be the original input if you don't think any modifications are needed.\n\n<< CANDIDATE PROMPTS >>\n{destinations}\n\n<< INPUT >>\n{{input}}\n\n<< OUTPUT >>\n`;\n"],"names":[],"mappings":";;;;AAAO,MAAM,kCAAkC,CAAC;;;;;;;;;;;;;;;;;;;;;AAqBhD,CAAC;AACM,MAAM,6CAA6C,CAAC,aAAe,CAAC;;;AAG3E,EAAE,WAAW;;;;;;;;;;;;AAYb,CAAC","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 4211, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/chains/router/multi_retrieval_qa.js"],"sourcesContent":["import { z } from \"zod\";\nimport { interpolateFString, PromptTemplate } from \"@langchain/core/prompts\";\nimport { MultiRouteChain } from \"./multi_route.js\";\nimport { LLMRouterChain } from \"./llm_router.js\";\nimport { ConversationChain, DEFAULT_TEMPLATE, } from \"../../chains/conversation.js\";\nimport { STRUCTURED_MULTI_RETRIEVAL_ROUTER_TEMPLATE } from \"./multi_retrieval_prompt.js\";\nimport { zipEntries } from \"./utils.js\";\nimport { RetrievalQAChain, } from \"../../chains/retrieval_qa.js\";\nimport { RouterOutputParser } from \"../../output_parsers/router.js\";\n/**\n * A class that represents a multi-retrieval question answering chain in\n * the LangChain framework. It extends the MultiRouteChain class and\n * provides additional functionality specific to multi-retrieval QA\n * chains.\n * @example\n * ```typescript\n * const multiRetrievalQAChain = MultiRetrievalQAChain.fromLLMAndRetrievers(\n *   new ChatOpenAI(),\n *   {\n *     retrieverNames: [\"aqua teen\", \"mst3k\", \"animaniacs\"],\n *     retrieverDescriptions: [\n *       \"Good for answering questions about Aqua Teen Hunger Force theme song\",\n *       \"Good for answering questions about Mystery Science Theater 3000 theme song\",\n *       \"Good for answering questions about Animaniacs theme song\",\n *     ],\n *     retrievers: [\n *       new MemoryVectorStore().asRetriever(3),\n *       new MemoryVectorStore().asRetriever(3),\n *       new MemoryVectorStore().asRetriever(3),\n *     ],\n *     retrievalQAChainOpts: {\n *       returnSourceDocuments: true,\n *     },\n *   },\n * );\n *\n * const result = await multiRetrievalQAChain.call({\n *   input:\n *     \"In the Aqua Teen Hunger Force theme song, who calls himself the mike rula?\",\n * });\n *\n * console.log(result.sourceDocuments, result.text);\n * ```\n */\nexport class MultiRetrievalQAChain extends MultiRouteChain {\n    get outputKeys() {\n        return [\"result\"];\n    }\n    /**\n     * @deprecated Use `fromRetrieversAndPrompts` instead\n     */\n    static fromRetrievers(llm, retrieverNames, retrieverDescriptions, retrievers, retrieverPrompts, defaults, options) {\n        return MultiRetrievalQAChain.fromLLMAndRetrievers(llm, {\n            retrieverNames,\n            retrieverDescriptions,\n            retrievers,\n            retrieverPrompts,\n            defaults,\n            multiRetrievalChainOpts: options,\n        });\n    }\n    /**\n     * A static method that creates an instance of MultiRetrievalQAChain from\n     * a BaseLanguageModel and a set of retrievers. It takes in optional\n     * parameters for the retriever names, descriptions, prompts, defaults,\n     * and additional options. It is an alternative method to fromRetrievers\n     * and provides more flexibility in configuring the underlying chains.\n     * @param llm A BaseLanguageModel instance.\n     * @param retrieverNames An array of retriever names.\n     * @param retrieverDescriptions An array of retriever descriptions.\n     * @param retrievers An array of BaseRetrieverInterface instances.\n     * @param retrieverPrompts An optional array of PromptTemplate instances for the retrievers.\n     * @param defaults An optional MultiRetrievalDefaults instance.\n     * @param multiRetrievalChainOpts Additional optional parameters for the multi-retrieval chain.\n     * @param retrievalQAChainOpts Additional optional parameters for the retrieval QA chain.\n     * @returns A new instance of MultiRetrievalQAChain.\n     */\n    static fromLLMAndRetrievers(llm, { retrieverNames, retrieverDescriptions, retrievers, retrieverPrompts, defaults, multiRetrievalChainOpts, retrievalQAChainOpts, }) {\n        const { defaultRetriever, defaultPrompt, defaultChain } = defaults ?? {};\n        if (defaultPrompt && !defaultRetriever) {\n            throw new Error(\"`default_retriever` must be specified if `default_prompt` is \\nprovided. Received only `default_prompt`.\");\n        }\n        const destinations = zipEntries(retrieverNames, retrieverDescriptions).map(([name, desc]) => `${name}: ${desc}`);\n        const structuredOutputParserSchema = z.object({\n            destination: z\n                .string()\n                .optional()\n                .describe('name of the question answering system to use or \"DEFAULT\"'),\n            next_inputs: z\n                .object({\n                query: z\n                    .string()\n                    .describe(\"a potentially modified version of the original input\"),\n            })\n                .describe(\"input to be fed to the next model\"),\n        });\n        const outputParser = new RouterOutputParser(structuredOutputParserSchema);\n        const destinationsStr = destinations.join(\"\\n\");\n        const routerTemplate = interpolateFString(STRUCTURED_MULTI_RETRIEVAL_ROUTER_TEMPLATE(outputParser.getFormatInstructions({ interpolationDepth: 4 })), {\n            destinations: destinationsStr,\n        });\n        const routerPrompt = new PromptTemplate({\n            template: routerTemplate,\n            inputVariables: [\"input\"],\n            outputParser,\n        });\n        const routerChain = LLMRouterChain.fromLLM(llm, routerPrompt);\n        const prompts = retrieverPrompts ?? retrievers.map(() => null);\n        const destinationChains = zipEntries(retrieverNames, retrievers, prompts).reduce((acc, [name, retriever, prompt]) => {\n            const opt = retrievalQAChainOpts ?? {};\n            if (prompt) {\n                opt.prompt = prompt;\n            }\n            acc[name] = RetrievalQAChain.fromLLM(llm, retriever, opt);\n            return acc;\n        }, {});\n        let _defaultChain;\n        if (defaultChain) {\n            _defaultChain = defaultChain;\n        }\n        else if (defaultRetriever) {\n            _defaultChain = RetrievalQAChain.fromLLM(llm, defaultRetriever, {\n                ...retrievalQAChainOpts,\n                prompt: defaultPrompt,\n            });\n        }\n        else {\n            const promptTemplate = DEFAULT_TEMPLATE.replace(\"input\", \"query\");\n            const prompt = new PromptTemplate({\n                template: promptTemplate,\n                inputVariables: [\"history\", \"query\"],\n            });\n            _defaultChain = new ConversationChain({\n                llm,\n                prompt,\n                outputKey: \"result\",\n            });\n        }\n        return new MultiRetrievalQAChain({\n            ...multiRetrievalChainOpts,\n            routerChain,\n            destinationChains,\n            defaultChain: _defaultChain,\n        });\n    }\n    _chainType() {\n        return \"multi_retrieval_qa_chain\";\n    }\n}\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 4344, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/chains/transform.js"],"sourcesContent":["import { BaseChain } from \"./base.js\";\n/**\n * Class that represents a transform chain. It extends the `BaseChain`\n * class and implements the `TransformChainFields` interface. It provides\n * a way to transform input values to output values using a specified\n * transform function.\n *\n * @deprecated\n * Switch to {@link https://js.langchain.com/docs/expression_language/ | expression language}.\n * Will be removed in 0.2.0\n */\nexport class TransformChain extends BaseChain {\n    static lc_name() {\n        return \"TransformChain\";\n    }\n    _chainType() {\n        return \"transform\";\n    }\n    get inputKeys() {\n        return this.inputVariables;\n    }\n    get outputKeys() {\n        return this.outputVariables;\n    }\n    constructor(fields) {\n        super(fields);\n        Object.defineProperty(this, \"transformFunc\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"inputVariables\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"outputVariables\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.transformFunc = fields.transform;\n        this.inputVariables = fields.inputVariables;\n        this.outputVariables = fields.outputVariables;\n    }\n    async _call(values, runManager) {\n        return this.transformFunc(values, runManager?.getChild(\"transform\"));\n    }\n}\n"],"names":[],"mappings":";;;AAAA;;AAWO,MAAM,uBAAuB,qJAAA,CAAA,YAAS;IACzC,OAAO,UAAU;QACb,OAAO;IACX;IACA,aAAa;QACT,OAAO;IACX;IACA,IAAI,YAAY;QACZ,OAAO,IAAI,CAAC,cAAc;IAC9B;IACA,IAAI,aAAa;QACb,OAAO,IAAI,CAAC,eAAe;IAC/B;IACA,YAAY,MAAM,CAAE;QAChB,KAAK,CAAC;QACN,OAAO,cAAc,CAAC,IAAI,EAAE,iBAAiB;YACzC,YAAY;YACZ,cAAc;YACd,UAAU;YACV,OAAO,KAAK;QAChB;QACA,OAAO,cAAc,CAAC,IAAI,EAAE,kBAAkB;YAC1C,YAAY;YACZ,cAAc;YACd,UAAU;YACV,OAAO,KAAK;QAChB;QACA,OAAO,cAAc,CAAC,IAAI,EAAE,mBAAmB;YAC3C,YAAY;YACZ,cAAc;YACd,UAAU;YACV,OAAO,KAAK;QAChB;QACA,IAAI,CAAC,aAAa,GAAG,OAAO,SAAS;QACrC,IAAI,CAAC,cAAc,GAAG,OAAO,cAAc;QAC3C,IAAI,CAAC,eAAe,GAAG,OAAO,eAAe;IACjD;IACA,MAAM,MAAM,MAAM,EAAE,UAAU,EAAE;QAC5B,OAAO,IAAI,CAAC,aAAa,CAAC,QAAQ,YAAY,SAAS;IAC3D;AACJ","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 4396, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/output_parsers/openai_functions.js"],"sourcesContent":["import { compare, } from \"@langchain/core/utils/json_patch\";\nimport { BaseCumulativeTransformOutputParser, BaseLLMOutputParser, OutputParserException, } from \"@langchain/core/output_parsers\";\nimport { parsePartialJson } from \"@langchain/core/output_parsers\";\n/**\n * Class for parsing the output of an LLM. Can be configured to return\n * only the arguments of the function call in the output.\n */\nexport class OutputFunctionsParser extends BaseLLMOutputParser {\n    static lc_name() {\n        return \"OutputFunctionsParser\";\n    }\n    constructor(config) {\n        super();\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\"langchain\", \"output_parsers\", \"openai_functions\"]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"argsOnly\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        this.argsOnly = config?.argsOnly ?? this.argsOnly;\n    }\n    /**\n     * Parses the output and returns a string representation of the function\n     * call or its arguments.\n     * @param generations The output of the LLM to parse.\n     * @returns A string representation of the function call or its arguments.\n     */\n    async parseResult(generations) {\n        if (\"message\" in generations[0]) {\n            const gen = generations[0];\n            const functionCall = gen.message.additional_kwargs.function_call;\n            if (!functionCall) {\n                throw new Error(`No function_call in message ${JSON.stringify(generations)}`);\n            }\n            if (!functionCall.arguments) {\n                throw new Error(`No arguments in function_call ${JSON.stringify(generations)}`);\n            }\n            if (this.argsOnly) {\n                return functionCall.arguments;\n            }\n            return JSON.stringify(functionCall);\n        }\n        else {\n            throw new Error(`No message in generations ${JSON.stringify(generations)}`);\n        }\n    }\n}\n/**\n * Class for parsing the output of an LLM into a JSON object. Uses an\n * instance of `OutputFunctionsParser` to parse the output.\n */\nexport class JsonOutputFunctionsParser extends BaseCumulativeTransformOutputParser {\n    static lc_name() {\n        return \"JsonOutputFunctionsParser\";\n    }\n    constructor(config) {\n        super(config);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\"langchain\", \"output_parsers\", \"openai_functions\"]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"outputParser\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"argsOnly\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        this.argsOnly = config?.argsOnly ?? this.argsOnly;\n        this.outputParser = new OutputFunctionsParser(config);\n    }\n    _diff(prev, next) {\n        if (!next) {\n            return undefined;\n        }\n        const ops = compare(prev ?? {}, next);\n        return ops;\n    }\n    async parsePartialResult(generations) {\n        const generation = generations[0];\n        if (!generation.message) {\n            return undefined;\n        }\n        const { message } = generation;\n        const functionCall = message.additional_kwargs.function_call;\n        if (!functionCall) {\n            return undefined;\n        }\n        if (this.argsOnly) {\n            return parsePartialJson(functionCall.arguments);\n        }\n        return {\n            ...functionCall,\n            arguments: parsePartialJson(functionCall.arguments),\n        };\n    }\n    /**\n     * Parses the output and returns a JSON object. If `argsOnly` is true,\n     * only the arguments of the function call are returned.\n     * @param generations The output of the LLM to parse.\n     * @returns A JSON object representation of the function call or its arguments.\n     */\n    async parseResult(generations) {\n        const result = await this.outputParser.parseResult(generations);\n        if (!result) {\n            throw new Error(`No result from \"OutputFunctionsParser\" ${JSON.stringify(generations)}`);\n        }\n        return this.parse(result);\n    }\n    async parse(text) {\n        try {\n            const parsedResult = JSON.parse(text);\n            if (this.argsOnly) {\n                return parsedResult;\n            }\n            parsedResult.arguments = JSON.parse(parsedResult.arguments);\n            return parsedResult;\n        }\n        catch (e) {\n            throw new OutputParserException(`Failed to parse. Text: \"${text}\". Error: ${e}`);\n        }\n    }\n    getFormatInstructions() {\n        return \"\";\n    }\n}\n/**\n * Class for parsing the output of an LLM into a JSON object and returning\n * a specific attribute. Uses an instance of `JsonOutputFunctionsParser`\n * to parse the output.\n */\nexport class JsonKeyOutputFunctionsParser extends BaseLLMOutputParser {\n    static lc_name() {\n        return \"JsonKeyOutputFunctionsParser\";\n    }\n    get lc_aliases() {\n        return {\n            attrName: \"key_name\",\n        };\n    }\n    constructor(fields) {\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\"langchain\", \"output_parsers\", \"openai_functions\"]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"outputParser\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: new JsonOutputFunctionsParser()\n        });\n        Object.defineProperty(this, \"attrName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.attrName = fields.attrName;\n    }\n    /**\n     * Parses the output and returns a specific attribute of the parsed JSON\n     * object.\n     * @param generations The output of the LLM to parse.\n     * @returns The value of a specific attribute of the parsed JSON object.\n     */\n    async parseResult(generations) {\n        const result = await this.outputParser.parseResult(generations);\n        return result[this.attrName];\n    }\n}\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 4611, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/chains/openai_functions/extraction.js"],"sourcesContent":["import { zodToJsonSchema } from \"zod-to-json-schema\";\nimport { PromptTemplate } from \"@langchain/core/prompts\";\nimport { JsonKeyOutputFunctionsParser, } from \"../../output_parsers/openai_functions.js\";\nimport { LLMChain } from \"../llm_chain.js\";\n/**\n * Function that returns an array of extraction functions. These functions\n * are used to extract relevant information from a passage.\n * @param schema The schema of the function parameters.\n * @returns An array of extraction functions.\n */\nfunction getExtractionFunctions(schema) {\n    return [\n        {\n            name: \"information_extraction\",\n            description: \"Extracts the relevant information from the passage.\",\n            parameters: {\n                type: \"object\",\n                properties: {\n                    info: {\n                        type: \"array\",\n                        items: {\n                            type: schema.type,\n                            properties: schema.properties,\n                            required: schema.required,\n                        },\n                    },\n                },\n                required: [\"info\"],\n            },\n        },\n    ];\n}\nconst _EXTRACTION_TEMPLATE = `Extract and save the relevant entities mentioned in the following passage together with their properties.\n\nPassage:\n{input}\n`;\n/**\n * Function that creates an extraction chain using the provided JSON schema.\n * It sets up the necessary components, such as the prompt, output parser, and tags.\n * @param schema JSON schema of the function parameters.\n * @param llm Must be a ChatOpenAI or AnthropicFunctions model that supports function calling.\n * @returns A LLMChain instance configured to return data matching the schema.\n */\nexport function createExtractionChain(schema, llm) {\n    const functions = getExtractionFunctions(schema);\n    const prompt = PromptTemplate.fromTemplate(_EXTRACTION_TEMPLATE);\n    const outputParser = new JsonKeyOutputFunctionsParser({ attrName: \"info\" });\n    return new LLMChain({\n        llm,\n        prompt,\n        llmKwargs: { functions },\n        outputParser,\n        tags: [\"openai_functions\", \"extraction\"],\n    });\n}\n/**\n * Function that creates an extraction chain from a Zod schema. It\n * converts the Zod schema to a JSON schema using zod-to-json-schema\n * before creating the extraction chain.\n * @param schema The Zod schema which extracted data should match\n * @param llm Must be a ChatOpenAI or AnthropicFunctions model that supports function calling.\n * @returns A LLMChain instance configured to return data matching the schema.\n */\nexport function createExtractionChainFromZod(\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nschema, llm) {\n    return createExtractionChain(zodToJsonSchema(schema), llm);\n}\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;AAAA;AACA;AACA;;;;;AACA;;;;;CAKC,GACD,SAAS,uBAAuB,MAAM;IAClC,OAAO;QACH;YACI,MAAM;YACN,aAAa;YACb,YAAY;gBACR,MAAM;gBACN,YAAY;oBACR,MAAM;wBACF,MAAM;wBACN,OAAO;4BACH,MAAM,OAAO,IAAI;4BACjB,YAAY,OAAO,UAAU;4BAC7B,UAAU,OAAO,QAAQ;wBAC7B;oBACJ;gBACJ;gBACA,UAAU;oBAAC;iBAAO;YACtB;QACJ;KACH;AACL;AACA,MAAM,uBAAuB,CAAC;;;;AAI9B,CAAC;AAQM,SAAS,sBAAsB,MAAM,EAAE,GAAG;IAC7C,MAAM,YAAY,uBAAuB;IACzC,MAAM,SAAS,kKAAA,CAAA,iBAAc,CAAC,YAAY,CAAC;IAC3C,MAAM,eAAe,IAAI,yKAAA,CAAA,+BAA4B,CAAC;QAAE,UAAU;IAAO;IACzE,OAAO,IAAI,0JAAA,CAAA,WAAQ,CAAC;QAChB;QACA;QACA,WAAW;YAAE;QAAU;QACvB;QACA,MAAM;YAAC;YAAoB;SAAa;IAC5C;AACJ;AASO,SAAS,6BAChB,8DAA8D;AAC9D,MAAM,EAAE,GAAG;IACP,OAAO,sBAAsB,CAAA,GAAA,+KAAA,CAAA,kBAAe,AAAD,EAAE,SAAS;AAC1D","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 4688, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/chains/openai_functions/tagging.js"],"sourcesContent":["import { zodToJsonSchema } from \"zod-to-json-schema\";\nimport { PromptTemplate } from \"@langchain/core/prompts\";\nimport { JsonOutputFunctionsParser, } from \"../../output_parsers/openai_functions.js\";\nimport { LLMChain } from \"../llm_chain.js\";\n/**\n * Function that returns an array of tagging functions. These functions\n * are used to extract relevant information from a passage.\n * @param schema The schema defining the structure of function parameters.\n * @returns An array of tagging functions.\n */\nfunction getTaggingFunctions(schema) {\n    return [\n        {\n            name: \"information_extraction\",\n            description: \"Extracts the relevant information from the passage.\",\n            parameters: schema,\n        },\n    ];\n}\nconst TAGGING_TEMPLATE = `Extract the desired information from the following passage.\n\nPassage:\n{input}\n`;\n/**\n * Function that creates a tagging chain using the provided schema,\n * LLM, and options. It constructs the LLM with the necessary\n * functions, prompt, output parser, and tags.\n * @param schema The schema defining the structure of function parameters.\n * @param llm LLM to use in the chain. Must support function calling.\n * @param options Options for creating the tagging chain.\n * @returns A new instance of LLMChain configured for tagging.\n *\n * @deprecated\n * Switch to expression language: https://js.langchain.com/docs/expression_language/\n * Will be removed in 0.2.0\n */\nexport function createTaggingChain(schema, llm, options = {}) {\n    const { prompt = PromptTemplate.fromTemplate(TAGGING_TEMPLATE), ...rest } = options;\n    const functions = getTaggingFunctions(schema);\n    const outputParser = new JsonOutputFunctionsParser();\n    return new LLMChain({\n        llm,\n        prompt,\n        llmKwargs: { functions },\n        outputParser,\n        tags: [\"openai_functions\", \"tagging\"],\n        ...rest,\n    });\n}\n/**\n * Function that creates a tagging chain from a Zod schema. It converts\n * the Zod schema to a JSON schema using the zodToJsonSchema function and\n * then calls createTaggingChain with the converted schema.\n * @param schema The Zod schema which extracted data should match.\n * @param llm LLM to use in the chain. Must support function calling.\n * @param options Options for creating the tagging chain.\n * @returns A new instance of LLMChain configured for tagging.\n *\n * @deprecated\n * Switch to expression language: https://js.langchain.com/docs/expression_language/\n * Will be removed in 0.2.0\n */\nexport function createTaggingChainFromZod(\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nschema, llm, options) {\n    return createTaggingChain(zodToJsonSchema(schema), llm, options);\n}\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;AAAA;AACA;AACA;;;;;AACA;;;;;CAKC,GACD,SAAS,oBAAoB,MAAM;IAC/B,OAAO;QACH;YACI,MAAM;YACN,aAAa;YACb,YAAY;QAChB;KACH;AACL;AACA,MAAM,mBAAmB,CAAC;;;;AAI1B,CAAC;AAcM,SAAS,mBAAmB,MAAM,EAAE,GAAG,EAAE,UAAU,CAAC,CAAC;IACxD,MAAM,EAAE,SAAS,kKAAA,CAAA,iBAAc,CAAC,YAAY,CAAC,iBAAiB,EAAE,GAAG,MAAM,GAAG;IAC5E,MAAM,YAAY,oBAAoB;IACtC,MAAM,eAAe,IAAI,yKAAA,CAAA,4BAAyB;IAClD,OAAO,IAAI,0JAAA,CAAA,WAAQ,CAAC;QAChB;QACA;QACA,WAAW;YAAE;QAAU;QACvB;QACA,MAAM;YAAC;YAAoB;SAAU;QACrC,GAAG,IAAI;IACX;AACJ;AAcO,SAAS,0BAChB,8DAA8D;AAC9D,MAAM,EAAE,GAAG,EAAE,OAAO;IAChB,OAAO,mBAAmB,CAAA,GAAA,+KAAA,CAAA,kBAAe,AAAD,EAAE,SAAS,KAAK;AAC5D","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 4749, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/util/openapi.js"],"sourcesContent":["import * as yaml from \"js-yaml\";\nexport class OpenAPISpec {\n    constructor(document) {\n        Object.defineProperty(this, \"document\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: document\n        });\n    }\n    get baseUrl() {\n        return this.document.servers ? this.document.servers[0].url : undefined;\n    }\n    getPathsStrict() {\n        if (!this.document.paths) {\n            throw new Error(\"No paths found in spec\");\n        }\n        return this.document.paths;\n    }\n    getParametersStrict() {\n        if (!this.document.components?.parameters) {\n            throw new Error(\"No parameters found in spec\");\n        }\n        return this.document.components.parameters;\n    }\n    getSchemasStrict() {\n        if (!this.document.components?.schemas) {\n            throw new Error(\"No schemas found in spec.\");\n        }\n        return this.document.components.schemas;\n    }\n    getRequestBodiesStrict() {\n        if (!this.document.components?.requestBodies) {\n            throw new Error(\"No request body found in spec.\");\n        }\n        return this.document.components.requestBodies;\n    }\n    getPathStrict(path) {\n        const pathItem = this.getPathsStrict()[path];\n        if (pathItem === undefined) {\n            throw new Error(`No path found for \"${path}\".`);\n        }\n        return pathItem;\n    }\n    getReferencedParameter(ref) {\n        const refComponents = ref.$ref.split(\"/\");\n        const refName = refComponents[refComponents.length - 1];\n        if (this.getParametersStrict()[refName] === undefined) {\n            throw new Error(`No parameter found for \"${refName}\".`);\n        }\n        return this.getParametersStrict()[refName];\n    }\n    getRootReferencedParameter(ref) {\n        let parameter = this.getReferencedParameter(ref);\n        while (parameter.$ref !== undefined) {\n            parameter = this.getReferencedParameter(parameter);\n        }\n        return parameter;\n    }\n    getReferencedSchema(ref) {\n        const refComponents = ref.$ref.split(\"/\");\n        const refName = refComponents[refComponents.length - 1];\n        const schema = this.getSchemasStrict()[refName];\n        if (schema === undefined) {\n            throw new Error(`No schema found for \"${refName}\".`);\n        }\n        return schema;\n    }\n    getSchema(schema) {\n        if (schema.$ref !== undefined) {\n            return this.getReferencedSchema(schema);\n        }\n        return schema;\n    }\n    getRootReferencedSchema(ref) {\n        let schema = this.getReferencedSchema(ref);\n        while (schema.$ref !== undefined) {\n            schema = this.getReferencedSchema(schema);\n        }\n        return schema;\n    }\n    getReferencedRequestBody(ref) {\n        const refComponents = ref.$ref.split(\"/\");\n        const refName = refComponents[refComponents.length - 1];\n        const requestBodies = this.getRequestBodiesStrict();\n        if (requestBodies[refName] === undefined) {\n            throw new Error(`No request body found for \"${refName}\"`);\n        }\n        return requestBodies[refName];\n    }\n    getRootReferencedRequestBody(ref) {\n        let requestBody = this.getReferencedRequestBody(ref);\n        while (requestBody.$ref !== undefined) {\n            requestBody = this.getReferencedRequestBody(requestBody);\n        }\n        return requestBody;\n    }\n    getMethodsForPath(path) {\n        const pathItem = this.getPathStrict(path);\n        // This is an enum in the underlying package.\n        // Werestate here to allow \"import type\" above and not cause warnings in certain envs.\n        const possibleMethods = [\n            \"get\",\n            \"put\",\n            \"post\",\n            \"delete\",\n            \"options\",\n            \"head\",\n            \"patch\",\n            \"trace\",\n        ];\n        return possibleMethods.filter((possibleMethod) => pathItem[possibleMethod] !== undefined);\n    }\n    getParametersForPath(path) {\n        const pathItem = this.getPathStrict(path);\n        if (pathItem.parameters === undefined) {\n            return [];\n        }\n        return pathItem.parameters.map((parameter) => {\n            if (parameter.$ref !== undefined) {\n                return this.getRootReferencedParameter(parameter);\n            }\n            return parameter;\n        });\n    }\n    getOperation(path, method) {\n        const pathItem = this.getPathStrict(path);\n        if (pathItem[method] === undefined) {\n            throw new Error(`No ${method} method found for \"path\".`);\n        }\n        return pathItem[method];\n    }\n    getParametersForOperation(operation) {\n        if (operation.parameters === undefined) {\n            return [];\n        }\n        return operation.parameters.map((parameter) => {\n            if (parameter.$ref !== undefined) {\n                return this.getRootReferencedParameter(parameter);\n            }\n            return parameter;\n        });\n    }\n    getRequestBodyForOperation(operation) {\n        const { requestBody } = operation;\n        if (requestBody?.$ref !== undefined) {\n            return this.getRootReferencedRequestBody(requestBody);\n        }\n        return requestBody;\n    }\n    static getCleanedOperationId(operation, path, method) {\n        let { operationId } = operation;\n        if (operationId === undefined) {\n            const updatedPath = path.replaceAll(/[^a-zA-Z0-9]/g, \"_\");\n            operationId = `${updatedPath.startsWith(\"/\") ? updatedPath.slice(1) : updatedPath}_${method}`;\n        }\n        return operationId\n            .replaceAll(/-/g, \"_\")\n            .replaceAll(/\\./g, \"_\")\n            .replaceAll(/\\//g, \"_\");\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    static alertUnsupportedSpec(document) {\n        const warningMessage = \"This may result in degraded performance. Convert your OpenAPI spec to 3.1.0 for better support.\";\n        const swaggerVersion = document.swagger;\n        const openAPIVersion = document.openapi;\n        if (openAPIVersion !== undefined && openAPIVersion !== \"3.1.0\") {\n            console.warn(`Attempting to load an OpenAPI ${openAPIVersion} spec. ${warningMessage}`);\n        }\n        else if (swaggerVersion !== undefined) {\n            console.warn(`Attempting to load a Swagger ${swaggerVersion} spec. ${warningMessage}`);\n        }\n        else {\n            throw new Error(`Attempting to load an unsupported spec:\\n\\n${JSON.stringify(document, null, 2)}.`);\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    static fromObject(document) {\n        OpenAPISpec.alertUnsupportedSpec(document);\n        return new OpenAPISpec(document);\n    }\n    static fromString(rawString) {\n        let document;\n        try {\n            document = JSON.parse(rawString);\n        }\n        catch (e) {\n            document = yaml.load(rawString);\n        }\n        return OpenAPISpec.fromObject(document);\n    }\n    static async fromURL(url) {\n        const response = await fetch(url);\n        const rawDocument = await response.text();\n        return OpenAPISpec.fromString(rawDocument);\n    }\n}\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 4950, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/chains/openai_functions/openapi.js"],"sourcesContent":["import { ChatOpenAI } from \"@langchain/openai\";\nimport { ChatPromptTemplate, HumanMessagePromptTemplate, } from \"@langchain/core/prompts\";\nimport { OpenAPISpec } from \"../../util/openapi.js\";\nimport { BaseChain } from \"../base.js\";\nimport { LLMChain } from \"../llm_chain.js\";\nimport { SequentialChain } from \"../sequential_chain.js\";\nimport { JsonOutputFunctionsParser } from \"../../output_parsers/openai_functions.js\";\n/**\n * Formats a URL by replacing path parameters with their corresponding\n * values.\n * @param url The URL to format.\n * @param pathParams The path parameters to replace in the URL.\n * @returns The formatted URL.\n */\nfunction formatURL(url, pathParams) {\n    const expectedPathParamNames = [...url.matchAll(/{(.*?)}/g)].map((match) => match[1]);\n    const newParams = {};\n    for (const paramName of expectedPathParamNames) {\n        const cleanParamName = paramName.replace(/^\\.;/, \"\").replace(/\\*$/, \"\");\n        const value = pathParams[cleanParamName];\n        let formattedValue;\n        if (Array.isArray(value)) {\n            if (paramName.startsWith(\".\")) {\n                const separator = paramName.endsWith(\"*\") ? \".\" : \",\";\n                formattedValue = `.${value.join(separator)}`;\n            }\n            else if (paramName.startsWith(\",\")) {\n                const separator = paramName.endsWith(\"*\") ? `${cleanParamName}=` : \",\";\n                formattedValue = `${cleanParamName}=${value.join(separator)}`;\n            }\n            else {\n                formattedValue = value.join(\",\");\n            }\n        }\n        else if (typeof value === \"object\") {\n            const kvSeparator = paramName.endsWith(\"*\") ? \"=\" : \",\";\n            const kvStrings = Object.entries(value).map(([k, v]) => k + kvSeparator + v);\n            let entrySeparator;\n            if (paramName.startsWith(\".\")) {\n                entrySeparator = \".\";\n                formattedValue = \".\";\n            }\n            else if (paramName.startsWith(\";\")) {\n                entrySeparator = \";\";\n                formattedValue = \";\";\n            }\n            else {\n                entrySeparator = \",\";\n                formattedValue = \"\";\n            }\n            formattedValue += kvStrings.join(entrySeparator);\n        }\n        else {\n            if (paramName.startsWith(\".\")) {\n                formattedValue = `.${value}`;\n            }\n            else if (paramName.startsWith(\";\")) {\n                formattedValue = `;${cleanParamName}=${value}`;\n            }\n            else {\n                formattedValue = value;\n            }\n        }\n        newParams[paramName] = formattedValue;\n    }\n    let formattedUrl = url;\n    for (const [key, newValue] of Object.entries(newParams)) {\n        formattedUrl = formattedUrl.replace(`{${key}}`, newValue);\n    }\n    return formattedUrl;\n}\n/**\n * Converts OpenAPI parameters to JSON schema format.\n * @param params The OpenAPI parameters to convert.\n * @param spec The OpenAPI specification that contains the parameters.\n * @returns The JSON schema representation of the OpenAPI parameters.\n */\nfunction convertOpenAPIParamsToJSONSchema(params, spec) {\n    return params.reduce((jsonSchema, param) => {\n        let schema;\n        if (param.schema) {\n            schema = spec.getSchema(param.schema);\n            // eslint-disable-next-line no-param-reassign\n            jsonSchema.properties[param.name] = convertOpenAPISchemaToJSONSchema(schema, spec);\n        }\n        else if (param.content) {\n            const mediaTypeSchema = Object.values(param.content)[0].schema;\n            if (mediaTypeSchema) {\n                schema = spec.getSchema(mediaTypeSchema);\n            }\n            if (!schema) {\n                return jsonSchema;\n            }\n            if (schema.description === undefined) {\n                schema.description = param.description ?? \"\";\n            }\n            // eslint-disable-next-line no-param-reassign\n            jsonSchema.properties[param.name] = convertOpenAPISchemaToJSONSchema(schema, spec);\n        }\n        else {\n            return jsonSchema;\n        }\n        if (param.required && Array.isArray(jsonSchema.required)) {\n            jsonSchema.required.push(param.name);\n        }\n        return jsonSchema;\n    }, {\n        type: \"object\",\n        properties: {},\n        required: [],\n        additionalProperties: {},\n    });\n}\n// OpenAI throws errors on extraneous schema properties, e.g. if \"required\" is set on individual ones\n/**\n * Converts OpenAPI schemas to JSON schema format.\n * @param schema The OpenAPI schema to convert.\n * @param spec The OpenAPI specification that contains the schema.\n * @returns The JSON schema representation of the OpenAPI schema.\n */\nexport function convertOpenAPISchemaToJSONSchema(schema, spec) {\n    if (schema.type === \"object\") {\n        return Object.keys(schema.properties ?? {}).reduce((jsonSchema, propertyName) => {\n            if (!schema.properties) {\n                return jsonSchema;\n            }\n            const openAPIProperty = spec.getSchema(schema.properties[propertyName]);\n            if (openAPIProperty.type === undefined) {\n                return jsonSchema;\n            }\n            // eslint-disable-next-line no-param-reassign\n            jsonSchema.properties[propertyName] = convertOpenAPISchemaToJSONSchema(openAPIProperty, spec);\n            if ((openAPIProperty.required ||\n                schema.required?.includes(propertyName)) &&\n                jsonSchema.required !== undefined) {\n                jsonSchema.required.push(propertyName);\n            }\n            return jsonSchema;\n        }, {\n            type: \"object\",\n            properties: {},\n            required: [],\n            additionalProperties: {},\n        });\n    }\n    if (schema.type === \"array\") {\n        return {\n            type: \"array\",\n            items: convertOpenAPISchemaToJSONSchema(schema.items ?? {}, spec),\n            minItems: schema.minItems,\n            maxItems: schema.maxItems,\n        };\n    }\n    return {\n        type: schema.type ?? \"string\",\n    };\n}\n/**\n * Converts an OpenAPI specification to OpenAI functions.\n * @param spec The OpenAPI specification to convert.\n * @returns An object containing the OpenAI functions derived from the OpenAPI specification and a default execution method.\n */\nexport function convertOpenAPISpecToOpenAIFunctions(spec) {\n    if (!spec.document.paths) {\n        return { openAIFunctions: [] };\n    }\n    const openAIFunctions = [];\n    const nameToCallMap = {};\n    for (const path of Object.keys(spec.document.paths)) {\n        const pathParameters = spec.getParametersForPath(path);\n        for (const method of spec.getMethodsForPath(path)) {\n            const operation = spec.getOperation(path, method);\n            if (!operation) {\n                return { openAIFunctions: [] };\n            }\n            const operationParametersByLocation = pathParameters\n                .concat(spec.getParametersForOperation(operation))\n                .reduce((operationParams, param) => {\n                if (!operationParams[param.in]) {\n                    // eslint-disable-next-line no-param-reassign\n                    operationParams[param.in] = [];\n                }\n                operationParams[param.in].push(param);\n                return operationParams;\n            }, {});\n            const paramLocationToRequestArgNameMap = {\n                query: \"params\",\n                header: \"headers\",\n                cookie: \"cookies\",\n                path: \"path_params\",\n            };\n            const requestArgsSchema = {};\n            for (const paramLocation of Object.keys(paramLocationToRequestArgNameMap)) {\n                if (operationParametersByLocation[paramLocation]) {\n                    requestArgsSchema[paramLocationToRequestArgNameMap[paramLocation]] =\n                        convertOpenAPIParamsToJSONSchema(operationParametersByLocation[paramLocation], spec);\n                }\n            }\n            const requestBody = spec.getRequestBodyForOperation(operation);\n            if (requestBody?.content !== undefined) {\n                const requestBodySchemas = {};\n                for (const [mediaType, mediaTypeObject] of Object.entries(requestBody.content)) {\n                    if (mediaTypeObject.schema !== undefined) {\n                        const schema = spec.getSchema(mediaTypeObject.schema);\n                        requestBodySchemas[mediaType] = convertOpenAPISchemaToJSONSchema(schema, spec);\n                    }\n                }\n                const mediaTypes = Object.keys(requestBodySchemas);\n                if (mediaTypes.length === 1) {\n                    requestArgsSchema.data = requestBodySchemas[mediaTypes[0]];\n                }\n                else if (mediaTypes.length > 1) {\n                    requestArgsSchema.data = {\n                        anyOf: Object.values(requestBodySchemas),\n                    };\n                }\n            }\n            const openAIFunction = {\n                name: OpenAPISpec.getCleanedOperationId(operation, path, method),\n                description: operation.description ?? operation.summary ?? \"\",\n                parameters: {\n                    type: \"object\",\n                    properties: requestArgsSchema,\n                    // All remaining top-level parameters are required\n                    required: Object.keys(requestArgsSchema),\n                },\n            };\n            openAIFunctions.push(openAIFunction);\n            const baseUrl = (spec.baseUrl ?? \"\").endsWith(\"/\")\n                ? (spec.baseUrl ?? \"\").slice(0, -1)\n                : spec.baseUrl ?? \"\";\n            nameToCallMap[openAIFunction.name] = {\n                method,\n                url: baseUrl + path,\n            };\n        }\n    }\n    return {\n        openAIFunctions,\n        defaultExecutionMethod: async (name, \n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        requestArgs, options) => {\n            const { headers: customHeaders, params: customParams, ...rest } = options ?? {};\n            const { method, url } = nameToCallMap[name];\n            const requestParams = requestArgs.params ?? {};\n            const nonEmptyParams = Object.keys(requestParams).reduce(\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            (filteredArgs, argName) => {\n                if (requestParams[argName] !== \"\" &&\n                    requestParams[argName] !== null &&\n                    requestParams[argName] !== undefined) {\n                    // eslint-disable-next-line no-param-reassign\n                    filteredArgs[argName] = requestParams[argName];\n                }\n                return filteredArgs;\n            }, {});\n            const queryString = new URLSearchParams({\n                ...nonEmptyParams,\n                ...customParams,\n            }).toString();\n            const pathParams = requestArgs.path_params;\n            const formattedUrl = formatURL(url, pathParams) +\n                (queryString.length ? `?${queryString}` : \"\");\n            const headers = {};\n            let body;\n            if (requestArgs.data !== undefined) {\n                let contentType = \"text/plain\";\n                if (typeof requestArgs.data !== \"string\") {\n                    if (typeof requestArgs.data === \"object\") {\n                        contentType = \"application/json\";\n                    }\n                    body = JSON.stringify(requestArgs.data);\n                }\n                else {\n                    body = requestArgs.data;\n                }\n                headers[\"content-type\"] = contentType;\n            }\n            const response = await fetch(formattedUrl, {\n                ...requestArgs,\n                method,\n                headers: {\n                    ...headers,\n                    ...requestArgs.headers,\n                    ...customHeaders,\n                },\n                body,\n                ...rest,\n            });\n            let output;\n            if (response.status < 200 || response.status > 299) {\n                output = `${response.status}: ${response.statusText} for ${name} called with ${JSON.stringify(queryString)}`;\n            }\n            else {\n                output = await response.text();\n            }\n            return output;\n        },\n    };\n}\n/**\n * A chain for making simple API requests.\n */\nclass SimpleRequestChain extends BaseChain {\n    static lc_name() {\n        return \"SimpleRequestChain\";\n    }\n    constructor(config) {\n        super();\n        Object.defineProperty(this, \"requestMethod\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"inputKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"function\"\n        });\n        Object.defineProperty(this, \"outputKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"response\"\n        });\n        this.requestMethod = config.requestMethod;\n    }\n    get inputKeys() {\n        return [this.inputKey];\n    }\n    get outputKeys() {\n        return [this.outputKey];\n    }\n    _chainType() {\n        return \"simple_request_chain\";\n    }\n    /** @ignore */\n    async _call(values, _runManager) {\n        const inputKeyValue = values[this.inputKey];\n        const methodName = inputKeyValue.name;\n        const args = inputKeyValue.arguments;\n        const response = await this.requestMethod(methodName, args);\n        return { [this.outputKey]: response };\n    }\n}\n/**\n * Create a chain for querying an API from a OpenAPI spec.\n * @param spec OpenAPISpec or url/file/text string corresponding to one.\n * @param options Custom options passed into the chain\n * @returns OpenAPIChain\n */\nexport async function createOpenAPIChain(spec, options = {}) {\n    let convertedSpec;\n    if (typeof spec === \"string\") {\n        try {\n            convertedSpec = await OpenAPISpec.fromURL(spec);\n        }\n        catch (e) {\n            try {\n                convertedSpec = OpenAPISpec.fromString(spec);\n            }\n            catch (e) {\n                throw new Error(`Unable to parse spec from source ${spec}.`);\n            }\n        }\n    }\n    else {\n        convertedSpec = OpenAPISpec.fromObject(spec);\n    }\n    const { openAIFunctions, defaultExecutionMethod } = convertOpenAPISpecToOpenAIFunctions(convertedSpec);\n    if (defaultExecutionMethod === undefined) {\n        throw new Error(`Could not parse any valid operations from the provided spec.`);\n    }\n    const { llm = new ChatOpenAI({ modelName: \"gpt-3.5-turbo-0613\" }), prompt = ChatPromptTemplate.fromMessages([\n        HumanMessagePromptTemplate.fromTemplate(\"Use the provided API's to respond to this user query:\\n\\n{query}\"),\n    ]), requestChain = new SimpleRequestChain({\n        requestMethod: async (name, args) => defaultExecutionMethod(name, args, {\n            headers: options.headers,\n            params: options.params,\n        }),\n    }), llmChainInputs = {}, verbose, ...rest } = options;\n    const formatChain = new LLMChain({\n        llm,\n        prompt,\n        outputParser: new JsonOutputFunctionsParser({ argsOnly: false }),\n        outputKey: \"function\",\n        llmKwargs: { functions: openAIFunctions },\n        ...llmChainInputs,\n    });\n    return new SequentialChain({\n        chains: [formatChain, requestChain],\n        outputVariables: [\"response\"],\n        inputVariables: formatChain.inputKeys,\n        verbose,\n        ...rest,\n    });\n}\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 5342, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/dist/chains/index.js"],"sourcesContent":["export { BaseChain } from \"./base.js\";\nexport { LLMChain } from \"./llm_chain.js\";\nexport { APIChain, } from \"./api/api_chain.js\";\nexport { ConversationChain } from \"./conversation.js\";\nexport { SequentialChain, SimpleSequentialChain, } from \"./sequential_chain.js\";\nexport { StuffDocumentsChain, MapReduceDocumentsChain, RefineDocumentsChain, } from \"./combine_docs_chain.js\";\nexport { ChatVectorDBQAChain, } from \"./chat_vector_db_chain.js\";\nexport { AnalyzeDocumentChain, } from \"./analyze_documents_chain.js\";\nexport { VectorDBQAChain } from \"./vector_db_qa.js\";\nexport { loadQAChain, loadQAStuffChain, loadQAMapReduceChain, loadQARefineChain, } from \"./question_answering/load.js\";\nexport { loadSummarizationChain, } from \"./summarization/load.js\";\nexport { ConversationalRetrievalQAChain, } from \"./conversational_retrieval_chain.js\";\nexport { RetrievalQAChain, } from \"./retrieval_qa.js\";\nexport { ConstitutionalChain, } from \"./constitutional_ai/constitutional_chain.js\";\nexport { ConstitutionalPrinciple, PRINCIPLES, } from \"./constitutional_ai/constitutional_principle.js\";\nexport { OpenAIModerationChain } from \"./openai_moderation.js\";\nexport { MultiRouteChain, RouterChain, } from \"./router/multi_route.js\";\nexport { LLMRouterChain, } from \"./router/llm_router.js\";\nexport { MultiPromptChain } from \"./router/multi_prompt.js\";\nexport { MultiRetrievalQAChain } from \"./router/multi_retrieval_qa.js\";\nexport { TransformChain } from \"./transform.js\";\nexport { createExtractionChain, createExtractionChainFromZod, } from \"./openai_functions/extraction.js\";\nexport { createTaggingChain, createTaggingChainFromZod, } from \"./openai_functions/tagging.js\";\nexport { createOpenAPIChain, convertOpenAPISpecToOpenAIFunctions, } from \"./openai_functions/openapi.js\";\n"],"names":[],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 5429, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/chains.js"],"sourcesContent":["export * from './dist/chains/index.js'"],"names":[],"mappings":";AAAA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 5447, "column": 0}, "map": {"version":3,"sources":["file:///Users/dylanchua/Documents/Personal/Code/neurodocument/node_modules/langchain/text_splitter.js"],"sourcesContent":["export * from './dist/text_splitter.js'"],"names":[],"mappings":";AAAA","ignoreList":[0],"debugId":null}}]
}